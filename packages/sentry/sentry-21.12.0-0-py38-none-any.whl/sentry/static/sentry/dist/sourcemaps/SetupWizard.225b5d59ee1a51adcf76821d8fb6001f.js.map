{"version":3,"file":"chunks/SetupWizard.xxxxxxxxxxxxxxxxxxxx.js","mappings":"mhBAgBA,MAAMA,UAAoBC,EAAAA,UAAwB,mDAKjC,CACbC,UAAU,IAGZC,4BACEC,KAAKC,eAGPA,eACE,OAAO,IAAIC,SAAcC,IACvBH,KAAKI,MAAMC,IAAIC,QAAf,kBAAkCN,KAAKI,MAAMG,KAA7C,KAAsD,CACpDC,OAAQ,MACRC,QAAS,KACPC,YAAW,IAAMV,KAAKC,gBAAgB,MAExCU,MAAO,KACLR,IACAH,KAAKY,SAAS,CAACd,UAAU,IACzBY,YAAW,IAAMG,OAAOC,SAAS,WAMzCC,gBACE,OACE,eAAKC,UAAU,MAAf,WACE,wBAAKC,EAAAA,EAAAA,GAAE,qDACP,wBAAKA,EAAAA,EAAAA,GAAE,6CACP,kBAAQD,UAAU,kBAAkBE,QAAS,IAAML,OAAOC,QAA1D,kCAONK,gBACE,OACE,eAAKH,UAAU,MAAf,UACE,wBAAKC,EAAAA,EAAAA,GAAE,qCAKbG,SACE,MAAM,SAACtB,GAAYE,KAAKqB,MAExB,OACE,eAAKL,UAAU,YAAf,UACE,QAAC,IAAD,CAAkBM,MAAO,CAACC,OAAQ,YAAazB,SAAUA,EAAzD,SACGA,EAAWE,KAAKe,gBAAkBf,KAAKmB,qBAvD5CvB,EAAAA,YAAAA,e,OAAAA,EAAAA,eACkB,CACpBW,MAAM,IA4DV,SAAeiB,EAAAA,EAAAA,GAAQ5B","sources":["webpack:///./app/views/setupWizard/index.tsx"],"sourcesContent":["import {Component} from 'react';\n\nimport {Client} from 'sentry/api';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {t} from 'sentry/locale';\nimport withApi from 'sentry/utils/withApi';\n\ntype Props = {\n  api: Client;\n  hash?: boolean | string;\n};\n\ntype State = {\n  finished: boolean;\n};\n\nclass SetupWizard extends Component<Props, State> {\n  static defaultProps = {\n    hash: false,\n  };\n\n  state: State = {\n    finished: false,\n  };\n\n  UNSAFE_componentWillMount() {\n    this.pollFinished();\n  }\n\n  pollFinished() {\n    return new Promise<void>(resolve => {\n      this.props.api.request(`/wizard/${this.props.hash}/`, {\n        method: 'GET',\n        success: () => {\n          setTimeout(() => this.pollFinished(), 1000);\n        },\n        error: () => {\n          resolve();\n          this.setState({finished: true});\n          setTimeout(() => window.close(), 10000);\n        },\n      });\n    });\n  }\n\n  renderSuccess() {\n    return (\n      <div className=\"row\">\n        <h5>{t('Return to your terminal to complete your setup')}</h5>\n        <h5>{t('(This window will close in 10 seconds)')}</h5>\n        <button className=\"btn btn-default\" onClick={() => window.close()}>\n          Close browser tab\n        </button>\n      </div>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <div className=\"row\">\n        <h5>{t('Waiting for wizard to connect')}</h5>\n      </div>\n    );\n  }\n\n  render() {\n    const {finished} = this.state;\n\n    return (\n      <div className=\"container\">\n        <LoadingIndicator style={{margin: '2em auto'}} finished={finished}>\n          {finished ? this.renderSuccess() : this.renderLoading()}\n        </LoadingIndicator>\n      </div>\n    );\n  }\n}\n\nexport default withApi(SetupWizard);\n"],"names":["SetupWizard","Component","finished","UNSAFE_componentWillMount","this","pollFinished","Promise","resolve","props","api","request","hash","method","success","setTimeout","error","setState","window","close","renderSuccess","className","t","onClick","renderLoading","render","state","style","margin","withApi"],"sourceRoot":""}