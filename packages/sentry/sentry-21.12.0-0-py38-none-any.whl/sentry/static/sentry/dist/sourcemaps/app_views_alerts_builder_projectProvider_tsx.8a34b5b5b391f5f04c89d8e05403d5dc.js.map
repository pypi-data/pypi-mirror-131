{"version":3,"file":"chunks/app_views_alerts_builder_projectProvider_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"qkBAsBA,SAASA,EAA4BC,GACnC,MAAMC,GAAMC,EAAAA,EAAAA,MACZC,EAAAA,EAAAA,GAAe,CAACC,SAAUJ,EAAMI,WAEhC,MAAM,SAACC,EAAD,OAAWC,EAAX,aAAmBC,KAAiBC,GAASR,GAC7C,UAACS,GAAaH,EAEpB,OACE,QAAC,IAAD,CAAUI,MAAOH,EAAaI,KAAMC,aAAW,EAA/C,SACG,EAAEC,SAAAA,EAAUC,gBAAAA,EAAiBC,aAAAA,MAC5B,IAAKD,EACH,OAAO,QAAC,IAAD,IAGT,MAAME,EAAWH,EAAuBI,MAAK,EAAEN,KAAAA,KAAUA,IAASF,IAIlE,OAAIM,IAAiBC,GAEjB,QAAC,IAAD,CAAOE,KAAK,UAAZ,UACGC,EAAAA,EAAAA,GAAE,uDAMTC,EAAAA,EAAAA,IAAgBnB,EAAKM,EAAaI,KAAM,CAACK,EAAQK,MAG/C,QAAC,EAAAC,SAAD,UACGjB,IAAYkB,EAAAA,EAAAA,gBAAelB,IACxBmB,EAAAA,EAAAA,cAAanB,EAAU,IAClBG,KACAH,EAASL,MACZgB,QAAAA,EACAT,aAAAA,IAEFF,QAtCPN,EAAAA,YAAAA,8BA8CT","sources":["webpack:///./app/views/alerts/builder/projectProvider.tsx"],"sourcesContent":["import {cloneElement, Fragment, isValidElement} from 'react';\nimport {RouteComponentProps} from 'react-router';\n\nimport {fetchOrgMembers} from 'sentry/actionCreators/members';\nimport Alert from 'sentry/components/alert';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {t} from 'sentry/locale';\nimport {Organization, Project} from 'sentry/types';\nimport Projects from 'sentry/utils/projects';\nimport useApi from 'sentry/utils/useApi';\nimport useScrollToTop from 'sentry/utils/useScrollToTop';\n\ntype Props = RouteComponentProps<RouteParams, {}> & {\n  organization: Organization;\n  children?: React.ReactNode;\n  hasMetricAlerts: boolean;\n};\n\ntype RouteParams = {\n  projectId: string;\n};\n\nfunction AlertBuilderProjectProvider(props: Props) {\n  const api = useApi();\n  useScrollToTop({location: props.location});\n\n  const {children, params, organization, ...other} = props;\n  const {projectId} = params;\n\n  return (\n    <Projects orgId={organization.slug} allProjects>\n      {({projects, initiallyLoaded, isIncomplete}) => {\n        if (!initiallyLoaded) {\n          return <LoadingIndicator />;\n        }\n\n        const project = (projects as Project[]).find(({slug}) => slug === projectId);\n\n        // if loaded, but project fetching states incomplete or project can't\n        // be found, project doesn't exist\n        if (isIncomplete || !project) {\n          return (\n            <Alert type=\"warning\">\n              {t('The project you were looking for was not found.')}\n            </Alert>\n          );\n        }\n\n        // fetch members list for mail action fields\n        fetchOrgMembers(api, organization.slug, [project.id]);\n\n        return (\n          <Fragment>\n            {children && isValidElement(children)\n              ? cloneElement(children, {\n                  ...other,\n                  ...children.props,\n                  project,\n                  organization,\n                })\n              : children}\n          </Fragment>\n        );\n      }}\n    </Projects>\n  );\n}\n\nexport default AlertBuilderProjectProvider;\n"],"names":["AlertBuilderProjectProvider","props","api","useApi","useScrollToTop","location","children","params","organization","other","projectId","orgId","slug","allProjects","projects","initiallyLoaded","isIncomplete","project","find","type","t","fetchOrgMembers","id","Fragment","isValidElement","cloneElement"],"sourceRoot":""}