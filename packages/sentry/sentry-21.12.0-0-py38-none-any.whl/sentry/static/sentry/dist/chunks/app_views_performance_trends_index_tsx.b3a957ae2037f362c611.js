"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_trends_index_tsx"],{"./app/views/performance/data.tsx":(t,e,r)=>{r.d(e,{GY:()=>c,hj:()=>d,V$:()=>m,ze:()=>f,L0:()=>h,g1:()=>_,DW:()=>y,Gm:()=>g,$r:()=>v,C:()=>b,AM:()=>P}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=r("./app/components/gridEditable/index.tsx"),n=r("./app/constants/pageFilters.tsx"),i=r("./app/locale.tsx"),s=r("./app/utils/discover/eventView.tsx"),o=r("./app/utils/queryString.tsx"),l=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/landing/utils.tsx"),u=r("./app/views/performance/vitalDetail/utils.tsx");const c="24h",d=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"];let m;function f(t){return[{tooltip:v(t,m.APDEX_NEW),value:"apdex()",label:(0,i.t)("Apdex")},{tooltip:v(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute")},{tooltip:v(t,m.FAILURE_RATE),value:"failure_rate()",label:(0,i.t)("Failure Rate")},{tooltip:v(t,m.P50),value:"p50()",label:(0,i.t)("p50 Duration")},{tooltip:v(t,m.P95),value:"p95()",label:(0,i.t)("p95 Duration")},{tooltip:v(t,m.P99),value:"p99()",label:(0,i.t)("p99 Duration")}]}function h(t){return[{tooltip:v(t,m.LCP),value:"p75(lcp)",label:(0,i.t)("LCP p75"),field:"p75(measurements.lcp)",isLeftDefault:!0,backupOption:{tooltip:v(t,m.FCP),value:"p75(fcp)",label:(0,i.t)("FCP p75"),field:"p75(measurements.fcp)"}},{tooltip:v(t,m.DURATION_DISTRIBUTION),value:"lcp_distribution",label:(0,i.t)("LCP Distribution"),field:"measurements.lcp",isDistribution:!0,isRightDefault:!0,backupOption:{tooltip:v(t,m.DURATION_DISTRIBUTION),value:"fcp_distribution",label:(0,i.t)("FCP Distribution"),field:"measurements.fcp",isDistribution:!0}},{tooltip:v(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute"),field:"tpm()"}]}function _(t){return[{tooltip:v(t,m.P50),value:"p50()",label:(0,i.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:v(t,m.P75),value:"p75()",label:(0,i.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:v(t,m.P95),value:"p95()",label:(0,i.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:v(t,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,i.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0}]}function y(t){return[{tooltip:v(t,m.P50),value:"p50()",label:(0,i.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:v(t,m.P75),value:"p75()",label:(0,i.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:v(t,m.P95),value:"p95()",label:(0,i.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:v(t,m.P99),value:"p99()",label:(0,i.t)("Duration p99"),field:"p99(transaction.duration)"},{tooltip:v(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:v(t,m.FAILURE_RATE),value:"failure_rate()",label:(0,i.t)("Failure Rate"),field:"failure_rate()"},{tooltip:v(t,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,i.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0},{tooltip:v(t,m.APDEX),value:"apdex()",label:(0,i.t)("Apdex"),field:"apdex()"}]}function g(t){return[{tooltip:v(t,m.APP_START_COLD),value:"p50(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p50"),field:"p50(measurements.app_start_cold)"},{tooltip:v(t,m.APP_START_COLD),value:"p75(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p75"),field:"p75(measurements.app_start_cold)",isLeftDefault:!0},{tooltip:v(t,m.APP_START_COLD),value:"p95(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p95"),field:"p95(measurements.app_start_cold)"},{tooltip:v(t,m.APP_START_COLD),value:"p99(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p99"),field:"p99(measurements.app_start_cold)"},{tooltip:v(t,m.DURATION_DISTRIBUTION),value:"app_start_cold_distribution",label:(0,i.t)("Cold Start Distribution"),field:"measurements.app_start_cold",isDistribution:!0,isRightDefault:!0},{tooltip:v(t,m.APP_START_WARM),value:"p50(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p50"),field:"p50(measurements.app_start_warm)"},{tooltip:v(t,m.APP_START_WARM),value:"p75(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p75"),field:"p75(measurements.app_start_warm)"},{tooltip:v(t,m.APP_START_WARM),value:"p95(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p95"),field:"p95(measurements.app_start_warm)"},{tooltip:v(t,m.APP_START_WARM),value:"p99(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p99"),field:"p99(measurements.app_start_warm)"},{tooltip:v(t,m.DURATION_DISTRIBUTION),value:"app_start_warm_distribution",label:(0,i.t)("Warm Start Distribution"),field:"measurements.app_start_warm",isDistribution:!0},{tooltip:v(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:v(t,m.FAILURE_RATE),value:"failure_rate()",label:(0,i.t)("Failure Rate"),field:"failure_rate()"}]}!function(t){t.APDEX="apdex",t.TPM="tpm",t.THROUGHPUT="throughput",t.FAILURE_RATE="failureRate",t.P50="p50",t.P75="p75",t.P95="p95",t.P99="p99",t.LCP="lcp",t.FCP="fcp",t.FID="fid",t.CLS="cls",t.USER_MISERY="userMisery",t.STATUS_BREAKDOWN="statusBreakdown",t.DURATION_DISTRIBUTION="durationDistribution",t.USER_MISERY_NEW="userMiseryNew",t.APDEX_NEW="apdexNew",t.APP_START_COLD="appStartCold",t.APP_START_WARM="appStartWarm",t.SLOW_FRAMES="slowFrames",t.FROZEN_FRAMES="frozenFrames",t.STALL_PERCENTAGE="stallPercentage",t.MOST_ISSUES="mostIssues",t.MOST_ERRORS="mostErrors",t.SLOW_HTTP_SPANS="slowHTTPSpans"}(m||(m={}));const T={apdex:()=>(0,i.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to performance settings."),tpm:()=>(0,i.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,i.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,i.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,i.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,i.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,i.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,i.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,i.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,i.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,i.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,i.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),userMisery:t=>(0,i.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x your organization's apdex threshold of %sms.",t.apdexThreshold),statusBreakdown:()=>(0,i.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,i.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMiseryNew:()=>(0,i.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdexNew:()=>(0,i.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,i.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,i.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,i.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,i.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,i.t)("Transactions with the most associated errors."),mostIssues:()=>(0,i.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,i.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,i.t)("The percentage of the transaction duration in which the application is in a stalled state.")};function v(t,e){return T.hasOwnProperty(e)?T[e](t):""}function b(t,e,r,{isTrends:u=!1,isMetricsData:d=!1}={}){const m=function(t,e){const{query:r}=t,n=r.start&&r.end,p={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(p.fields.length).fill(a.z7);u[p.fields.length-1]="110",p.widths=u,r.statsPeriod||n||(p.range=c),p.orderby=(0,o.ro)(r.sort,"-tpm");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||e||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(p,t);return f.additionalConditions.addFilterValues("event.type",["transaction"]),f}(t,d);if(u)return m;const f=(0,p.Q_)(t,r,m);switch(null==f?void 0:f.field){case p.BY.FRONTEND_PAGELOAD:return function(t,e){const{query:r}=t,n=r.start&&r.end,p={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(p.fields.length).fill(a.z7);u[p.fields.length-1]="110",p.widths=u,r.statsPeriod||n||(p.range=c),p.orderby=(0,o.ro)(r.sort,"-tpm");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||e||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(p,t);return f.additionalConditions.addFilterValues("event.type",["transaction"]).addFilterValues("transaction.op",["pageload"]),f}(t,d);case p.BY.FRONTEND_OTHER:return function(t,e,r){const{query:n}=t,p=n.start&&n.end,u={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},d=Array(u.fields.length).fill(a.z7);d[u.fields.length-1]="110",u.widths=d,n.statsPeriod||p||(u.range=c),u.orderby=(0,o.ro)(n.sort,"-tpm");const m=(0,o.ro)(n.query,""),f=new l.MY(m);f.hasFilter("transaction.duration")||r||f.setFilterValues("transaction.duration",["<15m"]),f.freeText.length>0&&(f.setFilterValues("transaction",["*".concat(f.freeText.join(" "),"*")],!1),f.freeText=[]),u.query=f.formatString();const h=s.ZP.fromNewQueryWithLocation(u,t);return h.additionalConditions.addFilterValues("event.type",["transaction"]),e.features.includes("organizations:performance-landing-widgets")||h.additionalConditions.addFilterValues("!transaction.op",["pageload"]),h}(t,e,d);case p.BY.BACKEND:return function(t,e){const{query:r}=t,n=r.start&&r.end,p={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(p.fields.length).fill(a.z7);u[p.fields.length-1]="110",p.widths=u,r.statsPeriod||n||(p.range=c),p.orderby=(0,o.ro)(r.sort,"-tpm");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||e||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(p,t);return f.additionalConditions.addFilterValues("event.type",["transaction"]),f}(t,d);case p.BY.MOBILE:return function(t,e,r,p){const{query:u}=t,d=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.app_start_cold)","p75(measurements.app_start_warm)","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"],m=r.project;if(m.length>0&&m[0]!==n.mP){const t=e.filter((t=>m.includes(parseInt(t.id,10))));t.length>0&&t.every((t=>"react-native"===t.platform))&&(d.pop(),d.pop(),d.push("p75(measurements.stall_percentage)"))}const f=u.start&&u.end,h={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...d,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},_=Array(h.fields.length).fill(a.z7);_[h.fields.length-1]="110",h.widths=_,u.statsPeriod||f||(h.range=c),h.orderby=(0,o.ro)(u.sort,"-tpm");const y=(0,o.ro)(u.query,""),g=new l.MY(y);g.hasFilter("transaction.duration")||p||g.setFilterValues("transaction.duration",["<15m"]),g.freeText.length>0&&(g.setFilterValues("transaction",["*".concat(g.freeText.join(" "),"*")],!1),g.freeText=[]),h.query=g.formatString();const T=s.ZP.fromNewQueryWithLocation(h,t);return T.additionalConditions.addFilterValues("event.type",["transaction"]),T}(t,r,m,d);default:return m}}function P(t,e){const{query:r}=e,a=(0,u.iF)(e),n=r.start&&r.end,p={id:void 0,name:(0,i.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()","p50(".concat(a,")"),"p75(".concat(a,")"),"p95(".concat(a,")"),(0,u.Ve)(a),(0,u.q4)(a)],version:2};r.statsPeriod||n||(p.range=c),p.orderby=(0,o.ro)(r.sort,"-count");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(p,e);return f.additionalConditions.addFilterValues("event.type",["transaction"]).addFilterValues("has",[a]),f}},"./app/views/performance/landing/utils.tsx":(t,e,r)=>{r.d(e,{Y1:()=>m,V:()=>f,BY:()=>h,Lx:()=>_,NO:()=>y,kP:()=>g,Cf:()=>T,TT:()=>v,Q_:()=>b,NJ:()=>P,Oo:()=>w,hv:()=>D,Gd:()=>x});var a=r("../node_modules/react-router/es/index.js"),n=r("../node_modules/lodash/omit.js"),i=r.n(n),s=r("./app/locale.tsx"),o=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=r("./app/utils/formatters.tsx"),p=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),c=r("./app/views/performance/data.tsx"),d=r("./app/views/performance/utils.tsx");const m="left",f="right";let h;!function(t){t.ALL="all",t.FRONTEND_PAGELOAD="frontend_pageload",t.FRONTEND_OTHER="frontend_other",t.BACKEND="backend",t.MOBILE="mobile"}(h||(h={}));const _=[{label:"All Transactions",field:h.ALL},{label:"Frontend (Pageload)",field:h.FRONTEND_PAGELOAD},{label:"Frontend (Other)",field:h.FRONTEND_OTHER},{label:"Backend",field:h.BACKEND},{label:"Mobile",field:h.MOBILE,isShown:t=>t.features.includes("performance-mobile-vitals")}],y=[{label:"All Transactions",field:h.ALL},{label:"Web Vitals",field:h.FRONTEND_PAGELOAD},{label:"Frontend",field:h.FRONTEND_OTHER},{label:"Backend",field:h.BACKEND},{label:"Mobile",field:h.MOBILE,isShown:t=>t.features.includes("performance-mobile-vitals")}];function g(t,e){const{eventView:r,location:n}=e,i=new u.MY(r.query);i.addFilterValues("!transaction",["".concat(t)]),a.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:i.formatString()}})}function T(t){var e;const r=(0,p.ro)(null==t||null===(e=t.query)||void 0===e?void 0:e.landingDisplay);return _.find((({field:t})=>t===r))}function v(t,e){const r=w(t,e);return _.find((({field:t})=>t===r))||_[0]}function b(t,e,r){return T(t)||v(e,r)}function P(t,e,r,n,s){const l=(0,p.ro)(e.query.query,""),c=new u.MY(l);c.removeFilter("transaction.op");const d={...i()(e.query,["landingDisplay","sort"]),query:c.formatString()};delete d[m],delete d[f];const h=w(r,s),_=b(e,r,s).field,y=h===t?{...d}:{...d,landingDisplay:t};(0,o.Z)("performance_views.landingv3.display_change",{organization:n,change_to_display:t,default_display:h,current_display:_,is_default:h===_}),a.browserHistory.push({pathname:e.pathname,query:y})}function w(t,e){var r;if(!e)return h.ALL;const a=e.project;return null!==(r={[d.iy.ANY]:h.ALL,[d.iy.FRONTEND]:h.FRONTEND_PAGELOAD,[d.iy.BACKEND]:h.BACKEND,[d.iy.MOBILE]:h.MOBILE}[(0,d.Bh)(t,a)])&&void 0!==r?r:h.ALL}const D=t=>({"p75(transaction.duration)":{title:(0,s.t)("Duration (p75)"),tooltip:(0,c.$r)(t,c.V$.P75),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"tpm()":{title:(0,s.t)("Throughput"),tooltip:(0,c.$r)(t,c.V$.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,s.t)("Failure Rate"),tooltip:(0,c.$r)(t,c.V$.FAILURE_RATE),formatter:t=>(0,l.rl)(t,2)},"apdex()":{title:(0,s.t)("Apdex"),tooltip:(0,c.$r)(t,c.V$.APDEX_NEW),formatter:t=>(0,l.$1)(t,4)},"p75(measurements.frames_slow_rate)":{title:(0,s.t)("Slow Frames (p75)"),tooltip:(0,c.$r)(t,c.V$.SLOW_FRAMES),formatter:t=>(0,l.rl)(t,2)},"p75(measurements.frames_frozen_rate)":{title:(0,s.t)("Frozen Frames (p75)"),tooltip:(0,c.$r)(t,c.V$.FROZEN_FRAMES),formatter:t=>(0,l.rl)(t,2)},"p75(measurements.app_start_cold)":{title:(0,s.t)("Cold Start (p75)"),tooltip:(0,c.$r)(t,c.V$.APP_START_COLD),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,s.t)("Warm Start (p75)"),tooltip:(0,c.$r)(t,c.V$.APP_START_WARM),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,s.t)("Stall Percentage (p75)"),tooltip:(0,c.$r)(t,c.V$.STALL_PERCENTAGE),formatter:t=>(0,l.rl)(t,2)}});function x(t,e){const r=t.find((t=>t.isLeftDefault))||t[0],a=t.find((t=>t.isRightDefault))||t[1];return{leftAxis:t.find((t=>t.value===e.query[m]))||r,rightAxis:t.find((t=>t.value===e.query[f]))||a}}},"./app/views/performance/trends/index.tsx":(t,e,r)=>{r.r(e),r.d(e,{default:()=>z});var a=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),s=r("./app/components/noProjectMessage.tsx"),o=r("./app/components/sentryDocumentTitle.tsx"),l=r("./app/locale.tsx"),p=r("./app/styles/organization.tsx"),u=r("./app/utils/withApi.tsx"),c=r("./app/utils/withGlobalSelection.tsx"),d=r("./app/utils/withOrganization.tsx"),m=r("./app/utils/withProjects.tsx"),f=r("./app/views/performance/data.tsx"),h=(r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/react-router/es/index.js")),_=r("./app/components/alert.tsx"),y=r("./app/components/breadcrumbs.tsx"),g=r("./app/components/dropdownControl.tsx"),T=r("./app/components/events/searchBar.tsx"),v=r("./app/components/layouts/thirds.tsx"),b=r("./app/components/organizations/globalSelectionHeader/index.tsx"),P=r("./app/constants/index.tsx"),w=r("./app/icons/iconFlag.tsx"),D=r("./app/styles/space.tsx"),x=r("./app/utils/analytics.tsx"),A=r("./app/utils/discover/fields.tsx"),S=r("./app/utils/queryString.tsx"),F=r("./app/utils/tokenizeSearch.tsx"),R=r("./app/views/performance/utils.tsx"),E=r("./app/views/performance/trends/changedTransactions.tsx"),N=r("./app/views/performance/trends/types.tsx"),O=r("./app/views/performance/trends/utils.tsx"),q=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class C extends i.Component{constructor(...t){super(...t),(0,a.Z)(this,"state",{}),(0,a.Z)(this,"handleSearch",(t=>{const{location:e}=this.props,r=(0,O.Ws)();h.browserHistory.push({pathname:e.pathname,query:{...e.query,...r,query:String(t).trim()||void 0}})})),(0,a.Z)(this,"setError",(t=>{this.setState({error:t})})),(0,a.Z)(this,"handleTrendFunctionChange",(t=>{const{organization:e,location:r}=this.props,a={};Object.values(N.ER).forEach((t=>{const e=(0,O.j_)(t);a[e]=void 0})),(0,x.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(e.id,10),function_name:t}),this.setState({previousTrendFunction:(0,O.CE)(r).field});const n=(0,O.Ws)();h.browserHistory.push({pathname:r.pathname,query:{...r.query,...a,...n,trendFunction:t}})})),(0,a.Z)(this,"handleParameterChange",(t=>{const{organization:e,location:r}=this.props,a=(0,O.Ws)();(0,x.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(e.id,10),parameter_name:t}),h.browserHistory.push({pathname:r.pathname,query:{...r.query,...a,trendParameter:t}})}))}renderError(){const{error:t}=this.state;return t?(0,q.tZ)(_.Z,{type:"error",icon:(0,q.tZ)(w.G,{size:"md"}),children:t}):null}getPerformanceLink(){const{location:t}=this.props,e={...t.query},r=(0,S.ro)(t.query.query,""),a=new F.MY(r);return a.removeFilter("tpm()"),a.removeFilter("confidence()"),a.removeFilter("transaction.duration"),e.query=a.formatString(),{pathname:(0,R.de)(this.props.organization),query:e}}render(){const{organization:t,eventView:e,location:r}=this.props,{previousTrendFunction:a}=this.state,n=e.clone();(0,O.iF)(n,r);const i=(0,A.db)(t,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),s=(0,O.CE)(r),o=(0,O.IO)(r),p=(0,R.Ov)(r);return(0,q.BX)(b.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:O._1}},children:[(0,q.tZ)(v.h4,{children:(0,q.BX)(v.oB,{children:[(0,q.tZ)(y.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,q.tZ)(v.Dx,{children:(0,l.t)("Trends")})]})}),(0,q.tZ)(v.uT,{children:(0,q.tZ)(v.or,{fullWidth:!0,children:(0,q.BX)(L,{location:r,eventView:e,children:[(0,q.BX)(I,{children:[(0,q.tZ)(Z,{searchSource:"trends",organization:t,projectIds:n.project,query:p,fields:i,onSearch:this.handleSearch,maxQueryLength:P.dI}),(0,q.tZ)(j,{children:(0,q.tZ)(g.ZP,{buttonProps:{prefix:(0,l.t)("Percentile")},label:s.label,children:O.T1.map((({label:t,field:e})=>(0,q.tZ)(g.hP,{onSelect:this.handleTrendFunctionChange,eventKey:e,"data-test-id":e,isActive:e===s.field,children:t},e)))})}),(0,q.tZ)(j,{children:(0,q.tZ)(g.ZP,{buttonProps:{prefix:(0,l.t)("Parameter")},label:o.label,children:O.cs.map((({label:t})=>(0,q.tZ)(g.hP,{onSelect:this.handleParameterChange,eventKey:t,"data-test-id":t,isActive:t===o.label,children:t},t)))})})]}),(0,q.BX)(M,{children:[(0,q.tZ)(E.Z,{trendChangeType:N.ER.IMPROVED,previousTrendFunction:a,trendView:n,location:r,setError:this.setError}),(0,q.tZ)(E.Z,{trendChangeType:N.ER.REGRESSION,previousTrendFunction:a,trendView:n,location:r,setError:this.setError})]})]})})})]})}}C.displayName="TrendsContent";class L extends i.Component{constructor(...t){super(...t),(0,a.Z)(this,"hasPushedDefaults",!1)}render(){const{children:t,location:e,eventView:r}=this.props,a=(0,S.ro)(e.query.query),n=(0,O.IO)(e),s=new F.MY(a||"");if(a||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,q.tZ)(i.Fragment,{children:t});this.hasPushedDefaults=!0,s.setFilterValues("tpm()",[">0.01"]),s.setFilterValues(n.column,[">0","<".concat(O.bg)]);const o=s.formatString();return r.query=o,h.browserHistory.push({pathname:e.pathname,query:{...e.query,cursor:void 0,query:String(o).trim()||void 0}}),null}}L.displayName="DefaultTrends";const Z=(0,n.Z)(T.Z,{target:"e1yf76wj3"})("flex-grow:1;margin-bottom:",(0,D.Z)(2),";"),j=(0,n.Z)("div",{target:"e1yf76wj2"})("margin-left:",(0,D.Z)(1),";flex-grow:0;"),I=(0,n.Z)("div",{target:"e1yf76wj1"})({name:"zjik7",styles:"display:flex"}),M=(0,n.Z)("div",{target:"e1yf76wj0"})("display:grid;grid-gap:",(0,D.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:repeat(2, minmax(0, 1fr));align-items:stretch;}"),V=(0,c.Z)(C);class B extends i.Component{constructor(...t){super(...t),(0,a.Z)(this,"state",{eventView:(0,f.C)(this.props.location,this.props.organization,this.props.projects,{isTrends:!0}),error:void 0}),(0,a.Z)(this,"setError",(t=>{this.setState({error:t})}))}static getDerivedStateFromProps(t,e){return{...e,eventView:(0,f.C)(t.location,t.organization,t.projects,{isTrends:!0})}}getDocumentTitle(){return[(0,l.t)("Trends"),(0,l.t)("Performance")].join(" - ")}renderContent(){const{organization:t,location:e}=this.props,{eventView:r}=this.state;return(0,q.tZ)(V,{organization:t,location:e,eventView:r})}render(){const{organization:t}=this.props;return(0,q.tZ)(o.Z,{title:this.getDocumentTitle(),orgSlug:t.slug,children:(0,q.tZ)(W,{children:(0,q.tZ)(s.Z,{organization:t,children:this.renderContent()})})})}}B.displayName="TrendsSummary";const z=(0,d.Z)((0,m.Z)((0,c.Z)((0,u.Z)(B)))),W=(0,n.Z)(p.JH,{target:"e183k9ay0"})({name:"1hcx8jb",styles:"padding:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_index_tsx.f158b9a21a98eb2eba1e30f43a0a15a4.js.map