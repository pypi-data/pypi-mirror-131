"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["node_modules_dnd-kit_accessibility_dist_accessibility_esm_js-app_views_dashboardsV2_detail_tsx"],{"../node_modules/@dnd-kit/accessibility/dist/accessibility.esm.js":(t,e,a)=>{a.d(e,{Mv:()=>s,LE:()=>n,qg:()=>r});var i=a("../node_modules/react/index.js");const d={display:"none"};function s({id:t,value:e}){return i.createElement("div",{id:t,style:d},e)}const o={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function n({id:t,announcement:e}){return i.createElement("div",{id:t,style:o,role:"status","aria-live":"assertive","aria-atomic":!0},e)}function r(){const[t,e]=(0,i.useState)("");return{announce:(0,i.useCallback)((t=>{null!=t&&e(t)}),[]),announcement:t}}},"./app/views/dashboardsV2/data.tsx":(t,e,a)=>{a.d(e,{R7:()=>d,L3:()=>s,GY:()=>o});var i=a("./app/locale.tsx");const d={id:"",dateCreated:"",createdBy:void 0,title:(0,i.t)("Untitled dashboard"),widgets:[]},s=[{label:(0,i.t)("Area Chart"),value:"area"},{label:(0,i.t)("Bar Chart"),value:"bar"},{label:(0,i.t)("Line Chart"),value:"line"},{label:(0,i.t)("Table"),value:"table"},{label:(0,i.t)("World Map"),value:"world_map"},{label:(0,i.t)("Big Number"),value:"big_number"},{label:(0,i.t)("Top 5 Events"),value:"top_n"}],o=((0,i.t)("1 Minute"),(0,i.t)("5 Minutes"),(0,i.t)("15 Minutes"),(0,i.t)("30 Minutes"),(0,i.t)("1 Hour"),(0,i.t)("1 Day"),"24h")},"./app/views/dashboardsV2/detail.tsx":(t,e,a)=>{a.d(e,{Z:()=>mt});var i=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.string.replace.js"),a("../node_modules/react/index.js")),o=a("../node_modules/react-router/es/index.js"),n=a("../node_modules/lodash/isEqual.js"),r=a.n(n),l=a("./app/actionCreators/dashboards.tsx"),h=a("./app/actionCreators/indicator.tsx"),c=a("./app/actionCreators/modal.tsx"),p=a("./app/components/breadcrumbs.tsx"),u=a("./app/components/hookOrDefault.tsx"),g=a("./app/components/layouts/thirds.tsx"),b=a("./app/components/noProjectMessage.tsx"),m=a("./app/components/organizations/globalSelectionHeader/index.tsx"),y=a("./app/locale.tsx"),w=a("./app/styles/organization.tsx"),D=a("./app/styles/space.tsx"),f=a("./app/utils/analytics.tsx"),Z=a("./app/utils/withApi.tsx"),E=a("./app/utils/withOrganization.tsx"),v=a("./app/views/dashboardsV2/gridLayout/dashboard.tsx"),S=a("./app/utils/localStorage.tsx");const W=(t,e)=>"grid-layout-".concat(t,"-").concat(e),x=(t,e)=>{const a=S.Z.getItem(W(t,e));return a?JSON.parse(a):[]},z=(t,e,a)=>{S.Z.setItem(W(t,e),JSON.stringify(a))};var C=a("./app/components/acl/feature.tsx"),I=a("./app/components/acl/featureDisabled.tsx"),T=a("./app/components/button.tsx"),_=a("./app/components/buttonBar.tsx"),U=a("./app/components/confirm.tsx"),A=a("./app/components/hovercard.tsx"),N=a("./app/components/tooltip.tsx"),B=a("./app/icons/index.tsx"),k=a("./app/views/dashboardsV2/types.tsx"),L=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class q extends s.Component{render(){const{organization:t,dashboardState:e,dashboards:a,widgetCount:i,onEdit:d,onCancel:o,onCommit:n,onDelete:r,onAddWidget:l}=this.props,h=(0,L.tZ)(T.ZP,{"data-test-id":"dashboard-cancel",onClick:t=>{t.preventDefault(),o()},children:(0,y.t)("Cancel")});return[k.n3.EDIT,k.n3.PENDING_DELETE].includes(e)?(0,L.BX)(V,{gap:1,children:[h,(0,L.tZ)(U.Z,{priority:"danger",message:(0,y.t)("Are you sure you want to delete this dashboard?"),onConfirm:r,disabled:a.length<=1,children:(0,L.tZ)(T.ZP,{"data-test-id":"dashboard-delete",priority:"danger",children:(0,y.t)("Delete")})}),(0,L.tZ)(T.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),n()},priority:"primary",children:(0,y.t)("Save and Finish")})]},"edit-controls"):"create"===e?(0,L.BX)(V,{gap:1,children:[h,(0,L.tZ)(T.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),n()},priority:"primary",children:(0,y.t)("Save and Finish")})]},"create-controls"):(0,L.tZ)(V,{gap:1,children:(0,L.tZ)(R,{children:e=>(0,L.BX)(s.Fragment,{children:[(0,L.tZ)(T.ZP,{"data-test-id":"dashboard-edit",onClick:t=>{t.preventDefault(),d()},icon:(0,L.tZ)(B.yl,{size:"xs"}),disabled:!e,priority:t.features.includes("widget-library")?"default":"primary",children:(0,y.t)("Edit Dashboard")}),t.features.includes("widget-library")?(0,L.tZ)(N.Z,{title:(0,y._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:k.ZU}),disabled:!(i>=k.ZU),children:(0,L.tZ)(T.ZP,{"data-test-id":"add-widget-library",priority:"primary",disabled:i>=k.ZU,icon:(0,L.tZ)(B.N_,{isCircled:!0}),onClick:l,children:(0,y.t)("Add Widget")})}):null]})})},"controls")}}q.displayName="Controls";const R=({children:t})=>{const e=(0,y.t)("Requires dashboard editing.");return(0,L.tZ)(C.Z,{hookName:"feature-disabled:dashboards-edit",features:["organizations:dashboards-edit"],renderDisabled:t=>(0,L.tZ)(A.ZP,{body:(0,L.tZ)(I.Z,{features:t.features,hideHelpToggle:!0,message:e,featureName:e}),children:t.children(t)}),children:({hasFeature:e})=>t(e)})};R.displayName="DashboardEditFeature";const V=(0,d.Z)(_.ZP,{target:"e78awt50"})("@media (max-width: ",(t=>t.theme.breakpoints[0]),"){grid-auto-flow:row;grid-row-gap:",(0,D.Z)(1),";width:100%;}"),P=q;var M=a("../node_modules/@dnd-kit/core/dist/core.esm.js"),j=a("../node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),H=a("./app/actionCreators/tags.tsx"),X=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),Y=a("./app/utils/withGlobalSelection.tsx"),O=a("./app/views/dashboardsV2/widget/utils.tsx"),G=a("./app/views/dashboardsV2/addWidget.tsx"),F=a("./app/utils/theme.tsx"),K=a("./app/views/dashboardsV2/issueWidgetCard.tsx"),J=a("./app/views/dashboardsV2/widgetCard.tsx"),Q=a("./app/views/dashboardsV2/widgetWrapper.tsx");const $={zIndex:"auto"};function tt(t){const{widget:e,dragId:a,isEditing:i,onDelete:d,onEdit:o}=t,{attributes:n,listeners:r,setNodeRef:l,transform:h,isDragging:c,isSorting:p}=(0,j.nB)({id:a,transition:null});(0,s.useEffect)((()=>{if(c)return document.body.style.cursor="grabbing",function(){document.body.style.cursor=""}}),[c]);const u={widget:e,isEditing:i,onDelete:d,onEdit:o,isSorting:p,hideToolbar:p,currentWidgetDragging:c,draggableProps:{attributes:n,listeners:r},showContextMenu:!0};return(0,L.tZ)(Q.Z,{ref:l,displayType:e.displayType,layoutId:a,style:{originX:c?1:0,originY:0,boxShadow:c?F.ZP.dropShadowHeavy:"none",borderRadius:c?F.ZP.borderRadius:void 0},animate:h?{x:h.x,y:h.y,scaleX:null!=h&&h.scaleX&&h.scaleX<=1?h.scaleX:1,scaleY:null!=h&&h.scaleY&&h.scaleY<=1?h.scaleY:1,zIndex:c?F.ZP.zIndex.modal:"auto"}:$,transformTemplate:(t,e)=>i&&h?e:"none",transition:{duration:c?0:.25,easings:{type:"spring"}},children:e.widgetType===k.l9.ISSUE?(0,L.tZ)(K.Z,{...u}):(0,L.tZ)(J.Z,{...u})})}tt.displayName="SortableWidget";const et=tt;class at extends s.Component{constructor(...t){super(...t),(0,i.Z)(this,"handleStartAdd",(()=>{const{organization:t,dashboard:e,selection:a,handleAddLibraryWidgets:i}=this.props;(0,X.Z)("dashboards_views.add_widget_modal.opened",{organization:t}),t.features.includes("widget-library")?(0,c.openDashboardWidgetLibraryModal)({organization:t,dashboard:e,onAddWidget:t=>i(t)}):(0,c.openAddDashboardWidgetModal)({organization:t,dashboard:e,selection:a,onAddWidget:this.handleAddComplete,source:k.EN.DASHBOARDS})})),(0,i.Z)(this,"handleOpenWidgetBuilder",(()=>{const{router:t,paramDashboardId:e,organization:a,location:i}=this.props;e?t.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(e,"/widget/new/"),query:{...i.query,dataSet:O.qg.EVENTS}}):t.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/widget/new/"),query:{...i.query,dataSet:O.qg.EVENTS}})})),(0,i.Z)(this,"handleAddComplete",(t=>{this.props.onUpdate([...this.props.dashboard.widgets,t])})),(0,i.Z)(this,"handleUpdateComplete",(t=>e=>{const a=[...this.props.dashboard.widgets];a[t]=e,this.props.onUpdate(a)})),(0,i.Z)(this,"handleDeleteWidget",(t=>()=>{const e=[...this.props.dashboard.widgets];e.splice(t,1),this.props.onUpdate(e)})),(0,i.Z)(this,"handleEditWidget",((t,e)=>()=>{const{organization:a,dashboard:i,selection:d,router:s,location:o,paramDashboardId:n,onSetWidgetToBeUpdated:r}=this.props;if(a.features.includes("metrics")){if(r(t),n)return void s.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(n,"/widget/").concat(e,"/edit/"),query:{...o.query,dataSet:O.qg.EVENTS}});s.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/widget/").concat(e,"/edit/"),query:{...o.query,dataSet:O.qg.EVENTS}})}(0,X.Z)("dashboards_views.edit_widget_modal.opened",{organization:a});const l={organization:a,widget:t,selection:d,onAddWidget:this.handleAddComplete,onUpdateWidget:this.handleUpdateComplete(e)};(0,c.openAddDashboardWidgetModal)({...l,dashboard:i,source:k.EN.DASHBOARDS})}))}async componentDidMount(){const{isEditing:t}=this.props;t&&this.fetchTags(),this.addNewWidget()}async componentDidUpdate(t){const{isEditing:e,newWidget:a}=this.props;t.isEditing!==e&&e&&this.fetchTags(),a!==t.newWidget&&this.addNewWidget()}async addNewWidget(){const{api:t,organization:e,newWidget:a}=this.props;if(a)try{await(0,l.QL)(t,e.slug,a),this.handleAddComplete(a)}catch(t){(0,h.Iw)(t)}}fetchTags(){const{api:t,organization:e,selection:a}=this.props;(0,H.QK)(t,e.slug,a)}getWidgetIds(){return[...this.props.dashboard.widgets.map(((t,e)=>st(t,e))),G.g]}renderWidget(t,e){const{isEditing:a}=this.props,i=st(t,e),d=i;return(0,L.tZ)(et,{widget:t,dragId:d,isEditing:a,onDelete:this.handleDeleteWidget(e),onEdit:this.handleEditWidget(t,e)},i)}render(){const{isEditing:t,onUpdate:e,dashboard:{widgets:a},organization:i}=this.props,d=this.getWidgetIds();return(0,L.tZ)(M.LB,{collisionDetection:M.pE,onDragEnd:({over:t,active:i})=>{const s=i.id,o=d.indexOf.bind(d),n=s?o(s):-1;if(t&&t.id!==G.g){const i=o(t.id);n!==i&&e((0,j.Rp)(a,n,i))}},children:(0,L.tZ)(dt,{children:(0,L.BX)(j.Fo,{items:d,strategy:j.U2,children:[a.map(((t,e)=>this.renderWidget(t,e))),t&&a.length<k.ZU&&(0,L.tZ)(G.Z,{orgFeatures:i.features,onAddWidget:this.handleStartAdd,onOpenWidgetBuilder:this.handleOpenWidgetBuilder})]})})})}}at.displayName="Dashboard";const it=(0,Z.Z)((0,Y.Z)(at)),dt=(0,d.Z)("div",{target:"e1wa3gzn0"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;grid-gap:",(0,D.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(t=>t.theme.breakpoints[3]),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(t=>t.theme.breakpoints[4]),"){grid-template-columns:repeat(8, minmax(0, 1fr));}");function st(t,e){return t.id?"".concat(t.id,"-index-").concat(e):"index-".concat(e)}var ot=a("./app/views/dashboardsV2/data.tsx"),nt=a("./app/components/editableText.tsx");function rt({dashboard:t,isEditing:e,organization:a,onUpdate:i}){return(0,L.tZ)("div",{children:t?(0,L.tZ)(nt.Z,{isDisabled:!e,value:a.features.includes("dashboards-edit")&&"default-overview"===t.id?"Default Dashboard":t.title,onChange:e=>i({...t,title:e}),errorMessage:(0,y.t)("Please set a title for this dashboard")}):(0,y.t)("Dashboards")})}rt.displayName="DashboardTitle";const lt=(0,E.Z)(rt);var ht=a("./app/views/dashboardsV2/utils.tsx");const ct=(0,y.t)("You have unsaved changes, are you sure you want to leave?"),pt=(0,u.Z)({hookName:"component:dashboards-header"});class ut extends s.Component{constructor(...t){super(...t),(0,i.Z)(this,"state",{dashboardState:this.props.initialState,modifiedDashboard:this.updateModifiedDashboard(this.props.initialState),layout:x(this.props.organization.id,this.props.dashboard.id)}),(0,i.Z)(this,"onEdit",(()=>{const{dashboard:t}=this.props;(0,f.ec)({eventKey:"dashboards2.edit.start",eventName:"Dashboards2: Edit start",organization_id:parseInt(this.props.organization.id,10)}),this.setState({dashboardState:k.n3.EDIT,modifiedDashboard:(0,ht.qk)(t)})})),(0,i.Z)(this,"onRouteLeave",(()=>{if(![k.n3.VIEW,k.n3.PENDING_DELETE].includes(this.state.dashboardState))return ct})),(0,i.Z)(this,"onUnload",(t=>{[k.n3.VIEW,k.n3.PENDING_DELETE].includes(this.state.dashboardState)||(t.preventDefault(),t.returnValue=ct)})),(0,i.Z)(this,"onDelete",(t=>()=>{const{api:e,organization:a,location:i}=this.props;if(null==t||!t.id)return;const d=this.state.dashboardState;this.setState({dashboardState:k.n3.PENDING_DELETE},(()=>{(0,l.iM)(e,a.slug,t.id).then((()=>{(0,h.S9)((0,y.t)("Dashboard deleted")),(0,f.ec)({eventKey:"dashboards2.delete",eventName:"Dashboards2: Delete",organization_id:parseInt(this.props.organization.id,10)}),o.browserHistory.replace({pathname:"/organizations/".concat(a.slug,"/dashboards/"),query:i.query})})).catch((()=>{this.setState({dashboardState:d})}))}))})),(0,i.Z)(this,"onCancel",(()=>{const{organization:t,dashboard:e,location:a,params:i}=this.props;if(i.dashboardId)return(0,f.ec)({eventKey:"dashboards2.edit.cancel",eventName:"Dashboards2: Edit cancel",organization_id:parseInt(this.props.organization.id,10)}),void this.setState({dashboardState:k.n3.VIEW,modifiedDashboard:null,layout:x(t.id,e.id)});(0,f.ec)({eventKey:"dashboards2.create.cancel",eventName:"Dashboards2: Create cancel",organization_id:parseInt(this.props.organization.id,10)}),o.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/dashboards/"),query:a.query})})),(0,i.Z)(this,"handleAddLibraryWidgets",(t=>{const{organization:e,dashboard:a,api:i,onDashboardUpdate:d,location:s}=this.props,{dashboardState:n}=this.state,r={...(0,ht.qk)(a),widgets:t.map(v.TE)};this.setState({modifiedDashboard:r}),[k.n3.CREATE,k.n3.EDIT].includes(n)||(0,l.Y)(i,e.slug,r).then((t=>{d&&d(t),(0,h.S9)((0,y.t)("Dashboard updated")),a&&t.id!==a.id&&o.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...s.query}})}),(()=>{}))})),(0,i.Z)(this,"onAddWidget",(()=>{const{organization:t,dashboard:e}=this.props;this.setState({modifiedDashboard:(0,ht.qk)(e)}),(0,c.openDashboardWidgetLibraryModal)({organization:t,dashboard:e,onAddWidget:t=>this.handleAddLibraryWidgets(t)})})),(0,i.Z)(this,"saveLayoutWithNewWidgets",((t,e,a)=>{const{layout:i}=this.state;if(i.length!==a.length)throw new Error("Expected layouts and widgets to be the same length");const d=i.map(((t,e)=>({...t,i:(0,v.Yb)(a[e])})));z(t,e,d),this.setState({layout:d,modifiedDashboard:null})})),(0,i.Z)(this,"onCommit",(()=>{const{api:t,organization:e,location:a,dashboard:i,onDashboardUpdate:d}=this.props,{layout:s,modifiedDashboard:n,dashboardState:c}=this.state;switch(c){case k.n3.CREATE:n&&(0,l.JR)(t,e.slug,n).then((t=>{e.features.includes("dashboard-grid-layout")&&this.saveLayoutWithNewWidgets(e.id,t.id,t.widgets),(0,h.S9)((0,y.t)("Dashboard created")),(0,f.ec)({eventKey:"dashboards2.create.complete",eventName:"Dashboards2: Create complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:k.n3.VIEW,modifiedDashboard:null}),o.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...a.query}})}),(()=>{}));break;case k.n3.EDIT:if(e.features.includes("dashboard-grid-layout")&&z(e.id,i.id,s),n)return r()(i,n)?void this.setState({dashboardState:k.n3.VIEW,modifiedDashboard:null}):void(0,l.Y)(t,e.slug,n).then((t=>{d&&d(t),e.features.includes("dashboard-grid-layout")&&this.saveLayoutWithNewWidgets(e.id,t.id,t.widgets),(0,h.S9)((0,y.t)("Dashboard updated")),(0,f.ec)({eventKey:"dashboards2.edit.complete",eventName:"Dashboards2: Edit complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:k.n3.VIEW,modifiedDashboard:null}),i&&t.id!==i.id&&o.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...a.query}})}),(()=>{}));this.setState({dashboardState:k.n3.VIEW,modifiedDashboard:null});break;case k.n3.VIEW:default:this.setState({dashboardState:k.n3.VIEW,modifiedDashboard:null})}})),(0,i.Z)(this,"setModifiedDashboard",(t=>{this.setState({modifiedDashboard:t})})),(0,i.Z)(this,"onSetWidgetToBeUpdated",(t=>{this.setState({widgetToBeUpdated:t})})),(0,i.Z)(this,"onLayoutChange",(t=>{this.setState({layout:t})})),(0,i.Z)(this,"onUpdateWidget",(t=>{const{modifiedDashboard:e}=this.state;null!==e&&this.setState((e=>({...e,widgetToBeUpdated:void 0,modifiedDashboard:{...e.modifiedDashboard,widgets:t}})),this.updateRouteAfterSavingWidget)}))}componentDidMount(){const{route:t,router:e}=this.props;this.checkStateRoute(),e.setRouteLeaveHook(t,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload)}componentDidUpdate(t){t.location.pathname!==this.props.location.pathname&&this.checkStateRoute()}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}checkStateRoute(){const{router:t,organization:e,params:a}=this.props,{dashboardId:i}=a,d="/organizations/".concat(e.slug,"/dashboard/").concat(i,"/");this.isWidgetBuilderRouter&&!this.isEditing&&t.replace(d),location.pathname===d&&this.state.widgetToBeUpdated&&this.onSetWidgetToBeUpdated(void 0)}updateRouteAfterSavingWidget(){if(this.isWidgetBuilderRouter){const{router:t,organization:e,params:a}=this.props,{dashboardId:i}=a;if(i)return void t.replace("/organizations/".concat(e.slug,"/dashboard/").concat(i,"/"));t.replace("/organizations/".concat(e.slug,"/dashboards/new/"))}}updateModifiedDashboard(t){const{dashboard:e}=this.props;switch(t){case k.n3.CREATE:return(0,ht.qk)(ot.R7);case k.n3.EDIT:return(0,ht.qk)(e);default:return null}}get isEditing(){const{dashboardState:t}=this.state;return[k.n3.EDIT,k.n3.CREATE,k.n3.PENDING_DELETE].includes(t)}get isWidgetBuilderRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:i}=e;return["/organizations/".concat(a.slug,"/dashboards/new/widget/new/"),"/organizations/".concat(a.slug,"/dashboard/").concat(i,"/widget/new/")].includes(t.pathname)||this.isWidgetBuilderEditRouter}get isWidgetBuilderEditRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:i,widgetId:d}=e;return["/organizations/".concat(a.slug,"/dashboards/new/widget/").concat(d,"/edit/"),"/organizations/".concat(a.slug,"/dashboard/").concat(i,"/widget/").concat(d,"/edit/")].includes(t.pathname)}get dashboardTitle(){const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;return e?e.title:t.title}renderWidgetBuilder(t){const{children:e}=this.props,{modifiedDashboard:a,widgetToBeUpdated:i}=this.state;return(0,s.isValidElement)(e)?(0,s.cloneElement)(e,{dashboard:null!=a?a:t,onSave:this.onUpdateWidget,widget:i}):e}renderDefaultDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:i,router:d,location:s}=this.props,{layout:o,modifiedDashboard:n,dashboardState:r}=this.state,{dashboardId:l}=i,h={paramDashboardId:l,dashboard:null!=n?n:e,organization:t,isEditing:this.isEditing,onUpdate:this.onUpdateWidget,onSetWidgetToBeUpdated:this.onSetWidgetToBeUpdated,handleAddLibraryWidgets:this.handleAddLibraryWidgets,router:d,location:s};return(0,L.tZ)(m.Z,{skipLoadLastUsed:t.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:ot.GY}},children:(0,L.tZ)(w.JH,{children:(0,L.BX)(b.Z,{organization:t,children:[(0,L.BX)(gt,{children:[(0,L.tZ)(lt,{dashboard:null!=n?n:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing}),(0,L.tZ)(P,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(e),dashboardState:r,widgetCount:e.widgets.length})]}),(0,L.tZ)(pt,{organization:t}),t.features.includes("dashboard-grid-layout")?(0,L.tZ)(v.ZP,{...h,layout:o,onLayoutChange:this.onLayoutChange}):(0,L.tZ)(it,{...h})]})})})}renderDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:i,router:d,location:s,newWidget:o}=this.props,{layout:n,modifiedDashboard:r,dashboardState:l}=this.state,{dashboardId:h}=i,c={paramDashboardId:h,dashboard:null!=r?r:e,organization:t,isEditing:this.isEditing,onUpdate:this.onUpdateWidget,handleAddLibraryWidgets:this.handleAddLibraryWidgets,onSetWidgetToBeUpdated:this.onSetWidgetToBeUpdated,router:d,location:s,newWidget:o};return(0,L.tZ)(m.Z,{skipLoadLastUsed:t.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:ot.GY}},children:(0,L.tZ)(bt,{children:(0,L.BX)(b.Z,{organization:t,children:[(0,L.BX)(g.h4,{children:[(0,L.BX)(g.oB,{children:[(0,L.tZ)(p.Z,{crumbs:[{label:(0,y.t)("Dashboards"),to:"/organizations/".concat(t.slug,"/dashboards/")},{label:l===k.n3.CREATE?(0,y.t)("Create Dashboard"):t.features.includes("dashboards-edit")&&"default-overview"===e.id?"Default Dashboard":this.dashboardTitle}]}),(0,L.tZ)(g.Dx,{children:(0,L.tZ)(lt,{dashboard:null!=r?r:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})})]}),(0,L.tZ)(g.kP,{children:(0,L.tZ)(P,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(e),dashboardState:l,widgetCount:e.widgets.length})})]}),(0,L.tZ)(g.uT,{children:(0,L.tZ)(g.or,{fullWidth:!0,children:t.features.includes("dashboard-grid-layout")?(0,L.tZ)(v.ZP,{...c,layout:n,onLayoutChange:this.onLayoutChange}):(0,L.tZ)(it,{...c})})})]})})})}render(){const{organization:t,dashboard:e}=this.props;return this.isEditing&&this.isWidgetBuilderRouter?this.renderWidgetBuilder(e):t.features.includes("dashboards-edit")?this.renderDashboardDetail():this.renderDefaultDashboardDetail()}}ut.displayName="DashboardDetail";const gt=(0,d.Z)("div",{target:"e1anno2f1"})("display:grid;grid-template-columns:minmax(0, 1fr);grid-row-gap:",(0,D.Z)(2),";align-items:center;font-size:",(t=>t.theme.headerFontSize),";color:",(t=>t.theme.textColor),";margin-bottom:",(0,D.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:minmax(0, 1fr) max-content;grid-column-gap:",(0,D.Z)(2),";height:40px;}"),bt=(0,d.Z)(w.JH,{target:"e1anno2f0"})({name:"1hcx8jb",styles:"padding:0"}),mt=(0,Z.Z)((0,E.Z)(ut))}}]);
//# sourceMappingURL=../sourcemaps/node_modules_dnd-kit_accessibility_dist_accessibility_esm_js-app_views_dashboardsV2_detail_tsx.d499a406df25764423e7cd6c1390a99d.js.map