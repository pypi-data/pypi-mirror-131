"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_views_performance_transactionSummary_pageLayout_tsx"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>k});var s,r=n("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/react/index.js")),i=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=n("../node_modules/lodash/assign.js"),c=n.n(l),p=n("../node_modules/lodash/flatten.js"),d=n.n(p),u=n("../node_modules/lodash/isEqual.js"),m=n.n(u),h=n("../node_modules/lodash/memoize.js"),g=n.n(h),v=n("../node_modules/lodash/omit.js"),y=n.n(v),f=n("./app/actionCreators/tags.tsx"),x=n("./app/components/smartSearchBar/index.tsx"),b=n("./app/constants/index.tsx"),Z=n("./app/types/index.tsx"),T=n("./app/utils.tsx"),j=n("./app/utils/discover/fields.tsx"),S=n("./app/utils/measurements/measurements.tsx"),w=n("./app/utils/withApi.tsx"),_=n("./app/utils/withTags.tsx"),E=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const C=new RegExp("^".concat(b.c$,"|\\").concat(b.ir),"g");class P extends a.PureComponent{constructor(...e){super(...e),(0,o.Z)(this,"getEventFieldValues",g()(((e,t,n)=>{const{api:s,organization:r,projectIds:o}=this.props,a=null==o?void 0:o.map(String);return(0,j.h1)(e.key)||(0,j.Xr)(e.key)?Promise.resolve([]):(0,f.Fo)(s,r.slug,e.key,t,a,n,!0).then((e=>d()(e.filter((({name:e})=>(0,T.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,o.Z)(this,"prepareQuery",(e=>e.replace(C,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,n;m()(this.props.projectIds,e.projectIds)||null===(t=(n=this.getEventFieldValues.cache).clear)||void 0===t||t.call(n)}getTagList(e){const{fields:t,organization:n,tags:s,omitTags:r}=this.props,o=t?Object.fromEntries(t.filter((e=>!Object.keys(j.wZ).includes(e.field)&&!(0,j.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},a=n.features.includes("performance-view")?Object.assign({},e,j.wZ,o):y()(j.wZ,j.J8),i=n.features.includes("semver")?Object.assign({},j.jg,a):a,l=c()({},s,i);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},y()(l,null!=r?r:[])}render(){const{organization:e}=this.props;return(0,E.tZ)(S.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,E.tZ)(i.ms,{children:({css:e})=>(0,E.tZ)(x.Z,{hasRecentSearches:!0,savedSearchType:Z.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(s||(s=(0,r.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "]))),...this.props})})}})}}P.displayName="SearchBar";const k=(0,w.Z)((0,_.Z)(P))},"./app/utils/measurements/measurements.tsx":(e,t,n)=>{n.d(t,{Z:()=>p}),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=n("../node_modules/react/index.js"),r=n("./app/utils/performance/vitals/constants.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const i=a(r.T),l=a(r.r);function c({organization:e,children:t}){const n=e.features.includes("performance-mobile-vitals")?{...l,...i}:l;return(0,o.tZ)(s.Fragment,{children:t({measurements:n})})}c.displayName="Measurements";const p=c},"./app/utils/withTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),o=n("./app/stores/tagStore.tsx"),a=n("./app/utils/getDisplayName.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends r.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{tags:o.Z.getAllTags()}),(0,s.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...n})}}return t.displayName="WithTags",(0,s.Z)(t,"displayName","withTags(".concat((0,a.Z)(e),")")),t}},"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{n.d(t,{Z:()=>v});var s=n("../node_modules/react/index.js"),r=n("./app/components/breadcrumbs.tsx"),o=n("./app/locale.tsx"),a=n("./app/utils/queryString.tsx"),i=n("./app/views/performance/transactionSummary/tabs.tsx"),l=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),p=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),d=n("./app/views/performance/transactionSummary/utils.tsx"),u=n("./app/views/performance/vitalDetail/utils.tsx"),m=n("./app/views/performance/utils.tsx"),h=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends s.Component{getCrumbs(){const e=[],{organization:t,location:n,transaction:s,vitalName:r,eventSlug:h,traceSlug:g,transactionComparison:v,tab:y}=this.props,f={pathname:(0,m.de)(t),query:{...n.query,transaction:void 0}};if(e.push({to:f,label:(0,o.t)("Performance"),preserveGlobalSelection:!0}),r){const s=(0,u.i4)({orgSlug:t.slug,vitalName:"fcp",projectID:(0,a.ro)(n.query.project),query:n.query});e.push({to:s,label:(0,o.t)("Vital Detail"),preserveGlobalSelection:!0})}else if(s){const r={orgSlug:t.slug,transaction:s.name,projectID:s.project,query:n.query};switch(y){case i.Z.Tags:{const t=(0,c.vG)(r);e.push({to:t,label:(0,o.t)("Tags"),preserveGlobalSelection:!0});break}case i.Z.Events:{const t=(0,l.xr)(r);e.push({to:t,label:(0,o.t)("All Events"),preserveGlobalSelection:!0});break}case i.Z.WebVitals:{const t=(0,p.Pl)(r);e.push({to:t,label:(0,o.t)("Web Vitals"),preserveGlobalSelection:!0});break}case i.Z.TransactionSummary:default:{const t=(0,d.e1)(r);e.push({to:t,label:(0,o.t)("Transaction Summary"),preserveGlobalSelection:!0})}}}return s&&h?e.push({to:"",label:(0,o.t)("Event Details")}):v?e.push({to:"",label:(0,o.t)("Compare to Baseline")}):g&&e.push({to:"",label:(0,o.t)("Trace View")}),e}render(){return(0,h.tZ)(r.Z,{crumbs:this.getCrumbs()})}}g.displayName="Breadcrumb";const v=g},"./app/views/performance/transactionSummary/pageLayout.tsx":(e,t,n)=>{n.d(t,{Z:()=>ye});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),o=n("../node_modules/react-router/es/index.js"),a=n("./app/components/acl/feature.tsx"),i=n("./app/components/alert.tsx"),l=n("./app/components/globalSdkUpdateAlert.tsx"),c=n("./app/components/layouts/thirds.tsx"),p=n("./app/components/noProjectMessage.tsx"),d=n("./app/components/organizations/globalSelectionHeader/index.tsx"),u=n("./app/components/sentryDocumentTitle.tsx"),m=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),g=n("./app/styles/organization.tsx"),v=n("./app/utils.tsx"),y=n("./app/utils/performance/contexts/performanceEventViewContext.tsx"),f=n("./app/utils/queryString.tsx"),x=n("./app/views/performance/utils.tsx"),b=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),Z=n("./app/components/assistant/guideAnchor.tsx"),T=n("./app/components/buttonBar.tsx"),j=n("./app/components/createAlertButton.tsx"),S=n("./app/components/featureBadge.tsx"),w=n("./app/components/links/listLink.tsx"),_=n("./app/components/navTabs.tsx"),E=n("./app/utils/analytics.tsx"),C=n("../node_modules/lodash/omit.js"),P=n.n(C),k=n("../node_modules/lodash/pick.js"),N=n.n(k),V=n("./app/utils/discover/genericDiscoverQuery.tsx"),I=n("./app/utils/tokenizeSearch.tsx"),q=n("./app/utils/withApi.tsx"),A=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function z(e){const{eventView:t,location:n,transaction:s,type:r}=e,o=(0,v.d9)((0,I.Bn)(s)),a={transaction:'"'.concat(o,'"'),type:r},i=N()(t.getEventsAPIPayload(n),["project","environment"]);return Object.assign(a,i)}function M(e){return(0,A.tZ)(V.ZP,{route:"events-has-measurements",getRequestPayload:z,...P()(e,"children"),children:({tableData:t,...n})=>{var s;return e.children({hasMeasurements:null!==(s=null==t?void 0:t.measurements)&&void 0!==s?s:null,...n})}})}M.displayName="HasMeasurementsQuery";const B=(0,q.Z)(M);var D=n("./app/views/performance/breadcrumb.tsx"),O=n("./app/views/performance/landing/utils.tsx"),L=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),U=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),X=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),K=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),G=n("./app/views/performance/transactionSummary/tabs.tsx"),F=n("./app/components/button.tsx"),W=n("./app/components/performance/teamKeyTransaction.tsx"),R=n("./app/components/performance/teamKeyTransactionsManager.tsx"),Q=n("./app/components/tooltip.tsx"),H=n("./app/utils/useTeams.tsx"),J=n("./app/utils/withProjects.tsx");class Y extends r.Component{render(){var e;const{isOpen:t,keyedTeams:n,...s}=this.props,r=null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0,o=(0,A.tZ)(F.ZP,{...s,icon:r?(0,A.tZ)(m.GK,{color:"yellow300",isSolid:!0}):(0,A.tZ)(m.GK,{}),children:r?(0,h.tn)("Starred for Team","Starred for Teams",r):(0,h.t)("Star for Team")});if(!t&&null!=n&&n.length){const e=n.map((({slug:e})=>e)).join(", ");return(0,A.tZ)(Q.Z,{title:e,children:o})}return o}}function $({counts:e,getKeyedTeams:t,project:n,transactionName:s,...r}){const o=t(n.id,s);return(0,A.tZ)(W.Z,{counts:e,keyedTeams:o,title:Y,project:n,transactionName:s,...r})}function ee({eventView:e,organization:t,projects:n,...s}){const{teams:r,initiallyLoaded:o}=(0,H.Z)({provideUserTeams:!0});if(1!==e.project.length)return(0,A.tZ)(Y,{isOpen:!1,disabled:!0,keyedTeams:null});const a=String(e.project[0]),i=n.find((e=>e.id===a));return(0,v.ri)(i)?(0,A.tZ)(R.z,{organization:t,teams:r,selectedTeams:["myteams"],selectedProjects:[String(a)],children:(0,A.tZ)(R.$,{children:({isLoading:e,...n})=>(0,A.tZ)($,{organization:t,project:i,isLoading:e||!o,...s,...n})})}):(0,A.tZ)(Y,{isOpen:!1,disabled:!0,keyedTeams:null})}Y.displayName="TitleButton",$.displayName="TeamKeyTransactionButton",ee.displayName="TeamKeyTransactionButtonWrapper";const te=(0,J.Z)(ee);var ne=n("./app/actionCreators/indicator.tsx"),se=n("./app/actionCreators/modal.tsx"),re=n("./app/views/performance/transactionSummary/transactionThresholdModal.tsx");class oe extends r.Component{constructor(...e){super(...e),(0,b.Z)(this,"state",{transactionThreshold:void 0,transactionThresholdMetric:void 0,loadingThreshold:!1}),(0,b.Z)(this,"fetchTransactionThreshold",(()=>{const{api:e,organization:t,transactionName:n}=this.props,s=this.getProject();if(!(0,v.ri)(s))return;const r="/organizations/".concat(t.slug,"/project-transaction-threshold-override/");this.setState({loadingThreshold:!0}),e.requestPromise(r,{method:"GET",includeAllArgs:!0,query:{project:s.id,transaction:n}}).then((([e])=>{this.setState({loadingThreshold:!1,transactionThreshold:e.threshold,transactionThresholdMetric:e.metric})})).catch((()=>{const e="/projects/".concat(t.slug,"/").concat(s.slug,"/transaction-threshold/configure/");this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:s.id}}).then((([e])=>{this.setState({loadingThreshold:!1,transactionThreshold:e.threshold,transactionThresholdMetric:e.metric})})).catch((e=>{var t,n;this.setState({loadingThreshold:!1});const s=null!==(t=null===(n=e.responseJSON)||void 0===n?void 0:n.threshold)&&void 0!==t?t:null;(0,ne.Iw)(s)}))}))}))}componentDidMount(){this.fetchTransactionThreshold()}getProject(){const{projects:e,eventView:t}=this.props;if(!(0,v.ri)(t))return;const n=String(t.project[0]);return e.find((e=>e.id===n))}onChangeThreshold(e,t){const{onChangeThreshold:n}=this.props;this.setState({transactionThreshold:e,transactionThresholdMetric:t}),(0,v.ri)(n)&&n(e,t)}openModal(){const{organization:e,transactionName:t,eventView:n}=this.props,{transactionThreshold:s,transactionThresholdMetric:r}=this.state;(0,se.openModal)((o=>(0,A.tZ)(re.ZP,{...o,organization:e,transactionName:t,eventView:n,transactionThreshold:s,transactionThresholdMetric:r,onApply:(e,t)=>this.onChangeThreshold(e,t)})),{modalCss:re.fY,backdrop:"static"})}render(){const{loadingThreshold:e}=this.state;return(0,A.tZ)(F.ZP,{onClick:()=>this.openModal(),icon:(0,A.tZ)(m.iC,{}),disabled:e,"aria-label":(0,h.t)("Settings"),"data-test-id":"set-transaction-threshold"})}}oe.displayName="TransactionThresholdButton";const ae=(0,q.Z)((0,J.Z)(oe));var ie=n("./app/views/performance/transactionSummary/utils.tsx");const le={[G.Z.WebVitals]:{eventKey:"performance_views.vitals.vitals_tab_clicked",eventName:"Performance Views: Vitals tab clicked"},[G.Z.Tags]:{eventKey:"performance_views.tags.tags_tab_clicked",eventName:"Performance Views: Tags tab clicked"},[G.Z.Events]:{eventKey:"performance_views.events.events_tab_clicked",eventName:"Performance Views: Events tab clicked"},[G.Z.Spans]:{eventKey:"performance_views.spans.spans_tab_clicked",eventName:"Performance Views: Spans tab clicked"}};class ce extends r.Component{constructor(...e){super(...e),(0,b.Z)(this,"trackTabClick",(e=>()=>{const t=le[e];t&&(0,E.ec)({...t,organization_id:this.props.organization.id})})),(0,b.Z)(this,"handleIncompatibleQuery",((e,t)=>{var n,s;this.trackAlertClick(t),null===(n=(s=this.props).handleIncompatibleQuery)||void 0===n||n.call(s,e,t)})),(0,b.Z)(this,"handleCreateAlertSuccess",(()=>{this.trackAlertClick()}))}trackAlertClick(e){const{organization:t}=this.props;(0,E.ec)({eventKey:"performance_views.summary.create_alert_clicked",eventName:"Performance Views: Create alert clicked",organization_id:t.id,status:e?"error":"success",errors:e,url:window.location.href})}renderCreateAlertButton(){const{eventView:e,organization:t,projects:n}=this.props;return(0,A.tZ)(j.K,{eventView:e,organization:t,projects:n,onIncompatibleQuery:this.handleIncompatibleQuery,onSuccess:this.handleCreateAlertSuccess,referrer:"performance"})}renderKeyTransactionButton(){const{eventView:e,organization:t,transactionName:n}=this.props;return(0,A.tZ)(te,{transactionName:n,eventView:e,organization:t})}renderSettingsButton(){const{organization:e,transactionName:t,eventView:n,onChangeThreshold:s}=this.props;return(0,A.tZ)(Z.n,{target:"project_transaction_threshold_override",position:"bottom",children:(0,A.tZ)(ae,{organization:e,transactionName:t,eventView:n,onChangeThreshold:s})})}renderWebVitalsTab(){const{organization:e,eventView:t,location:n,projects:s,transactionName:r,currentTab:o,hasWebVitals:a}=this.props,i=(0,K.Pl)({orgSlug:e.slug,transaction:r,projectID:(0,f.ro)(n.query.project),query:n.query}),l=(0,A.tZ)(w.Z,{"data-test-id":"web-vitals-tab",to:i,isActive:()=>o===G.Z.WebVitals,onClick:this.trackTabClick(G.Z.WebVitals),children:(0,h.t)("Web Vitals")});switch(a){case"maybe":return(0,O.Q_)(n,s,t).field===O.BY.FRONTEND_PAGELOAD?l:(0,A.tZ)(B,{location:n,orgSlug:e.slug,eventView:t,transaction:r,type:"web",children:({hasMeasurements:e})=>e?l:null});case"yes":return l;case"no":default:return null}}render(){const{organization:e,location:t,projectId:n,transactionName:s,currentTab:o}=this.props,i={orgSlug:e.slug,transaction:s,projectID:n,query:t.query},l=(0,ie.e1)(i),p=(0,X.vG)(i),d=(0,L.xr)(i),u=(0,U.hN)(i);return(0,A.BX)(c.h4,{children:[(0,A.BX)(c.oB,{children:[(0,A.tZ)(D.Z,{organization:e,location:t,transaction:{project:n,name:s},tab:o}),(0,A.tZ)(c.Dx,{children:s})]}),(0,A.tZ)(c.kP,{children:(0,A.BX)(T.ZP,{gap:1,children:[(0,A.tZ)(a.Z,{organization:e,features:["incidents"],children:({hasFeature:e})=>e&&this.renderCreateAlertButton()}),this.renderKeyTransactionButton(),this.renderSettingsButton()]})}),(0,A.tZ)(r.Fragment,{children:(0,A.BX)(pe,{children:[(0,A.tZ)(w.Z,{to:l,isActive:()=>o===G.Z.TransactionSummary,children:(0,h.t)("Overview")}),this.renderWebVitalsTab(),(0,A.tZ)(w.Z,{to:p,isActive:()=>o===G.Z.Tags,onClick:this.trackTabClick(G.Z.Tags),children:(0,h.t)("Tags")}),(0,A.tZ)(a.Z,{features:["organizations:performance-events-page"],children:(0,A.tZ)(w.Z,{to:d,isActive:()=>o===G.Z.Events,onClick:this.trackTabClick(G.Z.Events),children:(0,h.t)("All Events")})}),(0,A.tZ)(a.Z,{organization:e,features:["organizations:performance-suspect-spans-view"],children:(0,A.BX)(w.Z,{"data-test-id":"spans-tab",to:u,isActive:()=>o===G.Z.Spans,onClick:this.trackTabClick(G.Z.Spans),children:[(0,h.t)("Spans"),(0,A.tZ)(S.Z,{type:"alpha",noTooltip:!0})]})})]})})]})}}ce.displayName="TransactionHeader";const pe=(0,s.Z)(_.Z,{target:"ega7at50"})({name:"13jhhqe",styles:"margin-bottom:0;width:100%"}),de=ce;function ue(e){const{location:t,organization:n,projects:s,tab:i,getDocumentTitle:l,generateEventView:g,childComponent:b,relativeDateOptions:Z,maxPickableDays:T,features:j=[]}=e,S=(0,f.ro)(t.query.project),w=(0,x.JY)(t);if(!(0,v.ri)(S)||!(0,v.ri)(w))return o.browserHistory.replace({pathname:"/organizations/".concat(n.slug,"/performance/"),query:{...t.query}}),null;const _=s.find((e=>e.id===S)),[E,C]=(0,r.useState)(),[P,k]=(0,r.useState)(null),[N,V]=(0,r.useState)(),[I,q]=(0,r.useState)(),z=g(t,w);return(0,A.tZ)(u.Z,{title:l(w),orgSlug:n.slug,projectSlug:null==_?void 0:_.slug,children:(0,A.tZ)(a.Z,{features:["performance-view",...j],organization:n,renderDisabled:me,children:(0,A.tZ)(y.bq,{value:{eventView:z},children:(0,A.tZ)(d.Z,{lockedMessageSubject:(0,h.t)("transaction"),shouldForceProject:(0,v.ri)(_),forceProject:_,specificProjectSlugs:(0,v.ri)(_)?[_.slug]:[],disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,relativeDateOptions:Z,maxPickableDays:T,children:(0,A.tZ)(he,{children:(0,A.BX)(p.Z,{organization:n,children:[(0,A.tZ)(de,{eventView:z,location:t,organization:n,projects:s,projectId:S,transactionName:w,currentTab:i,hasWebVitals:i===G.Z.WebVitals?"yes":"maybe",handleIncompatibleQuery:(e,t)=>{const n=e((()=>k(null)));k(n)},onChangeThreshold:(e,t)=>{V(e),q(t)}}),(0,A.BX)(c.uT,{children:[(0,A.tZ)(ge,{}),(0,v.ri)(E)&&(0,A.tZ)(ve,{type:"error",icon:(0,A.tZ)(m.Gy,{size:"md"}),children:E}),P&&(0,A.tZ)(c.or,{fullWidth:!0,children:P}),(0,A.tZ)(b,{location:t,organization:n,projects:s,eventView:z,projectId:S,transactionName:w,setError:C,transactionThreshold:N,transactionThresholdMetric:I})]})]})})})})})})}function me(){return(0,A.tZ)(i.Z,{type:"warning",children:(0,h.t)("You don't have access to this feature")})}ue.displayName="PageLayout",me.displayName="NoAccess";const he=(0,s.Z)(g.JH,{target:"e1ehad6a2"})({name:"1hcx8jb",styles:"padding:0"}),ge=(0,s.Z)(l.Z,{target:"e1ehad6a1"})("@media (min-width: ",(e=>e.theme.breakpoints[1]),"){margin-bottom:0;}");ge.defaultProps={Wrapper:e=>(0,A.tZ)(c.or,{fullWidth:!0,...e})};const ve=(0,s.Z)(i.Z,{target:"e1ehad6a0"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"}),ye=ue},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,n)=>{var s;n.d(t,{Z:()=>r}),function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.WebVitals=1]="WebVitals",e[e.Tags=2]="Tags",e[e.Events=3]="Events",e[e.Spans=4]="Spans"}(s||(s={}));const r=s},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,n)=>{let s,r;n.d(t,{p:()=>s,g:()=>r}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(s||(s={})),function(e){e.COUNT="count",e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(r||(r={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,n)=>{n.d(t,{hN:()=>a,E5:()=>i,TK:()=>p,KK:()=>d});var s=n("./app/locale.tsx"),r=n("./app/utils/queryString.tsx"),o=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function a({orgSlug:e,transaction:t,projectID:n,query:s}){return{pathname:function({orgSlug:e}){return"/organizations/".concat(e,"/performance/summary/spans/")}({orgSlug:e}),query:{transaction:t,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}const i=[{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Total Exclusive Time"),field:o.g.SUM_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Average Count"),field:o.g.AVG_OCCURRENCE},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Total Count"),field:o.g.COUNT},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p50 Exclusive Time"),field:o.p.P50_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p75 Exclusive Time"),field:o.p.P75_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p95 Exclusive Time"),field:o.p.P95_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p99 Exclusive Time"),field:o.p.P99_EXCLUSIVE_TIME}],l=o.g.SUM_EXCLUSIVE_TIME;function c(e){return i.find((t=>t.field===e))||i.find((e=>e.field===l))}function p(e,t="sort"){var n,s;return c(null!==(n=(0,r.ro)(null==e||null===(s=e.query)||void 0===s?void 0:s[t]))&&void 0!==n?n:l)}function d(e){return c(e.sorts.length?e.sorts[0].field:l)}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,n)=>{n.d(t,{Zn:()=>o,bZ:()=>a,vG:()=>i,oc:()=>l,oT:()=>c});var s=n("./app/utils/analytics.tsx"),r=n("./app/utils/queryString.tsx");function o(e){return(0,r.ro)(e.query.tagKey)}function a(e){(0,s.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function i({orgSlug:e,transaction:t,projectID:n,query:s}){return{pathname:function({orgSlug:e}){return"/organizations/".concat(e,"/performance/summary/tags/")}({orgSlug:e}),query:{transaction:t,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query,tagKey:s.tagKey}}}function l(e){var t,n;let s=null!==(t=(0,r.ro)(null===(n=e.query)||void 0===n?void 0:n.tagSort))&&void 0!==t?t:"-frequency";return["sumdelta"].find((e=>{var t;return null===(t=s)||void 0===t?void 0:t.includes(e)}))&&(s="-frequency"),s}function c(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const n=t.split("_");return{histogramField:t,bucketSize:parseInt(n[n.length-3],10),offset:parseInt(n[n.length-2],10),multiplier:parseInt(n[n.length-1],10)}}},"./app/views/performance/transactionSummary/transactionThresholdModal.tsx":(e,t,n)=>{n.d(t,{fY:()=>C,ZP:()=>P});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),a=n("../node_modules/lodash/cloneDeep.js"),i=n.n(a),l=n("../node_modules/lodash/set.js"),c=n.n(l),p=n("./app/actionCreators/indicator.tsx"),d=n("./app/components/button.tsx"),u=n("./app/components/buttonBar.tsx"),m=n("./app/components/forms/selectControl.tsx"),h=n("./app/components/links/link.tsx"),g=n("./app/locale.tsx"),v=n("./app/styles/space.tsx"),y=n("./app/utils.tsx"),f=n("./app/utils/withApi.tsx"),x=n("./app/utils/withProjects.tsx"),b=n("./app/views/settings/components/forms/controls/input.tsx"),Z=n("./app/views/settings/components/forms/field/index.tsx"),T=n("./app/views/performance/transactionSummary/utils.tsx"),j=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let S;!function(e){e.TRANSACTION_DURATION="duration",e.LARGEST_CONTENTFUL_PAINT="lcp"}(S||(S={}));const w=[{label:(0,g.t)("Transaction Duration"),value:"duration"},{label:(0,g.t)("Largest Contentful Paint"),value:"lcp"}];class _ extends o.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{threshold:this.props.transactionThreshold,metric:this.props.transactionThresholdMetric,error:null}),(0,s.Z)(this,"handleApply",(async e=>{e.preventDefault();const{api:t,closeModal:n,organization:s,transactionName:r,onApply:o}=this.props,a=this.getProject();if(!(0,y.ri)(a))return;const i="/organizations/".concat(s.slug,"/project-transaction-threshold-override/");t.requestPromise(i,{method:"POST",includeAllArgs:!0,query:{project:a.id},data:{transaction:r,threshold:this.state.threshold,metric:this.state.metric}}).then((()=>{n(),o&&o(this.state.threshold,this.state.metric)})).catch((e=>{var t,n,s,r;this.setState({error:e});const o=null!==(t=null!==(n=null===(s=e.responseJSON)||void 0===s?void 0:s.threshold)&&void 0!==n?n:null===(r=e.responseJSON)||void 0===r?void 0:r.non_field_errors)&&void 0!==t?t:null;(0,p.Iw)(o)}))})),(0,s.Z)(this,"handleFieldChange",(e=>t=>{this.setState((n=>{const s=i()(n);return c()(s,e,t),{...s,errors:void 0}}))})),(0,s.Z)(this,"handleReset",(async e=>{e.preventDefault();const{api:t,closeModal:n,organization:s,transactionName:r,onApply:o}=this.props,a=this.getProject();if(!(0,y.ri)(a))return;const i="/organizations/".concat(s.slug,"/project-transaction-threshold-override/");t.requestPromise(i,{method:"DELETE",includeAllArgs:!0,query:{project:a.id},data:{transaction:r}}).then((()=>{const e="/projects/".concat(s.slug,"/").concat(a.slug,"/transaction-threshold/configure/");this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:a.id}}).then((([e])=>{this.setState({threshold:e.threshold,metric:e.metric}),n(),o&&o(this.state.threshold,this.state.metric)})).catch((e=>{var t,n;const s=null!==(t=null===(n=e.responseJSON)||void 0===n?void 0:n.threshold)&&void 0!==t?t:null;(0,p.Iw)(s)}))})).catch((e=>{this.setState({error:e})}))}))}getProject(){const{projects:e,eventView:t,project:n}=this.props;if((0,y.ri)(n))return e.find((e=>e.id===n));const s=String(t.project[0]);return e.find((e=>e.id===s))}renderModalFields(){return(0,j.BX)(o.Fragment,{children:[(0,j.tZ)(Z.Z,{"data-test-id":"response-metric",label:(0,g.t)("Calculation Method"),inline:!1,help:(0,g.t)("This determines which duration metric is used for the Response Time Threshold."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,j.tZ)(m.Z,{required:!0,options:w.slice(),name:"responseMetric",label:(0,g.t)("Calculation Method"),value:this.state.metric,onChange:e=>{this.handleFieldChange("metric")(e.value)}})}),(0,j.tZ)(Z.Z,{"data-test-id":"response-time-threshold",label:(0,g.t)("Response Time Threshold (ms)"),inline:!1,help:(0,g.t)("The satisfactory response time for the calculation method defined above. This is used to calculate Apdex and User Misery scores."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,j.tZ)(b.Z,{type:"number",name:"threshold",required:!0,pattern:"[0-9]*(\\.[0-9]*)?",onChange:e=>{this.handleFieldChange("threshold")(e.target.value)},value:this.state.threshold,step:100,min:100})})]})}render(){const{Header:e,Body:t,Footer:n,organization:s,transactionName:r,eventView:a}=this.props,i=this.getProject(),l=a.clone();l.query=l.getQueryWithAdditionalConditions();const c=(0,T.e1)({orgSlug:s.slug,transaction:r,query:l.generateQueryStringObject(),projectID:null==i?void 0:i.id});return(0,j.BX)(o.Fragment,{children:[(0,j.tZ)(e,{closeButton:!0,children:(0,j.tZ)("h4",{children:(0,g.t)("Transaction Settings")})}),(0,j.BX)(t,{children:[(0,j.tZ)(E,{children:(0,g._N)("The changes below will only be applied to [transaction]. To set it at a more global level, go to [projectSettings: Project Settings].",{transaction:(0,j.tZ)(h.Z,{to:c,children:r}),projectSettings:(0,j.tZ)(h.Z,{to:"/settings/".concat(s.slug,"/projects/").concat(null==i?void 0:i.slug,"/performance/")})})}),this.renderModalFields()]}),(0,j.tZ)(n,{children:(0,j.BX)(u.ZP,{gap:1,children:[(0,j.tZ)(d.ZP,{priority:"default",onClick:this.handleReset,"data-test-id":"reset-all",children:(0,g.t)("Reset All")}),(0,j.tZ)(d.ZP,{label:(0,g.t)("Apply"),priority:"primary",onClick:this.handleApply,"data-test-id":"apply-threshold",children:(0,g.t)("Apply")})]})})]})}}_.displayName="TransactionThresholdModal";const E=(0,r.Z)("div",{target:"ezg6l150"})("margin-bottom:",(0,v.Z)(4),";"),C={name:"9w3zq5",styles:"width:100%;max-width:650px;margin:70px auto"},P=(0,f.Z)((0,x.Z)(_))},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,n)=>{n.d(t,{Pl:()=>r,oZ:()=>o,eH:()=>a,L0:()=>i,jb:()=>l});var s=n("./app/utils/performance/histogram/utils.tsx");function r({orgSlug:e,transaction:t,projectID:n,query:s}){return{pathname:function({orgSlug:e}){return"/organizations/".concat(e,"/performance/summary/vitals/")}({orgSlug:e}),query:{transaction:t,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function o(e,t){const n=(0,s.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function a(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const n=e[t];for(let s=t+1;s<e.length;s++){const r=e[s];if(n.bin!==r.bin&&n.count!==r.count)return{point1:{x:t,y:Math.min(n.count,r.count)},point2:{x:s,y:Math.max(n.count,r.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function i(e,t){const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1]))return null;const s=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==s?void 0:s[0])||isNaN(null==s?void 0:s[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:s[0],y:s[1]}}}function l(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;const s=(e.x-t.point1.x)/(t.point2.x-t.point1.x),r=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*s,y:n.point1.y+(n.point2.y-n.point1.y)*r}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_views_performance_transactionSummary_pageLayout_tsx.a17d4eae2ebca5c5650267b2be32b925.js.map