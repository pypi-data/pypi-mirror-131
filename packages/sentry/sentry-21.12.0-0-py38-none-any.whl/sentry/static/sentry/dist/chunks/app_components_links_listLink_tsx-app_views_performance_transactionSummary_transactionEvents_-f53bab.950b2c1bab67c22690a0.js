"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_links_listLink_tsx-app_views_performance_transactionSummary_transactionEvents_-f53bab"],{"./app/components/gridEditable/sortLink.tsx":(t,e,n)=>{n.d(e,{Z:()=>h});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),a=n("../node_modules/lodash/omit.js"),i=n.n(a),s=n("./app/components/links/link.tsx"),l=n("./app/icons/index.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends o.Component{renderArrow(){const{direction:t}=this.props;return t?"desc"===t?(0,c.tZ)(m,{size:"xs",direction:"down"}):(0,c.tZ)(m,{size:"xs",direction:"up"}):null}render(){const{align:t,title:e,canSort:n,generateSortLink:r,onClick:o}=this.props,a=r();return a&&n?(0,c.BX)(d,{align:t,to:a,onClick:o,children:[e," ",this.renderArrow()]}):(0,c.tZ)(u,{align:t,children:e})}}p.displayName="SortLink";const d=(0,r.Z)((t=>{const e=i()(t,["align"]);return(0,c.tZ)(s.Z,{...e})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(t=>t.align?"text-align: ".concat(t.align,";"):""),";"),u=(0,r.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(t=>t.align?"text-align: ".concat(t.align,";"):""),";"),m=(0,r.Z)(l.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),h=p},"./app/components/links/listLink.tsx":(t,e,n)=>{n.d(e,{Z:()=>h});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/classnames/index.js"),l=n.n(s),c=n("../node_modules/lodash/omit.js"),p=n.n(c),d=n("../node_modules/query-string/index.js"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends a.Component{constructor(...t){super(...t),(0,r.Z)(this,"getClassName",(()=>{const t={},{className:e,activeClassName:n}=this.props;return e&&(t[e]=!0),this.isActive()&&n&&(t[n]=!0),l()(t)}))}isActive(){const{isActive:t,to:e,query:n,index:r,router:o}=this.props,a=n?d.parse(n):void 0,i="string"==typeof e?{pathname:e,query:a}:e;return"function"==typeof t?t(i,r):o.isActive(i,r)}render(){const{index:t,children:e,to:n,disabled:r,...o}=this.props,a=p()(o,"activeClassName","css","isActive","index","router","location");return(0,u.tZ)(g,{className:this.getClassName(),disabled:r,children:(0,u.tZ)(i.Link,{...a,onlyActiveOnIndex:t,to:r?"":n,children:e})})}}m.displayName="ListLink",(0,r.Z)(m,"displayName","ListLink"),(0,r.Z)(m,"defaultProps",{activeClassName:"active",index:!1,disabled:!1});const h=(0,i.withRouter)(m),g=(0,o.Z)("li",{shouldForwardProp:t=>"disabled"!==t,target:"er8tqc10"})((t=>t.disabled&&"\n   a {\n    color:".concat(t.theme.disabled," !important;\n    pointer-events: none;\n    :hover {\n      color: ").concat(t.theme.disabled,"  !important;\n    }\n   }\n")),";")},"./app/utils/discover/discoverQuery.tsx":(t,e,n)=>{n.d(e,{Z:()=>l}),n("../node_modules/react/index.js");var r=n("./app/utils/withApi.tsx"),o=n("./app/utils/discover/genericDiscoverQuery.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(t,e){return t.transactionName!==e.transactionName||t.transactionThreshold!==e.transactionThreshold||t.transactionThresholdMetric!==e.transactionThresholdMetric}function s(t){return(0,a.tZ)(o.ZP,{route:"eventsv2",shouldRefetchData:i,...t})}s.displayName="DiscoverQuery";const l=(0,r.Z)(s)},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(t,e,n)=>{n.d(e,{Z:()=>d});var r=n("../node_modules/lodash/omit.js"),o=n.n(r),a=n("./app/utils.tsx"),i=n("./app/utils/discover/genericDiscoverQuery.tsx"),s=n("./app/utils/withApi.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(t){const{perSuspect:e,spanOps:n,spanGroups:r}=t,i={perSuspect:e,spanOp:n,spanGroup:r};(0,a.ri)(i.perSuspect)||delete i.perSuspect,(0,a.ri)(i.spanOp)||delete i.spanOp,(0,a.ri)(i.spanGroup)||delete i.spanGroup;const s=o()(t.eventView.getEventsAPIPayload(t.location),["field"]);return Object.assign(i,s)}function p(t){return(0,l.tZ)(i.ZP,{route:"events-spans-performance",getRequestPayload:c,limit:4,...o()(t,"children"),children:({tableData:e,...n})=>t.children({suspectSpans:e,...n})})}p.displayName="SuspectSpansQuery";const d=(0,s.Z)(p)},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(t,e,n)=>{n.d(e,{q3:()=>s,_S:()=>l,xr:()=>c,tb:()=>p,qg:()=>d,Zq:()=>u});var r=n("./app/locale.tsx"),o=n("./app/utils/queryString.tsx"),a=n("./app/views/performance/transactionSummary/filter.tsx"),i=n("./app/views/performance/transactionSummary/utils.tsx");let s;function l(t,e){const{p99:n,p95:o,p75:i,p50:l}=e||{p99:0,p95:0,p75:0,p50:0};return{[s.p50]:{name:s.p50,query:l?[["transaction.duration","<=".concat(l.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(t)||"transaction.duration"},label:(0,r.t)("p50")},[s.p75]:{name:s.p75,query:i?[["transaction.duration","<=".concat(i.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(t)||"transaction.duration"},label:(0,r.t)("p75")},[s.p95]:{name:s.p95,query:o?[["transaction.duration","<=".concat(o.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(t)||"transaction.duration"},label:(0,r.t)("p95")},[s.p99]:{name:s.p99,query:n?[["transaction.duration","<=".concat(n.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(t)||"transaction.duration"},label:(0,r.t)("p99")},[s.p100]:{name:s.p100,label:(0,r.t)("p100")}}}function c({orgSlug:t,transaction:e,projectID:n,query:r}){return{pathname:"/organizations/".concat(t,"/performance/summary/events/"),query:{transaction:e,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}function p(t){return e=(0,o.ro)(t.query.showTransactions,s.p100),Object.values(s).includes(e)?e:s.p100;var e}function d(t,e){var n,r;const o=l(e),a=null===(n=o[t].sort)||void 0===n?void 0:n.kind,i=null===(r=o[t].sort)||void 0===r?void 0:r.field,s={showTransactions:t};return a&&i&&(s.sort="".concat("desc"===a?"-":"").concat(i)),s}function u(t){switch(t){case i.K0.OUTLIER:return s.p100;case i.K0.SLOW:return s.p95;default:return}}!function(t){t.p50="p50",t.p75="p75",t.p95="p95",t.p99="p99",t.p100="p100"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/index.tsx":(t,e,n)=>{n.r(e),n.d(e,{default:()=>Kt}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.trim.js");var r=n("../node_modules/lodash/pick.js"),o=n.n(r),a=n("./app/constants/index.tsx"),i=n("./app/locale.tsx"),s=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/queryString.tsx"),c=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/utils/withOrganization.tsx"),d=n("./app/utils/withProjects.tsx"),u=n("./app/views/performance/transactionSummary/pageLayout.tsx"),m=n("./app/views/performance/transactionSummary/tabs.tsx"),h=n("../node_modules/react/index.js"),g=n("../node_modules/react-router/es/index.js"),v=n("../node_modules/lodash/omit.js"),f=n.n(v),y=n("./app/components/dropdownControl.tsx"),x=n("./app/components/emptyStateWarning.tsx"),Z=n("./app/components/events/searchBar.tsx"),b=n("./app/components/layouts/thirds.tsx"),w=n("./app/components/loadingIndicator.tsx"),S=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),k=n("./app/components/pagination.tsx"),j=n("./app/utils.tsx"),_=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),C=n("./app/utils/discover/discoverQuery.tsx"),E=n("./app/utils/discover/fields.tsx"),z=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),P=n("./app/views/performance/transactionSummary/utils.tsx"),T=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),M=n("./app/components/charts/errorPanel.tsx"),q=n("./app/components/dropdownButton.tsx"),A=n("./app/components/performance/waterfall/utils.tsx"),O=n("./app/components/radio.tsx"),D=n("./app/icons/index.tsx"),N=n("./app/styles/overflowEllipsis.tsx"),L=n("./app/styles/space.tsx"),I=n("./app/utils/discover/genericDiscoverQuery.tsx"),X=n("./app/utils/withApi.tsx"),V=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function B(t){return(0,V.tZ)(I.ZP,{route:"events-span-ops",limit:20,...f()(t,"children"),children:({tableData:e,...n})=>t.children({spanOps:e,...n})})}B.displayName="SpanOpsQuery";const F=(0,X.Z)(B);function K(t){const{location:e,eventView:n,organization:r,handleOpChange:o,transactionName:a}=t,s=new c.MY("");s.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[a]);const p=n.clone();p.query=s.formatString();const d=(0,l.ro)(e.query.spanOp);return(0,V.tZ)(y.ZP,{menuWidth:"240px",blendWithActor:!0,button:({isOpen:t,getActorProps:e})=>(0,V.tZ)(q.Z,{"data-test-id":"ops-filter-button",...e(),showChevron:!1,isOpen:t,children:(0,V.BX)(h.Fragment,{children:[(0,V.tZ)(D.wH,{size:"xs"}),(0,V.tZ)(Q,{children:(0,j.ri)(d)?(0,i._N)("Filter - [op]",{op:d}):(0,i.t)("Filter")})]})}),children:(0,V.BX)(U,{children:[(0,V.BX)(H,{"data-test-id":"span-op-filter-header",onClick:t=>{t.stopPropagation(),o(void 0)},children:[(0,V.tZ)(R,{children:(0,i.t)("All Operations")}),(0,V.tZ)(O.Z,{radioSize:"small",checked:!(0,j.ri)(d),onChange:()=>{}})]}),(0,V.tZ)(F,{location:e,orgSlug:r.slug,eventView:p,cursor:"0:0:1",noPagination:!0,children:({spanOps:t,isLoading:e,error:n})=>e?(0,V.tZ)(Y,{}):n?(0,V.tZ)(M.Z,{height:"124px",children:(0,V.tZ)(D.FC,{color:"gray300",size:"lg"})}):(0,j.ri)(t)&&0!==t.length?t.map((t=>(0,V.BX)(G,{"data-test-id":"span-op-filter-item",onClick:e=>{e.stopPropagation(),o(t.op)},children:[(0,V.tZ)(W,{backgroundColor:(0,A.hd)(t.op)}),(0,V.tZ)($,{children:t.op}),(0,V.tZ)(O.Z,{radioSize:"small",checked:t.op===d,onChange:()=>{}})]},t.op))):(0,V.tZ)(x.Z,{small:!0,children:(0,i.t)("No span ops")})})]})})}K.displayName="OpsFilter";const Q=(0,T.Z)("span",{target:"eb2ydel7"})("margin-left:",(0,L.Z)(1),";white-space:nowrap;"),U=(0,T.Z)("ul",{target:"eb2ydel6"})({name:"lq0bte",styles:"max-height:250px;overflow-y:auto;list-style:none;margin:0;padding:0"}),H=(0,T.Z)("li",{target:"eb2ydel5"})("display:grid;grid-template-columns:auto min-content;grid-column-gap:",(0,L.Z)(1),";align-items:center;margin:0;background-color:",(t=>t.theme.backgroundSecondary),";color:",(t=>t.theme.gray300),";font-weight:normal;font-size:",(t=>t.theme.fontSizeMedium),";padding:",(0,L.Z)(1)," ",(0,L.Z)(2),";border-bottom:1px solid ",(t=>t.theme.border),";"),R=(0,T.Z)("span",{target:"eb2ydel4"})("font-size:",(t=>t.theme.fontSizeMedium),";"),G=(0,T.Z)("li",{target:"eb2ydel3"})("display:grid;grid-template-columns:max-content 1fr max-content;grid-column-gap:",(0,L.Z)(1),";align-items:center;padding:",(0,L.Z)(1)," ",(0,L.Z)(2),";border-bottom:1px solid ",(t=>t.theme.border),";:hover{background-color:",(t=>t.theme.backgroundSecondary),";}&:hover span{color:",(t=>t.theme.blue300),";text-decoration:underline;}"),W=(0,T.Z)("div",{target:"eb2ydel2"})("content:'';display:block;width:8px;min-width:8px;height:8px;margin-right:",(0,L.Z)(1),";border-radius:100%;background-color:",(t=>t.backgroundColor),";"),$=(0,T.Z)("span",{target:"eb2ydel1"})("font-size:",(t=>t.theme.fontSizeMedium),";",N.Z,";"),Y=(0,T.Z)(w.Z,{target:"eb2ydel0"})("margin:",(0,L.Z)(4)," auto;");var J=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),tt=n("./app/components/charts/styles.tsx"),et=n("./app/components/panels/index.tsx"),nt=n("./app/components/performance/waterfall/rowBar.tsx"),rt=n("./app/components/tooltip.tsx"),ot=n("./app/utils/formatters.tsx"),at=n("./app/views/performance/utils.tsx");const it=(0,T.Z)("div",{target:"e1jt3nzn10"})("display:grid;grid-gap:",(0,L.Z)(2),";grid-template-columns:min-content 1fr min-content;align-items:center;"),st=(0,T.Z)(et.s_,{target:"e1jt3nzn9"})("padding:",(0,L.Z)(1.5)," ",(0,L.Z)(3),";margin-top:",(0,L.Z)(3),";margin-bottom:0;border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;display:grid;grid-template-columns:1fr;grid-gap:",(0,L.Z)(1.5),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:auto repeat(3, max-content);grid-gap:48px;}"),lt=(0,T.Z)("div",{target:"e1jt3nzn8"})(">div{border-top-left-radius:0;border-top-right-radius:0;",(t=>t.expandable&&"\n      margin-bottom: 0;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      "),";}"),ct=(0,T.Z)(et.s_,{target:"e1jt3nzn7"})("font-size:",(t=>t.theme.fontSizeMedium),";padding:",(0,L.Z)(1)," ",(0,L.Z)(0)," ",(0,L.Z)(1)," ",(0,L.Z)(3),";border-top:0;border-top-left-radius:0;border-top-right-radius:0;");function pt(t){const{label:e,value:n,align:r,isSortKey:o}=t,a=(0,J.u)();return(0,V.BX)(dt,{align:r,children:[o&&(0,V.tZ)(ut,{"data-test-id":"span-sort-arrow",size:"xs",color:a.subText,direction:"down"}),(0,V.tZ)(tt.OT,{children:e}),(0,V.tZ)(mt,{children:n})]})}pt.displayName="HeaderItem";const dt=(0,T.Z)("div",{target:"e1jt3nzn6"})(N.Z,";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){text-align:",(t=>t.align),";}"),ut=(0,T.Z)(D.CC,{target:"e1jt3nzn5"})("margin-right:",(0,L.Z)(.5),";"),mt=(0,T.Z)("h1",{target:"e1jt3nzn4"})("font-size:",(t=>t.theme.headerFontSize),";font-weight:normal;line-height:1.2;color:",(t=>t.theme.textColor),";margin-bottom:0;"),ht=(0,T.Z)("div",{target:"e1jt3nzn3"})(N.Z,";"),gt=(0,T.Z)("span",{target:"e1jt3nzn2"})("color:",(t=>t.theme.gray300),";"),vt=(0,V.tZ)(gt,{children:(0,i.t)("n/a")}),ft=(0,T.Z)("div",{target:"e1jt3nzn1"})("position:relative;display:flex;top:",(0,L.Z)(.5),";background-color:",(t=>t.theme.gray100),";"),yt=(0,T.Z)(nt.e,{target:"e1jt3nzn0"})({name:"1ics03r",styles:"position:relative;width:100%;top:0"});function xt(t){const{spanOp:e,spanDuration:n,transactionDuration:r}=t,o=n/r,a=o<.7?"right":"inset";return(0,V.tZ)(ft,{children:(0,V.tZ)("div",{style:{width:(0,A.yI)(o)},children:(0,V.tZ)(rt.Z,{title:(0,ot.rl)(o),containerDisplayMode:"block",children:(0,V.tZ)(yt,{spanBarHatch:!1,style:{backgroundColor:(0,A.hd)(e)},children:(0,V.tZ)(nt.R,{durationDisplay:a,showDetail:!1,spanBarHatch:!1,children:(0,V.tZ)(at.Xr,{abbreviation:!0,milliseconds:n})})})})})})}xt.displayName="SpanDurationBar",n("../node_modules/core-js/modules/es.symbol.description.js");var Zt=n("./app/components/button.tsx"),bt=n("./app/components/gridEditable/index.tsx"),wt=n("./app/components/gridEditable/sortLink.tsx"),St=n("./app/components/links/link.tsx"),kt=n("./app/utils/discover/fieldRenderers.tsx"),jt=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),_t=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");const Ct=[{key:"id",name:(0,i.t)("Example Transaction"),width:bt.z7},{key:"timestamp",name:(0,i.t)("Timestamp"),width:bt.z7},{key:"spanDuration",name:(0,i.t)("Span Duration"),width:bt.z7},{key:"occurrences",name:(0,i.t)("Count"),width:bt.z7},{key:"cumulativeDuration",name:(0,i.t)("Cumulative Duration"),width:bt.z7}],Et={id:"string",timestamp:"date",spanDuration:"duration",occurrences:"integer",cumulativeDuration:"duration"};function zt(t){const{location:e,organization:n,suspectSpan:r,generateTransactionLink:o,eventView:a,totals:s,preview:l}=t,c=r.examples.length>l,[p,d]=(0,h.useReducer)((t=>!t),!0),u=(p?r.examples.slice(0,l):r.examples).map((t=>({id:t.id,project:r.project,timestamp:1e3*t.finishTimestamp,transactionDuration:1e3*(t.finishTimestamp-t.startTimestamp),spanDuration:t.nonOverlappingExclusiveTime,occurrences:t.spans.length,cumulativeDuration:t.spans.reduce(((t,e)=>t+e.exclusiveTime),0),spans:t.spans}))),m=(0,_t.KK)(a);return(0,V.BX)("div",{"data-test-id":"suspect-card",children:[(0,V.BX)(st,{"data-test-id":"suspect-card-upper",children:[(0,V.tZ)(pt,{label:(0,i.t)("Span Operation"),value:(0,V.tZ)(Dt,{span:r}),align:"left"}),(0,V.tZ)(Tt,{sort:m,suspectSpan:r,totals:s}),(0,V.tZ)(Mt,{sort:m,suspectSpan:r,totals:s}),(0,V.tZ)(qt,{sort:m,suspectSpan:r,totals:s})]}),(0,V.tZ)(lt,{expandable:c,"data-test-id":"suspect-card-lower",children:(0,V.tZ)(bt.ZP,{data:u,columnOrder:Ct,columnSortBy:[],grid:{renderHeadCell:At,renderBodyCell:Ot(e,n,o,r)},location:e})}),c&&(0,V.tZ)(ct,{children:(0,V.tZ)(Zt.ZP,{priority:"link",onClick:d,children:p?(0,i.t)("Show More Transaction Examples"):(0,i.t)("Hide Transaction Examples")})})]})}zt.displayName="SuspectSpanEntry";const Pt={[jt.p.P50_EXCLUSIVE_TIME]:(0,i.t)("p50 Exclusive Time"),[jt.p.P75_EXCLUSIVE_TIME]:(0,i.t)("p75 Exclusive Time"),[jt.p.P95_EXCLUSIVE_TIME]:(0,i.t)("p95 Exclusive Time"),[jt.p.P99_EXCLUSIVE_TIME]:(0,i.t)("p99 Exclusive Time")};function Tt(t){const{sort:e,suspectSpan:n}=t,r=Pt.hasOwnProperty(e.field)?e.field:jt.p.P75_EXCLUSIVE_TIME;return(0,V.tZ)(pt,{label:Pt[r],value:(0,V.tZ)(at.Xr,{abbreviation:!0,milliseconds:n[r]}),align:"right",isSortKey:e.field===r})}function Mt(t){const{sort:e,suspectSpan:n,totals:r}=t;if(e.field===jt.g.COUNT)return(0,V.tZ)(pt,{label:(0,i.t)("Total Count"),value:String(n.count),align:"right",isSortKey:!0});if(e.field===jt.g.AVG_OCCURRENCE)return(0,V.tZ)(pt,{label:(0,i.t)("Average Count"),value:(0,ot.$1)(n.avgOccurrences,2),align:"right",isSortKey:!0});const o=(0,j.ri)(null==r?void 0:r.count)?Math.min(n.frequency,r.count):n.frequency,a=(0,j.ri)(null==r?void 0:r.count)?(0,V.tZ)(rt.Z,{title:(0,i._N)("[frequency] out of [total] transactions contain this span",{frequency:o,total:r.count}),children:(0,V.tZ)("span",{children:(0,ot.rl)(o/r.count)})}):String(n.count);return(0,V.tZ)(pt,{label:(0,i.t)("Frequency"),value:a,align:"right"})}function qt(t){const{sort:e,suspectSpan:n,totals:r}=t;let o=(0,V.tZ)(at.Xr,{abbreviation:!0,milliseconds:n.sumExclusiveTime});return(0,j.ri)(null==r?void 0:r.sum_transaction_duration)&&(o=(0,V.tZ)(rt.Z,{title:(0,i._N)("[percentage] of the total transaction duration of [duration]",{percentage:(0,ot.rl)(n.sumExclusiveTime/r.sum_transaction_duration),duration:(0,V.tZ)(at.Xr,{abbreviation:!0,milliseconds:r.sum_transaction_duration})}),children:o})),(0,V.tZ)(pt,{label:(0,i.t)("Total Exclusive Time"),value:o,align:"right",isSortKey:e.field===jt.g.SUM_EXCLUSIVE_TIME})}function At(t,e){const n=(0,E.qG)(t.key,Et[t.key]);return(0,V.tZ)(wt.Z,{title:t.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function Ot(t,e,n,r){return(o,a)=>{if("spanDuration"===o.key&&a.transactionDuration)return(0,V.tZ)(xt,{spanOp:r.op,spanDuration:a.spanDuration,transactionDuration:a.transactionDuration});let i=(0,kt.Js)(o.key,Et)(a,{location:t,organization:e});if("id"===o.key){const r=a.spans.length?a.spans.reduce(((t,e)=>t.exclusiveTime>=e.exclusiveTime?t:e)):null,o=n(e,a,t.query,r.id);i=(0,V.tZ)(St.Z,{to:o,children:i})}return i}}function Dt(t){var e,n;const{span:r}=t,o=r.examples.find((t=>(0,j.ri)(t.description)));return(0,V.tZ)(rt.Z,{title:"".concat(r.op," - ").concat(null!==(e=null==o?void 0:o.description)&&void 0!==e?e:(0,i.t)("n/a")),children:(0,V.BX)(ht,{children:[(0,V.tZ)("span",{children:r.op})," - ",null!==(n=null==o?void 0:o.description)&&void 0!==n?n:vt]})})}Tt.displayName="PercentileDuration",Mt.displayName="SpanCount",qt.displayName="TotalCumulativeDuration",At.displayName="renderHeadCell",Dt.displayName="SpanLabel";const Nt={spanOp:(t,e)=>(0,_.Z)("performance_views.spans.change_op",{organization:t,operation_name:e}),sort:(t,e)=>(0,_.Z)("performance_views.spans.change_sort",{organization:t,sort_column:e})};function Lt(t){const{location:e,organization:n,eventView:r,setError:o,transactionName:a}=t,s=(0,l.ro)(e.query.query,"");function p(t){return function(r){var o;null===(o=Nt[t])||void 0===o||o.call(Nt,n,r);const a=(0,S.Q)({...e.query||{},[t]:r}),i=["cursor"];(0,j.ri)(r)||i.push(t);const s=f()(a,i);g.browserHistory.push({...e,query:s})}}const d=(0,l.ro)(e.query.spanOp),u=(0,l.ro)(e.query.spanGroup),m=(0,_t.KK)(r),v=function(t){const e=t.withColumns([{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["sum","transaction.duration",void 0,void 0]}]),n=new c.MY(t.query);return Object.keys(n.filters).forEach((t=>{(0,E.h1)(t)&&n.removeFilter(t)})),e.query=n.formatString(),e}(r);return(0,V.BX)(b.or,{fullWidth:!0,children:[(0,V.BX)(it,{children:[(0,V.tZ)(K,{location:e,eventView:r,organization:n,handleOpChange:p("spanOp"),transactionName:a}),(0,V.tZ)(Z.Z,{organization:n,projectIds:r.project,query:s,fields:r.fields,onSearch:p("query")}),(0,V.tZ)(y.ZP,{buttonProps:{prefix:m.prefix},label:m.label,children:_t.E5.map((t=>(0,V.tZ)(y.hP,{eventKey:t.field,isActive:t.field===m.field,onSelect:p("sort"),children:t.label},t.field)))})]}),(0,V.tZ)(C.Z,{eventView:v,orgSlug:n.slug,location:e,referrer:"api.performance.transaction-spans",cursor:"0:0:1",noPagination:!0,children:({tableData:t})=>{var s,l;const c=null!==(s=null==t||null===(l=t.data)||void 0===l?void 0:l[0])&&void 0!==s?s:null;return(0,V.tZ)(z.Z,{location:e,orgSlug:n.slug,eventView:r,perSuspect:10,spanOps:(0,j.ri)(d)?[d]:[],spanGroups:(0,j.ri)(u)?[u]:[],children:({suspectSpans:t,isLoading:s,error:l,pageLinks:p})=>l?(o(l),null):(o(void 0),s?(0,V.tZ)(w.Z,{}):null!=t&&t.length?(0,V.BX)(h.Fragment,{children:[t.map((t=>(0,V.tZ)(zt,{location:e,organization:n,suspectSpan:t,generateTransactionLink:(0,P.vd)(a),eventView:r,totals:c,preview:2},"".concat(t.op,"-").concat(t.group)))),(0,V.tZ)(k.Z,{pageLinks:p})]}):(0,V.tZ)(x.Z,{children:(0,V.tZ)("p",{children:(0,i.t)("No span data found")})}))})}})]})}Lt.displayName="SpansContent";const It=Lt,Xt=o()(a.wh,["1h","24h","7d","14d","30d"]);function Vt(t){const{location:e,organization:n,projects:r}=t;return(0,V.tZ)(u.Z,{location:e,organization:n,projects:r,tab:m.Z.Spans,getDocumentTitle:Ft,generateEventView:Bt,childComponent:It,relativeDateOptions:Xt,maxPickableDays:30})}function Bt(t,e){const n=(0,l.ro)(t.query.query,""),r=new c.MY(n);r.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[e]);const o=s.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:e,fields:[...Object.values(jt.g),...Object.values(jt.p)],query:r.formatString(),projects:[]},t),a=(0,_t.TK)(t);return o.withSorts([{field:a.field,kind:"desc"}])}function Ft(t){return"string"==typeof t&&String(t).trim().length>0?[String(t).trim(),(0,i.t)("Performance")].join(" - "):[(0,i.t)("Summary"),(0,i.t)("Performance")].join(" - ")}Vt.displayName="TransactionSpans";const Kt=(0,d.Z)((0,p.Z)(Vt))},"../node_modules/downsample/methods/ASAP.js":(t,e)=>{function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var r={"PointValueExtractor<unknown>":t=>"function"==typeof t,XYDataPoint:t=>null!=t&&r.X(t.x)&&"number"==typeof t.y,X:t=>"number"==typeof t||t instanceof Date},o=t=>{for(var e=0,n=0;n<t.length;n+=1)e+=t[n];return e/t.length},a=(t,e)=>{for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e(t[o],o);return r},i=t=>r["PointValueExtractor<unknown>"](t)?t:e=>e[t],s=(t,e)=>({x:t,y:e}),l=()=>({x:t=>{var e=r.XYDataPoint(t)?t.x:t[0];return e instanceof Date?e.getTime():e},y:t=>"y"in t?t.y:t[1],toPoint:s}),c=(t,e)=>new t.constructor(e),p=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],o=0,a=0;a<e;a++)o+=t[a];for(var i=e;i<=t.length;i++)(i-e)%n==0&&r.push(o/e),o+=t[i]-t[i-e];return r},d=t=>{var e=i(t.x),n=i(t.y),r=t.toPoint;return function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t.length)return t;for(var s,l=a(t,n),p=a(t,e),d=c(t,0),u=0,m=0;m<o;m++)u+=l[m];for(var h=o;h<=l.length;h++)(h-o)%i==0&&(s=r((p[h-o]+p[h-1])/2,u/o,h-o),d[d.length]=s),u+=l[h]-l[h-o];return d}};function u(t,e){if(t.length!=e.length)throw"Mismatched lengths";var n=t.length;0!=n&&(0==(n&n-1)?function(t,e){if(t.length!=e.length)throw"Mismatched lengths";var n=t.length;if(1!=n){for(var r=-1,o=0;o<32;o++)1<<o==n&&(r=o);if(-1==r)throw"Length is not a power of 2";for(var a=new Array(n/2),i=new Array(n/2),s=0;s<n/2;s++)a[s]=Math.cos(2*Math.PI*s/n),i[s]=Math.sin(2*Math.PI*s/n);for(var l=0;l<n;l++){var c=h(l,r);if(c>l){var p=t[l];t[l]=t[c],t[c]=p,p=e[l],e[l]=e[c],e[c]=p}}for(var d=2;d<=n;d*=2)for(var u=d/2,m=n/d,g=0;g<n;g+=d)for(var v=g,f=0;v<g+u;v++,f+=m){var y=t[v+u]*a[f]+e[v+u]*i[f],x=-t[v+u]*i[f]+e[v+u]*a[f];t[v+u]=t[v]-y,e[v+u]=e[v]-x,t[v]+=y,e[v]+=x}}}(t,e):function(t,e){if(t.length!=e.length)throw"Mismatched lengths";for(var n=t.length,r=1;r<2*n+1;)r*=2;for(var o=new Array(n),a=new Array(n),i=0;i<n;i++){var s=i*i%(2*n);o[i]=Math.cos(Math.PI*s/n),a[i]=Math.sin(Math.PI*s/n)}for(var l=new Array(r),c=new Array(r),p=0;p<n;p++)l[p]=t[p]*o[p]+e[p]*a[p],c[p]=-t[p]*a[p]+e[p]*o[p];for(var d=n;d<r;d++)l[d]=c[d]=0;var h=new Array(r),g=new Array(r);h[0]=o[0],g[0]=a[0];for(var v=1;v<n;v++)h[v]=h[r-v]=o[v],g[v]=g[r-v]=a[v];for(var f=n;f<=r-n;f++)h[f]=g[f]=0;var y=new Array(r),x=new Array(r);!function(t,e,n,r,o,a){if(t.length!=e.length||t.length!=n.length||n.length!=r.length||t.length!=o.length||o.length!=a.length)throw"Mismatched lengths";var i=t.length;t=t.slice(),e=e.slice(),n=n.slice(),r=r.slice(),u(t,e),u(n,r);for(var s=0;s<i;s++){var l=t[s]*n[s]-e[s]*r[s];e[s]=e[s]*n[s]+t[s]*r[s],t[s]=l}m(t,e);for(var c=0;c<i;c++)o[c]=t[c]/i,a[c]=e[c]/i}(l,c,h,g,y,x);for(var Z=0;Z<n;Z++)t[Z]=y[Z]*o[Z]+x[Z]*a[Z],e[Z]=-y[Z]*a[Z]+x[Z]*o[Z]}(t,e))}function m(t,e){u(e,t)}function h(t,e){for(var n=0,r=0;r<e;r++)n=n<<1|1&t,t>>>=1;return n}d(l());var g,v,f,y=t=>(t=>{for(var e=o(t),n=0,r=0;r<t.length;r+=1)n+=(t[r]-e)*(t[r]-e);return Math.sqrt(n/t.length)})((t=>{var e=t.length-1;if(e<1)return[];for(var n=new Array(e),r=0;r<e;r++)n[r]=t[r+1]-t[r];return n})(t)),x=t=>{for(var e,n,r=t.length,a=o(t),i=0,s=0,l=0;l<r;l++)i+=(n=(e=t[l]-a)*e)*n,s+=n;return r*i/(s*s)},Z=(g=l(),v=i(g.y),f=d(g),function t(e,r){if(0===e.length)return e;if(r<=0)throw new Error("Supplied non-positive resolution parameter to ASAP: ".concat(r));if(e.length>=2*r){var i=Math.trunc(e.length/r);return t(f(e,i,i),r)}for(var s=a(e,v),l=((t,e)=>{for(var r=t.length,a=o(t),i=Math.pow(2,Math.trunc(Math.log2(r))+1),s=new Array(i).fill(0),l=new Array(i).fill(0),c=0;c<r;c+=1)s[c]=t[c]-a;u(s,l);for(var p=0;p<s.length;p+=1)s[p]=Math.pow(s[p],2)+Math.pow(l[p],2),l[p]=0;m(s,l);for(var d=[],h=1;h<e;h++)d[h]=s[h]/s[0];var g=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=t.length;if(n<=1)return[[],0];var r=0,o=[];if(t.length>1)for(var a=t[1]>t[0],i=1,s=2;s<t.length;s+=1)!a&&t[s]>t[s-1]?(i=s,a=!a):a&&t[s]>t[i]?i=s:a&&t[s]<t[s-1]&&(i>1&&t[i]>e&&(o.push(i),t[i]>r&&(r=t[i])),a=!a);if(o.length<=1)for(var l=2;l<n;l+=1)o.push(l);return[o,r]}(d),2);return{correlations:d,peaks:g[0],maxCorrelation:g[1]}})(s,Math.round(s.length/10)),c=l.correlations,d=l.peaks,h=l.maxCorrelation,g=x(s),Z=y(s),b=1,w=1,S=-1,k=s.length/10,j=d.length-1;j>=0;j-=1){var _=d[j];if(_<w||1===_)break;if(!(Math.sqrt(1-c[_])*b>Math.sqrt(1-c[b])*_)){var C=p(s,_,1),E=x(C),z=y(C);E>=g&&(z<Z&&(Z=z,b=_),w=Math.round(Math.max(_*Math.sqrt((h-1)/(c[_]-1)),w)),S<0&&(S=j))}}return S>0&&(S<d.length-2&&(k=d[S+1]),w=Math.max(w,d[S]+1)),b=((t,e,n,r,o,a)=>{for(;t<=e;){var i=Math.round((t+e)/2),s=p(n,i,1);if(x(s)>=o){var l=y(s);l<r&&(a=i,r=l),t=i+1}else e=i-1}return a})(w,k,s,Z,g,b),f(e,b,1)});e.Cl=Z}}]);
//# sourceMappingURL=../sourcemaps/app_components_links_listLink_tsx-app_views_performance_transactionSummary_transactionEvents_-f53bab.29aec144bd5aa5d407311601ac748af7.js.map