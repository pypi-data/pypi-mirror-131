"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_compare_index_tsx"],{"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{n.d(t,{Z:()=>b});var r=n("../node_modules/react/index.js"),s=n("./app/components/breadcrumbs.tsx"),a=n("./app/locale.tsx"),o=n("./app/utils/queryString.tsx"),i=n("./app/views/performance/transactionSummary/tabs.tsx"),l=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),p=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),c=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),d=n("./app/views/performance/transactionSummary/utils.tsx"),u=n("./app/views/performance/vitalDetail/utils.tsx"),h=n("./app/views/performance/utils.tsx"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends r.Component{getCrumbs(){const e=[],{organization:t,location:n,transaction:r,vitalName:s,eventSlug:m,traceSlug:g,transactionComparison:b,tab:v}=this.props,f={pathname:(0,h.de)(t),query:{...n.query,transaction:void 0}};if(e.push({to:f,label:(0,a.t)("Performance"),preserveGlobalSelection:!0}),s){const r=(0,u.i4)({orgSlug:t.slug,vitalName:"fcp",projectID:(0,o.ro)(n.query.project),query:n.query});e.push({to:r,label:(0,a.t)("Vital Detail"),preserveGlobalSelection:!0})}else if(r){const s={orgSlug:t.slug,transaction:r.name,projectID:r.project,query:n.query};switch(v){case i.Z.Tags:{const t=(0,p.vG)(s);e.push({to:t,label:(0,a.t)("Tags"),preserveGlobalSelection:!0});break}case i.Z.Events:{const t=(0,l.xr)(s);e.push({to:t,label:(0,a.t)("All Events"),preserveGlobalSelection:!0});break}case i.Z.WebVitals:{const t=(0,c.Pl)(s);e.push({to:t,label:(0,a.t)("Web Vitals"),preserveGlobalSelection:!0});break}case i.Z.TransactionSummary:default:{const t=(0,d.e1)(s);e.push({to:t,label:(0,a.t)("Transaction Summary"),preserveGlobalSelection:!0})}}}return r&&m?e.push({to:"",label:(0,a.t)("Event Details")}):b?e.push({to:"",label:(0,a.t)("Compare to Baseline")}):g&&e.push({to:"",label:(0,a.t)("Trace View")}),e}render(){return(0,m.tZ)(s.Z,{crumbs:this.getCrumbs()})}}g.displayName="Breadcrumb";const b=g},"./app/views/performance/compare/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>st});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.string.trim.js"),n("../node_modules/react/index.js")),a=n("../node_modules/@sentry/minimal/esm/index.js"),o=n("./app/components/errors/notFound.tsx"),i=n("./app/components/loadingError.tsx"),l=n("./app/components/loadingIndicator.tsx"),p=n("./app/components/noProjectMessage.tsx"),c=n("./app/components/sentryDocumentTitle.tsx"),d=n("./app/locale.tsx"),u=n("./app/styles/organization.tsx"),h=n("./app/utils/withOrganization.tsx"),m=n("./app/components/layouts/thirds.tsx"),g=n("./app/components/panels/index.tsx"),b=n("./app/views/performance/breadcrumb.tsx"),v=n("./app/components/events/interfaces/spans/utils.tsx"),f=n("./app/icons/index.tsx"),S=n("./app/views/settings/components/emptyMessage.tsx"),Z=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),y=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("./app/components/events/interfaces/spans/dividerHandlerManager.tsx")),x=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),w=n("./app/components/count.tsx"),T=n("./app/components/performance/waterfall/constants.tsx"),D=n("./app/components/performance/waterfall/row.tsx"),C=n("./app/components/performance/waterfall/rowDivider.tsx"),E=n("./app/components/performance/waterfall/rowTitle.tsx"),_=n("./app/components/performance/waterfall/treeConnector.tsx"),k=n("./app/components/performance/waterfall/utils.tsx"),B=n("./app/styles/space.tsx"),R=(n("../node_modules/core-js/modules/es.symbol.description.js"),n("./app/components/dateTime.tsx")),N=n("./app/components/events/interfaces/spans/spanDetail.tsx"),j=n("./app/components/events/interfaces/spans/types.tsx"),X=n("./app/components/pill.tsx"),P=n("./app/components/pills.tsx"),I=n("./app/utils/getDynamicText.tsx"),M=n("./app/utils/theme.tsx"),q=n("../node_modules/lodash/map.js"),F=n.n(q),z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const L=e=>{var t,n;const{span:r}=e,a=r.start_timestamp,o=r.timestamp,i="".concat((1e3*(o-a)).toFixed(3),"ms"),l=Object.keys(r).filter((e=>!j.g.has(e)));return(0,z.tZ)(N.iF,{children:(0,z.tZ)("table",{className:"table key-value",children:(0,z.BX)("tbody",{children:[(0,z.tZ)(N.X2,{title:(0,d.t)("Span ID"),children:r.span_id}),(0,z.tZ)(N.X2,{title:(0,d.t)("Parent Span ID"),children:r.parent_span_id||""}),(0,z.tZ)(N.X2,{title:(0,d.t)("Trace ID"),children:r.trace_id}),(0,z.tZ)(N.X2,{title:(0,d.t)("Description"),children:null!==(t=null==r?void 0:r.description)&&void 0!==t?t:""}),(0,z.tZ)(N.X2,{title:(0,d.t)("Start Date"),children:(0,I.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(R.Z,{date:1e3*a})," (".concat(a,")")]})})}),(0,z.tZ)(N.X2,{title:(0,d.t)("End Date"),children:(0,I.Z)({fixed:"Mar 16, 2020 9:10:13 AM UTC",value:(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(R.Z,{date:1e3*o})," (".concat(o,")")]})})}),(0,z.tZ)(N.X2,{title:(0,d.t)("Duration"),children:i}),(0,z.tZ)(N.X2,{title:(0,d.t)("Operation"),children:r.op||""}),(0,z.tZ)(N.X2,{title:(0,d.t)("Same Process as Parent"),children:String(!!r.same_process_as_parent)}),(0,z.tZ)(N.$G,{span:r}),F()(null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},((e,t)=>(0,z.tZ)(N.X2,{title:t,children:JSON.stringify(e,null,4)||""},t))),l.map((e=>(0,z.tZ)(N.X2,{title:e,children:JSON.stringify(r[e],null,4)||""},e)))]})})})};L.displayName="SpanDetailContent";const O=L,U=(0,r.Z)("div",{target:"e13r2pdc0"})("position:relative;height:",T.d-2*T.U,"px;top:",T.U,"px;min-width:1px;user-select:none;transition:border-color 0.15s ease-in-out;border-right:1px solid rgba(0, 0, 0, 0);");n("../node_modules/core-js/modules/es.string.replace.js");var A=n("../node_modules/wink-jaro-distance/src/wink-jaro-distance.js"),H=n.n(A);function V(e){return!!e&&"transaction"===(null==e?void 0:e.type)}function G({parent_span_id:e,baseChildren:t,regressionChildren:n}){const r=[],s=[],a=[...n];for(const n of t){const t=a.reduce(((e,t,r)=>{const s=W({baselineSpan:n,regressionSpan:t});return 0!==s&&e.push({regressionSpan:t,index:r,matchScore:s}),e}),[]);if(0===t.length){s.push({comparisonResult:"baseline",baselineSpan:n});continue}const o=Math.abs(n.timestamp-n.start_timestamp),{regressionSpan:i,index:l}=t.reduce(((e,t)=>{const{regressionSpan:r,matchScore:s}=e,{regressionSpan:a,matchScore:i}=t,l=Math.abs(r.start_timestamp-n.start_timestamp),p=Math.abs(a.start_timestamp-n.start_timestamp),c=Math.abs(r.timestamp-r.start_timestamp),d=Math.abs(a.timestamp-a.start_timestamp),u=Math.abs(c-o)+l+(1-s),h=Math.abs(d-o)+p+(1-i);return u<h?e:u>h?t:e}));a.splice(l,1),r.push({type:"descendent",parent_span_id:e,baselineSpan:n,regressionSpan:i}),s.push({comparisonResult:"matched",span_id:J({baselineSpan:n,regressionSpan:i}),op:n.op,description:n.description,baselineSpan:n,regressionSpan:i})}for(const e of a)s.push({comparisonResult:"regression",regressionSpan:e});return s.sort(te),{comparablePairs:r,children:s}}function W({baselineSpan:e,regressionSpan:t}){if(e.op!==t.op)return 0;const n=function(e,t){if(e===t)return 1;let n=H()(e,t).distance;if(n>.3)return 1-n;const r=Math.min(e.length,t.length,4);let s=0;for(let n=0;n<r&&e[n]===t[n];n+=1)s+=1;return n-=.1*s*n,1-n}((e.description||"").replace(/\s+/g,"").toLowerCase(),(t.description||"").replace(/\s+/g,"").toLowerCase());return n>=.8?n:0}function J({baselineSpan:e,regressionSpan:t}){return"".concat(e.span_id).concat(t.span_id)}function Q(e){switch(e.comparisonResult){case"matched":return Math.max(K(e.baselineSpan),K(e.regressionSpan));case"baseline":return K(e.baselineSpan);case"regression":return K(e.regressionSpan);default:throw Error("Unknown comparisonResult")}}function K(e){return Math.abs(e.timestamp-e.start_timestamp)}function $({baselineSpan:e,regressionSpan:t}){return K(t)-K(e)}function Y(e,t){const n=Q(e),r=Q(t);return n>r?-1:n<r?1:0}function ee(e,t){const n=K(e),r=K(t);return n>r?-1:n<r?1:e.start_timestamp<t.start_timestamp?-1:e.start_timestamp>t.start_timestamp?1:0}function te(e,t){switch(e.comparisonResult){case"regression":switch(t.comparisonResult){case"regression":return ee(e.regressionSpan,t.regressionSpan);case"baseline":case"matched":return-1;default:throw Error("Unknown comparisonResult")}case"baseline":switch(t.comparisonResult){case"baseline":return ee(e.baselineSpan,t.baselineSpan);case"regression":case"matched":return 1;default:throw Error("Unknown comparisonResult")}case"matched":switch(t.comparisonResult){case"regression":return 1;case"baseline":return-1;case"matched":{const n=$({regressionSpan:e.regressionSpan,baselineSpan:e.baselineSpan}),r=$({regressionSpan:t.regressionSpan,baselineSpan:t.baselineSpan});return n>0?r>0?n>r?-1:n<r?1:Y(e,t):-1:0===n?r>0?1:r<0?-1:Y(e,t):r>=0?1:n<r?-1:n>r?1:Y(e,t)}default:throw Error("Unknown comparisonResult")}default:throw Error("Unknown comparisonResult")}}function ne(e){switch(e.comparisonResult){case"matched":return e.span_id;case"baseline":return e.baselineSpan.span_id;case"regression":return e.regressionSpan.span_id;default:throw Error("Unknown comparisonResult")}}function re(e){switch(e.comparisonResult){case"matched":return e.op;case"baseline":return e.baselineSpan.op;case"regression":return e.regressionSpan.op;default:throw Error("Unknown comparisonResult")}}function se(e){switch(e.comparisonResult){case"matched":return(0,v.ro)(e.baselineSpan)||(0,v.ro)(e.regressionSpan);case"baseline":return(0,v.ro)(e.baselineSpan);case"regression":return(0,v.ro)(e.regressionSpan);default:throw Error("Unknown comparisonResult")}}function ae({duration:e,largestDuration:t}){return e<=0?{type:"WIDTH_PIXEL",width:1}:{type:"WIDTH_PERCENTAGE",width:e/t}}function oe(e){if(e)switch(e.type){case"WIDTH_PIXEL":return"".concat(e.width,"px");case"WIDTH_PERCENTAGE":return(0,k.yI)(e.width);default:return e}}const ie=e=>{if(!e)return"right";switch(e.type){case"WIDTH_PIXEL":return"right";case"WIDTH_PERCENTAGE":{const t=.3;return e.width<1-t?"right":"inset"}default:return e}};class le extends s.Component{renderContent(){const{span:e,bounds:t}=this.props;switch(e.comparisonResult){case"matched":return(0,z.tZ)(pe,{baselineSpan:e.baselineSpan,regressionSpan:e.regressionSpan,bounds:t});case"regression":return(0,z.tZ)(O,{span:e.regressionSpan});case"baseline":return(0,z.tZ)(O,{span:e.baselineSpan});default:return e}}render(){return(0,z.tZ)(N.wh,{onClick:e=>{e.stopPropagation()},children:this.renderContent()})}}le.displayName="SpanDetail";const pe=e=>{var t,n;const{baselineSpan:r,regressionSpan:a,bounds:o}=e,i=new Set([...Object.keys(null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{}),...Object.keys(null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{})]),l=new Set([...Object.keys(r).filter((e=>!j.g.has(e))),...Object.keys(a).filter((e=>!j.g.has(e)))]);return(0,z.BX)("div",{children:[(0,z.tZ)(ue,{bounds:o,baselineSpan:r,regressionSpan:a}),(0,z.tZ)(he,{baselineTitle:(0,d.t)("Baseline Span ID"),regressionTitle:(0,d.t)("This Event's Span ID"),renderBaselineContent:()=>r.span_id,renderRegressionContent:()=>a.span_id}),(0,z.tZ)(he,{title:(0,d.t)("Parent Span ID"),renderBaselineContent:()=>r.parent_span_id||"",renderRegressionContent:()=>a.parent_span_id||""}),(0,z.tZ)(he,{title:(0,d.t)("Trace ID"),renderBaselineContent:()=>r.trace_id,renderRegressionContent:()=>a.trace_id}),(0,z.tZ)(he,{title:(0,d.t)("Description"),renderBaselineContent:()=>{var e;return null!==(e=r.description)&&void 0!==e?e:""},renderRegressionContent:()=>{var e;return null!==(e=a.description)&&void 0!==e?e:""}}),(0,z.tZ)(he,{title:(0,d.t)("Start Date"),renderBaselineContent:()=>(0,I.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(R.Z,{date:1e3*r.start_timestamp})," (".concat(r.start_timestamp,")")]})}),renderRegressionContent:()=>(0,I.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(R.Z,{date:1e3*a.start_timestamp})," (".concat(r.start_timestamp,")")]})})}),(0,z.tZ)(he,{title:(0,d.t)("End Date"),renderBaselineContent:()=>(0,I.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(R.Z,{date:1e3*r.timestamp})," (".concat(r.timestamp,")")]})}),renderRegressionContent:()=>(0,I.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(R.Z,{date:1e3*a.timestamp})," (".concat(a.timestamp,")")]})})}),(0,z.tZ)(he,{title:(0,d.t)("Duration"),renderBaselineContent:()=>{const e=r.start_timestamp,t=r.timestamp;return"".concat((1e3*(t-e)).toFixed(3),"ms")},renderRegressionContent:()=>{const e=a.start_timestamp,t=a.timestamp;return"".concat((1e3*(t-e)).toFixed(3),"ms")}}),(0,z.tZ)(he,{title:(0,d.t)("Operation"),renderBaselineContent:()=>r.op||"",renderRegressionContent:()=>a.op||""}),(0,z.tZ)(he,{title:(0,d.t)("Same Process as Parent"),renderBaselineContent:()=>String(!!r.same_process_as_parent),renderRegressionContent:()=>String(!!a.same_process_as_parent)}),(0,z.tZ)(Se,{baselineSpan:r,regressionSpan:a}),Array.from(i).map((e=>(0,z.tZ)(he,{title:e,renderBaselineContent:()=>{var t;const n=(null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{})[e];return JSON.stringify(n,null,4)||""},renderRegressionContent:()=>{var t;const n=(null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{})[e];return JSON.stringify(n,null,4)||""}},e))),Array.from(l).map((e=>(0,z.tZ)(he,{title:e,renderBaselineContent:()=>JSON.stringify(r[e],null,4)||"",renderRegressionContent:()=>JSON.stringify(a[e],null,4)||""},e)))]})};pe.displayName="MatchedSpanDetailsContent";const ce=(0,r.Z)("div",{target:"e9wm86b4"})("display:flex;flex-direction:row;>*+*{border-left:1px solid ",(e=>e.theme.border),";}"),de=(0,r.Z)("div",{target:"e9wm86b3"})("position:relative;height:16px;margin-top:",(0,B.Z)(3),";margin-bottom:",(0,B.Z)(2),";"),ue=e=>{const{bounds:t,baselineSpan:n,regressionSpan:r}=e,s=ie(t.baseline),a=ie(t.regression);return(0,z.BX)(ce,{children:[(0,z.tZ)(me,{children:(0,z.tZ)(de,{children:(0,z.tZ)(U,{style:{backgroundColor:M.ZP.gray500,width:oe(t.baseline),position:"absolute",height:"16px"},children:(0,z.tZ)(Ze,{durationDisplay:s,fontColors:{right:M.ZP.gray500,inset:M.ZP.white},children:(0,k.bQ)(K(n))})})})}),(0,z.tZ)(me,{children:(0,z.tZ)(de,{children:(0,z.tZ)(U,{style:{backgroundColor:M.ZP.purple200,width:oe(t.regression),position:"absolute",height:"16px"},children:(0,z.tZ)(Ze,{durationDisplay:a,fontColors:{right:M.ZP.gray500,inset:M.ZP.gray500},children:(0,k.bQ)(K(r))})})})})]})};ue.displayName="SpanBars";const he=e=>{var t,n;const{title:r,baselineTitle:s,regressionTitle:a}=e,o=e.renderBaselineContent(),i=e.renderRegressionContent();return o||i?(0,z.BX)(ce,{children:[(0,z.tZ)(be,{title:null!==(t=null!=s?s:r)&&void 0!==t?t:"",children:o}),(0,z.tZ)(be,{title:null!==(n=null!=a?a:r)&&void 0!==n?n:"",children:i})]}):null};he.displayName="Row";const me=(0,r.Z)("div",{target:"e9wm86b2"})("width:50%;min-width:50%;max-width:50%;flex-basis:50%;padding-left:",(0,B.Z)(2),";padding-right:",(0,B.Z)(2),";"),ge=(0,r.Z)("div",{target:"e9wm86b1"})({name:"15umkjj",styles:"font-size:13px;font-weight:600"}),be=({title:e,children:t})=>(0,z.BX)(me,{children:[(0,z.tZ)(ge,{children:e}),(0,z.tZ)("div",{children:(0,z.tZ)("pre",{className:"val",style:{marginBottom:(0,B.Z)(1)},children:(0,z.tZ)("span",{className:"val-string",children:t})})})]});be.displayName="RowCell";const ve=e=>{const t=null==e?void 0:e.tags;if(t)return Object.keys(t).length<=0?void 0:t},fe=({tags:e})=>{if(!e)return null;const t=Object.keys(e);return t.length<=0?null:(0,z.tZ)(P.Z,{children:t.map(((t,n)=>(0,z.tZ)(X.Z,{name:t,value:String(e[t])||""},n)))})};fe.displayName="TagPills";const Se=({baselineSpan:e,regressionSpan:t})=>{const n=ve(e),r=ve(t);return n||r?(0,z.BX)(ce,{children:[(0,z.BX)(me,{children:[(0,z.tZ)(ge,{children:(0,d.t)("Tags")}),(0,z.tZ)("div",{children:(0,z.tZ)(fe,{tags:n})})]}),(0,z.BX)(me,{children:[(0,z.tZ)(ge,{children:(0,d.t)("Tags")}),(0,z.tZ)("div",{children:(0,z.tZ)(fe,{tags:r})})]})]}):null};Se.displayName="Tags";const Ze=(0,r.Z)("div",{target:"e9wm86b0"})("position:absolute;top:50%;display:flex;align-items:center;transform:translateY(-50%);white-space:nowrap;font-size:",(e=>e.theme.fontSizeExtraSmall),";color:",(e=>e.fontColors.right),";",(e=>{switch(e.durationDisplay){case"right":return"left: calc(100% + ".concat((0,B.Z)(.75),");");default:return"\n          right: ".concat((0,B.Z)(.75),";\n          color: ").concat(e.fontColors.inset,";\n        ")}}),";@media (max-width: ",(e=>e.theme.breakpoints[1]),"){font-size:10px;}"),ye=le;class xe extends s.Component{constructor(...e){super(...e),(0,Z.Z)(this,"state",{showDetail:!1}),(0,Z.Z)(this,"renderDivider",(e=>{const{theme:t}=this.props;if(this.state.showDetail)return(0,z.tZ)(C.xN,{style:{position:"relative",backgroundColor:(0,k.dF)({theme:t,showDetail:!0})}});const{addDividerLineRef:n}=e;return(0,z.tZ)(C.xN,{ref:n(),style:{position:"relative"},onMouseEnter:()=>{e.setHover(!0)},onMouseLeave:()=>{e.setHover(!1)},onMouseOver:()=>{e.setHover(!0)},onMouseDown:e.onDragStart,onClick:e=>{e.stopPropagation()}})})),(0,Z.Z)(this,"toggleDisplayDetail",(()=>{this.setState((e=>({showDetail:!e.showDetail})))}))}renderSpanTreeConnector({hasToggler:e}){const{isLast:t,isRoot:n,treeDepth:r,continuingTreeDepths:s,span:a,showSpanTree:o}=this.props,i=ne(a);if(n)return e?(0,z.tZ)(_.UV,{style:{right:"15px",height:"10px",bottom:"-5px",top:"auto"},orphanBranch:!1},"".concat(i,"-last")):null;const l=s.map((e=>{const t=(0,v.h_)(e);if(0===t)return null;const n=-1*((r-t)*(_.Ll/2)+2);return(0,z.tZ)(_.UV,{style:{left:n},orphanBranch:(0,v.yn)(e)},"".concat(i,"-").concat(t))}));return e&&o&&l.push((0,z.tZ)(_.UV,{style:{right:"15px",height:"10px",bottom:t?"-".concat(T.d/2+1,"px"):"0",top:"auto"},orphanBranch:!1},"".concat(i,"-last"))),(0,z.tZ)(_.DN,{isLast:t,hasToggler:e,orphanBranch:se(a),children:l})}renderSpanTreeToggler({left:e}){const{numOfSpanChildren:t,isRoot:n,showSpanTree:r}=this.props,s=(0,z.tZ)(_.jd,{direction:r?"up":"down"});if(t<=0)return(0,z.tZ)(_.rw,{style:{left:"".concat(e,"px")},children:this.renderSpanTreeConnector({hasToggler:!1})});const a=n?null:(0,z.tZ)("div",{children:s});return(0,z.BX)(_.rw,{style:{left:"".concat(e,"px")},hasToggler:!0,children:[this.renderSpanTreeConnector({hasToggler:!0}),(0,z.BX)(_.U1,{disabled:!!n,isExpanded:this.props.showSpanTree,errored:!1,onClick:e=>{e.stopPropagation(),n||this.props.toggleSpanTree()},children:[(0,z.tZ)(w.Z,{value:t}),a]})]})}renderTitle(){var e;const{span:t,treeDepth:n}=this.props,r=re(t)?(0,z.BX)("strong",{children:[re(t)," — "]}):"",s=null!==(e=function(e){switch(e.comparisonResult){case"matched":return e.description;case"baseline":return e.baselineSpan.description;case"regression":return e.regressionSpan.description;default:throw Error("Unknown comparisonResult")}}(t))&&void 0!==e?e:"matched"===t.comparisonResult?(0,d.t)("matched"):ne(t),a=n*(_.Ll/2);return(0,z.BX)(E.mw,{children:[this.renderSpanTreeToggler({left:a}),(0,z.tZ)(E.Wh,{style:{left:"".concat(a,"px"),width:"100%"},children:(0,z.BX)("span",{children:[r,s]})})]})}getSpanBarStyles(){const{theme:e,span:t,generateBounds:n}=this.props,r=n(t);function s(e){if(e)return"max(1px, ".concat(e,")")}switch(t.comparisonResult){case"matched":{const n=K(t.baselineSpan),a=K(t.regressionSpan);return n===a?{background:{color:void 0,width:s(oe(r.background)),hatch:!0},foreground:void 0}:n>a?{background:{color:e.textColor,width:s(oe(r.background))},foreground:{color:void 0,width:s(oe(r.foreground)),hatch:!0}}:{background:{color:e.purple200,width:s(oe(r.background))},foreground:{color:void 0,width:s(oe(r.foreground)),hatch:!0}}}case"regression":return{background:{color:e.purple200,width:s(oe(r.background))},foreground:void 0};case"baseline":return{background:{color:e.textColor,width:s(oe(r.background))},foreground:void 0};default:return t}}renderComparisonReportLabel(){const{span:e}=this.props;switch(e.comparisonResult){case"matched":{const t=K(e.baselineSpan),n=K(e.regressionSpan);let r;if(t===n&&(r=(0,z.tZ)(Te,{children:(0,d.t)("No change")})),t>n){const e=(0,k.bQ)(Math.abs(t-n));r=(0,z.tZ)(Ce,{children:(0,d.t)("- %s faster",e)})}if(t<n){const e=(0,k.bQ)(Math.abs(t-n));r=(0,z.tZ)(Ce,{children:(0,d.t)("+ %s slower",e)})}return r}case"baseline":return(0,z.tZ)(Te,{children:(0,d.t)("Only in baseline")});case"regression":return(0,z.tZ)(Te,{children:(0,d.t)("Only in this event")});default:return e}}renderHeader(e){var t,n;const{dividerPosition:r,addGhostDividerLineRef:s}=e,{spanNumber:a,span:o}=this.props,i="matched"===o.comparisonResult,l=this.state.showDetail&&i,p=this.getSpanBarStyles(),c=p.foreground?(0,z.tZ)(we,{spanBarHatch:null!==(t=p.foreground.hatch)&&void 0!==t&&t,style:{backgroundColor:p.foreground.color,width:p.foreground.width,display:l?"none":"block"}}):null;return(0,z.BX)(D.Qc,{showDetail:this.state.showDetail,children:[(0,z.tZ)(D.E5,{"data-type":"span-row-cell",showDetail:this.state.showDetail,style:{width:"calc(".concat((0,k.yI)(r)," - 0.5px)")},onClick:()=>{this.toggleDisplayDetail()},children:this.renderTitle()}),this.renderDivider(e),(0,z.BX)(D.E5,{"data-type":"span-row-cell",showDetail:this.state.showDetail,showStriping:a%2!=0,style:{width:"calc(".concat((0,k.yI)(1-r)," - 0.5px)")},onClick:()=>{this.toggleDisplayDetail()},children:[(0,z.BX)(De,{children:[(0,z.tZ)(we,{spanBarHatch:null!==(n=p.background.hatch)&&void 0!==n&&n,style:{backgroundColor:p.background.color,width:p.background.width,display:l?"none":"block"}}),c]}),this.renderComparisonReportLabel()]}),!this.state.showDetail&&(0,z.tZ)(C.Hr,{style:{width:"calc(".concat((0,k.yI)(r)," + 0.5px)"),display:"none"},children:(0,z.tZ)(C.xN,{ref:s(),style:{right:0},className:"hovering",onClick:e=>{e.stopPropagation()}})})]})}renderDetail(){if(!this.state.showDetail)return null;const{span:e,generateBounds:t}=this.props;return(0,z.tZ)(ye,{span:this.props.span,bounds:t(e)})}render(){return(0,z.BX)(D.X2,{visible:!0,"data-test-id":"span-row",children:[(0,z.tZ)(y.$,{children:e=>this.renderHeader(e)}),this.renderDetail()]})}}xe.displayName="SpanBar";const we=(0,r.Z)(U,{target:"ec08mrv3"})("position:absolute;left:0;height:16px;",(e=>(0,k.xW)(e,e.theme.purple200,e.theme.gray500)),";"),Te=(0,r.Z)("div",{target:"ec08mrv2"})("position:absolute;user-select:none;right:",(0,B.Z)(1),";line-height:",T.d-2*T.U,"px;top:",T.U,"px;font-size:",(e=>e.theme.fontSizeExtraSmall),";"),De=(0,r.Z)("div",{target:"ec08mrv1"})({name:"15tynyt",styles:"position:relative;margin-right:120px"}),Ce=(0,r.Z)(Te,{target:"ec08mrv0"})({name:"1efi8gv",styles:"font-weight:bold"}),Ee=(0,x.b)(xe);class _e extends s.Component{constructor(...e){super(...e),(0,Z.Z)(this,"state",{showSpanTree:!0}),(0,Z.Z)(this,"toggleSpanTree",(()=>{this.setState((e=>({showSpanTree:!e.showSpanTree})))}))}renderSpanChildren(){return this.state.showSpanTree?this.props.renderedSpanChildren:null}render(){const{span:e,treeDepth:t,continuingTreeDepths:n,spanNumber:r,isLast:a,isRoot:o,numOfSpanChildren:i,generateBounds:l}=this.props;return(0,z.BX)(s.Fragment,{children:[(0,z.tZ)(Ee,{span:e,treeDepth:t,continuingTreeDepths:n,spanNumber:r,isLast:a,isRoot:o,numOfSpanChildren:i,showSpanTree:this.state.showSpanTree,toggleSpanTree:this.toggleSpanTree,generateBounds:l}),this.renderSpanChildren()]})}}_e.displayName="SpanGroup";const ke=_e;class Be extends s.Component{constructor(...e){super(...e),(0,Z.Z)(this,"traceViewRef",(0,s.createRef)())}renderSpan({span:e,childSpans:t,spanNumber:n,treeDepth:r,continuingTreeDepths:a,isLast:o,isRoot:i,generateBounds:l}){var p,c;const d=null!==(p=null===(c=t)||void 0===c?void 0:c[ne(e)])&&void 0!==p?p:[];delete(t={...t})[ne(e)];const u=se(e)?{type:"orphan",depth:r}:r,h=o?a:[...a,u],m=d.reduce(((e,n,a)=>{const o="".concat(ne(n)),i=this.renderSpan({spanNumber:e.nextSpanNumber,isLast:a+1===d.length,isRoot:!1,span:n,childSpans:t,continuingTreeDepths:h,treeDepth:r+1,generateBounds:l});return e.renderedSpanChildren.push((0,z.tZ)(s.Fragment,{children:i.spanTree},o)),e.nextSpanNumber=i.nextSpanNumber,e}),{renderedSpanChildren:[],nextSpanNumber:n+1}),g=(0,z.tZ)(s.Fragment,{children:(0,z.tZ)(ke,{spanNumber:n,span:e,renderedSpanChildren:m.renderedSpanChildren,treeDepth:r,continuingTreeDepths:a,isRoot:i,isLast:o,numOfSpanChildren:d.length,generateBounds:l})});return{nextSpanNumber:m.nextSpanNumber,spanTree:g}}renderRootSpans(){const{baselineEvent:e,regressionEvent:t}=this.props,n=function({baselineEvent:e,regressionEvent:t}){const n=(0,v.k9)(e),r=(0,v.k9)(t),s=[],a={};for(const[e,t]of Object.entries(n.childSpans))a[e]=t.map((e=>({comparisonResult:"baseline",baselineSpan:e})));for(const[e,t]of Object.entries(r.childSpans))a[e]=t.map((e=>({comparisonResult:"regression",regressionSpan:e})));const o=[{type:"root",baselineSpan:(0,v.n0)(n),regressionSpan:(0,v.n0)(r)}];for(;o.length>0;){var i,l;const e=o.pop();if(!e)break;const{baselineSpan:t,regressionSpan:p}=e;if(0===W({baselineSpan:t,regressionSpan:p})){if("root"===e.type){const e=[{comparisonResult:"baseline",baselineSpan:t},{comparisonResult:"regression",regressionSpan:p}];s.push(...e)}continue}const c={comparisonResult:"matched",span_id:J({baselineSpan:t,regressionSpan:p}),op:t.op,description:t.description,baselineSpan:t,regressionSpan:p};"root"===e.type&&s.push(c);const{comparablePairs:d,children:u}=G({parent_span_id:c.span_id,baseChildren:null!==(i=n.childSpans[t.span_id])&&void 0!==i?i:[],regressionChildren:null!==(l=r.childSpans[p.span_id])&&void 0!==l?l:[]});o.push(...d),u.length>0&&(a[c.span_id]=u)}return s.sort(te),{rootSpans:s,childSpans:a}}({baselineEvent:e,regressionEvent:t}),{rootSpans:r,childSpans:a}=n,o=function(e){const t=Math.max(...e.map((e=>Q(e))));return e=>{switch(e.comparisonResult){case"matched":{const n=K(e.baselineSpan),r=K(e.regressionSpan),s=ae({duration:n,largestDuration:t}),a=ae({duration:r,largestDuration:t});return n>=r?{background:s,foreground:a,baseline:s,regression:a}:{background:a,foreground:s,baseline:s,regression:a}}case"regression":{const n=ae({duration:K(e.regressionSpan),largestDuration:t});return{background:n,foreground:void 0,baseline:void 0,regression:n}}case"baseline":{const n=ae({duration:K(e.baselineSpan),largestDuration:t});return{background:n,foreground:void 0,baseline:n,regression:void 0}}default:return e}}}(r);let i=1;return{spanTree:(0,z.tZ)(s.Fragment,{children:r.map(((e,t)=>{const n=this.renderSpan({isLast:t+1===r.length,isRoot:!0,span:e,childSpans:a,spanNumber:i,treeDepth:0,continuingTreeDepths:[],generateBounds:o});return i=n.nextSpanNumber,(0,z.tZ)(s.Fragment,{children:n.spanTree},String(t))}))},"root-spans-tree"),nextSpanNumber:i}}render(){const{spanTree:e}=this.renderRootSpans();return(0,z.tZ)(y.z,{interactiveLayerRef:this.traceViewRef,children:(0,z.tZ)(Re,{ref:this.traceViewRef,children:e})})}}Be.displayName="SpanTree";const Re=(0,r.Z)("div",{target:"em5yc8k0"})({name:"1wr20zt",styles:"overflow-x:hidden;border-bottom-left-radius:3px;border-bottom-right-radius:3px"}),Ne=Be,je=e=>{const{baselineEvent:t,regressionEvent:n}=e;if(!V(t)||!V(n))return(0,z.BX)(S.Z,{children:[(0,z.tZ)(f.FC,{color:"gray300",size:"lg"}),(0,z.tZ)("p",{children:(0,d.t)("One of the given events is not a transaction.")})]});const r=(0,v.PA)(t),s=(0,v.PA)(n);return r&&s?(0,z.tZ)(Ne,{baselineEvent:t,regressionEvent:n}):(0,z.BX)(S.Z,{children:[(0,z.tZ)(f.FC,{color:"gray300",size:"lg"}),(0,z.tZ)("p",{children:(0,d.t)("There is no trace found in either of the given transactions.")})]})};je.displayName="TraceView";const Xe=je;var Pe=n("./app/components/links/link.tsx"),Ie=n("./app/utils/performance/urls.ts");class Me extends s.Component{render(){const{baselineEvent:e,regressionEvent:t,organization:n,location:r,params:s}=this.props,{baselineEventSlug:a,regressionEventSlug:o}=s;if(!V(e)||!V(t))return null;const i=(0,v.k9)(e),l=(0,v.k9)(t),p=Math.abs(i.traceStartTimestamp-i.traceEndTimestamp),c=Math.abs(l.traceStartTimestamp-l.traceEndTimestamp);return(0,z.BX)(qe,{children:[(0,z.BX)(Fe,{children:[(0,z.tZ)(ze,{}),(0,z.BX)(Oe,{children:[(0,z.BX)(Ae,{children:[(0,z.tZ)(He,{children:(0,d.t)("Baseline Event")}),(0,z.BX)(Ve,{children:[(0,z.BX)("span",{children:[(0,d.t)("ID"),": "]}),(0,z.tZ)(Ge,{to:(0,Ie.D)(n.slug,a.trim(),e.title,r.query),children:We(e.eventID)})]})]}),(0,z.tZ)(Ue,{children:(0,z.tZ)("span",{children:(0,k.bQ)(p)})})]})]}),(0,z.BX)(Fe,{children:[(0,z.tZ)(Le,{}),(0,z.BX)(Oe,{children:[(0,z.BX)(Ae,{children:[(0,z.tZ)(He,{children:(0,d.t)("This Event")}),(0,z.BX)(Ve,{children:[(0,z.BX)("span",{children:[(0,d.t)("ID"),": "]}),(0,z.tZ)(Ge,{to:(0,Ie.D)(n.slug,o.trim(),t.title,r.query),children:We(t.eventID)})]})]}),(0,z.tZ)(Ue,{children:(0,z.tZ)("span",{children:(0,k.bQ)(c)})})]})]})]})}}Me.displayName="TransactionSummary";const qe=(0,r.Z)("div",{target:"e1r1roro9"})("display:flex;flex-direction:column;justify-content:space-between;align-content:space-between;padding-bottom:",(0,B.Z)(1),";>*+*{margin-top:",(0,B.Z)(.75),";}"),Fe=(0,r.Z)("div",{target:"e1r1roro8"})({name:"zjik7",styles:"display:flex"}),ze=(0,r.Z)("div",{target:"e1r1roro7"})("background-color:",(e=>e.theme.textColor),";height:100%;width:4px;margin-right:",(0,B.Z)(1),";"),Le=(0,r.Z)("div",{target:"e1r1roro6"})("background-color:",(e=>e.theme.purple200),";height:100%;width:4px;margin-right:",(0,B.Z)(1),";"),Oe=(0,r.Z)("div",{target:"e1r1roro5"})({name:"1d7peye",styles:"flex-grow:1;display:flex"}),Ue=(0,r.Z)("div",{target:"e1r1roro4"})("display:flex;align-items:center;font-size:",(e=>e.theme.headerFontSize),";line-height:1.2;margin-left:",(0,B.Z)(1),";"),Ae=(0,r.Z)("div",{target:"e1r1roro3"})("flex-grow:1;width:150px;font-size:",(e=>e.theme.fontSizeMedium),";"),He=(0,r.Z)("div",{target:"e1r1roro2"})({name:"16ceglb",styles:"font-weight:600"}),Ve=(0,r.Z)("div",{target:"e1r1roro1"})("color:",(e=>e.theme.gray300),";"),Ge=(0,r.Z)(Pe.Z,{target:"e1r1roro0"})("color:",(e=>e.theme.gray300),";");function We(e){return e.substring(0,8)}const Je=Me;class Qe extends s.Component{getTransactionName(){const{baselineEvent:e,regressionEvent:t}=this.props;return V(e)&&V(t)?e.title===t.title?e.title:(0,d.t)("mixed transaction names"):V(e)?e.title:V(t)?t.title:(0,d.t)("no transaction title found")}render(){const{baselineEvent:e,regressionEvent:t,organization:n,location:r,params:a}=this.props;return(0,z.BX)(s.Fragment,{children:[(0,z.BX)(m.h4,{children:[(0,z.BX)(m.oB,{children:[(0,z.tZ)(b.Z,{organization:n,location:r,transactionComparison:!0}),(0,z.tZ)(m.Dx,{children:this.getTransactionName()})]}),(0,z.tZ)(m.kP,{children:(0,z.tZ)(Je,{organization:n,location:r,params:a,baselineEvent:e,regressionEvent:t})})]}),(0,z.tZ)(m.uT,{children:(0,z.tZ)(Ke,{children:(0,z.tZ)(Xe,{baselineEvent:e,regressionEvent:t})})})]})}}Qe.displayName="TransactionComparisonContent";const Ke=(0,r.Z)(g.s_,{target:"er2yeog0"})({name:"17lgwpd",styles:"grid-column:1/span 2;overflow:hidden"}),$e=Qe;var Ye=n("./app/utils/withApi.tsx");class et extends s.Component{constructor(...e){super(...e),(0,Z.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,event:void 0})}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=e.orgSlug!==this.props.orgSlug,n=e.eventSlug!==this.props.eventSlug;this.state.isLoading||!t&&!n||this.fetchData()}fetchData(){const{orgSlug:e,eventSlug:t}=this.props,n="/organizations/".concat(e,"/events/").concat(t,"/"),r=Symbol("tableFetchID");this.setState({isLoading:!0,tableFetchID:r}),this.props.api.requestPromise(n,{method:"GET"}).then((e=>{this.state.tableFetchID===r&&this.setState({isLoading:!1,tableFetchID:void 0,error:null,event:e})})).catch((e=>{var t,n;this.setState({isLoading:!1,tableFetchID:void 0,error:null!==(t=null==e||null===(n=e.responseJSON)||void 0===n?void 0:n.detail)&&void 0!==t?t:null,event:void 0})}))}render(){const{isLoading:e,error:t,event:n}=this.state,r={isLoading:e,error:t,event:n};return this.props.children(r)}}et.displayName="FetchEvent";const tt=(0,Ye.Z)(et);class nt extends s.PureComponent{getEventSlugs(){const{baselineEventSlug:e,regressionEventSlug:t}=this.props.params;return{baselineEventSlug:"string"==typeof e?e.trim():void 0,regressionEventSlug:"string"==typeof t?t.trim():void 0}}fetchEvent(e,t){if(!e)return(0,z.tZ)(o.Z,{});const{organization:n}=this.props;return(0,z.tZ)(tt,{orgSlug:n.slug,eventSlug:e,children:t})}renderComparison({baselineEventSlug:e,regressionEventSlug:t}){return this.fetchEvent(e,(e=>this.fetchEvent(t,(t=>{if(e.isLoading||t.isLoading)return(0,z.tZ)(l.Z,{});if(e.error||t.error)return e.error&&a.Tb(e.error),t.error&&a.Tb(t.error),(0,z.tZ)(i.Z,{});if(!e.event||!t.event)return(0,z.tZ)(o.Z,{});const{organization:n,location:r,params:s}=this.props;return(0,z.tZ)($e,{organization:n,location:r,params:s,baselineEvent:e.event,regressionEvent:t.event})}))))}getDocumentTitle({baselineEventSlug:e,regressionEventSlug:t}){return"string"==typeof e&&"string"==typeof t?[(0,d.t)("Comparing %s to %s",e,t),(0,d.t)("Performance")].join(" - "):[(0,d.t)("Transaction Comparison"),(0,d.t)("Performance")].join(" - ")}render(){const{organization:e}=this.props,{baselineEventSlug:t,regressionEventSlug:n}=this.getEventSlugs();return(0,z.tZ)(c.Z,{title:this.getDocumentTitle({baselineEventSlug:t,regressionEventSlug:n}),orgSlug:e.slug,children:(0,z.tZ)(s.Fragment,{children:(0,z.tZ)(rt,{children:(0,z.tZ)(p.Z,{organization:e,children:this.renderComparison({baselineEventSlug:t,regressionEventSlug:n})})})})})}}nt.displayName="TransactionComparisonPage";const rt=(0,r.Z)(u.JH,{target:"e1thg8li0"})({name:"1hcx8jb",styles:"padding:0"}),st=(0,h.Z)(nt)},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,n)=>{var r;n.d(t,{Z:()=>s}),function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.WebVitals=1]="WebVitals",e[e.Tags=2]="Tags",e[e.Events=3]="Events",e[e.Spans=4]="Spans"}(r||(r={}));const s=r},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,n)=>{n.d(t,{q3:()=>i,_S:()=>l,xr:()=>p,tb:()=>c,qg:()=>d,Zq:()=>u});var r=n("./app/locale.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/views/performance/transactionSummary/filter.tsx"),o=n("./app/views/performance/transactionSummary/utils.tsx");let i;function l(e,t){const{p99:n,p95:s,p75:o,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:l?[["transaction.duration","<=".concat(l.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p50")},[i.p75]:{name:i.p75,query:o?[["transaction.duration","<=".concat(o.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p75")},[i.p95]:{name:i.p95,query:s?[["transaction.duration","<=".concat(s.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p95")},[i.p99]:{name:i.p99,query:n?[["transaction.duration","<=".concat(n.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p99")},[i.p100]:{name:i.p100,label:(0,r.t)("p100")}}}function p({orgSlug:e,transaction:t,projectID:n,query:r}){return{pathname:"/organizations/".concat(e,"/performance/summary/events/"),query:{transaction:t,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}function c(e){return t=(0,s.ro)(e.query.showTransactions,i.p100),Object.values(i).includes(t)?t:i.p100;var t}function d(e,t){var n,r;const s=l(t),a=null===(n=s[e].sort)||void 0===n?void 0:n.kind,o=null===(r=s[e].sort)||void 0===r?void 0:r.field,i={showTransactions:e};return a&&o&&(i.sort="".concat("desc"===a?"-":"").concat(o)),i}function u(e){switch(e){case o.K0.OUTLIER:return i.p100;case o.K0.SLOW:return i.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,n)=>{n.d(t,{Zn:()=>a,bZ:()=>o,vG:()=>i,oc:()=>l,oT:()=>p});var r=n("./app/utils/analytics.tsx"),s=n("./app/utils/queryString.tsx");function a(e){return(0,s.ro)(e.query.tagKey)}function o(e){(0,r.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function i({orgSlug:e,transaction:t,projectID:n,query:r}){return{pathname:function({orgSlug:e}){return"/organizations/".concat(e,"/performance/summary/tags/")}({orgSlug:e}),query:{transaction:t,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query,tagKey:r.tagKey}}}function l(e){var t,n;let r=null!==(t=(0,s.ro)(null===(n=e.query)||void 0===n?void 0:n.tagSort))&&void 0!==t?t:"-frequency";return["sumdelta"].find((e=>{var t;return null===(t=r)||void 0===t?void 0:t.includes(e)}))&&(r="-frequency"),r}function p(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const n=t.split("_");return{histogramField:t,bucketSize:parseInt(n[n.length-3],10),offset:parseInt(n[n.length-2],10),multiplier:parseInt(n[n.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,n)=>{n.d(t,{Pl:()=>s,oZ:()=>a,eH:()=>o,L0:()=>i,jb:()=>l});var r=n("./app/utils/performance/histogram/utils.tsx");function s({orgSlug:e,transaction:t,projectID:n,query:r}){return{pathname:function({orgSlug:e}){return"/organizations/".concat(e,"/performance/summary/vitals/")}({orgSlug:e}),query:{transaction:t,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}function a(e,t){const n=(0,r.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function o(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const n=e[t];for(let r=t+1;r<e.length;r++){const s=e[r];if(n.bin!==s.bin&&n.count!==s.count)return{point1:{x:t,y:Math.min(n.count,s.count)},point2:{x:r,y:Math.max(n.count,s.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function i(e,t){const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1]))return null;const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:r[0],y:r[1]}}}function l(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;const r=(e.x-t.point1.x)/(t.point2.x-t.point1.x),s=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*r,y:n.point1.y+(n.point2.y-n.point1.y)*s}}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_compare_index_tsx.89cd499b0fe4925d7b7aea17825a2720.js.map