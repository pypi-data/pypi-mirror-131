"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_dashboardsV2_manage_index_tsx"],{"./app/components/activity/item/avatar.tsx":(e,t,a)=>{a.d(t,{Z:()=>l});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=a("./app/components/avatar/userAvatar.tsx"),n=a("./app/components/placeholder.tsx"),i=a("./app/icons/index.tsx"),o=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d({className:e,type:t,user:a,size:s=38}){return a?(0,o.tZ)(r.Z,{user:a,size:s,className:e}):"system"===t?(0,o.tZ)(p,{className:e,size:s,children:(0,o.tZ)(c,{size:"md"})}):(0,o.tZ)(n.Z,{className:e,width:"".concat(s,"px"),height:"".concat(s,"px"),shape:"circle"})}d.displayName="ActivityAvatar";const l=d,p=(0,s.Z)("span",{target:"ety7k0b1"})("display:flex;justify-content:center;align-items:center;width:",(e=>e.size),"px;height:",(e=>e.size),"px;background-color:",(e=>e.theme.textColor),";color:",(e=>e.theme.background),";border-radius:50%;"),c=(0,s.Z)(i.iW,{target:"ety7k0b0"})({name:"1p2ly5v",styles:"padding-bottom:3px"})},"./app/views/asyncView.tsx":(e,t,a)=>{a.d(t,{Z:()=>i}),a("../node_modules/react/index.js");var s=a("./app/components/asyncComponent.tsx"),r=a("./app/components/sentryDocumentTitle.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends s.Z{getTitle(){return""}render(){return(0,n.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/dashboardsV2/manage/index.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>ye});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react-router/es/index.js")),i=a("../node_modules/lodash/pick.js"),o=a.n(i),d=a("./app/components/acl/feature.tsx"),l=a("./app/components/alert.tsx"),p=a("./app/components/button.tsx"),c=a("./app/components/dropdownControl.tsx"),h=a("./app/components/loadingIndicator.tsx"),m=a("./app/components/noProjectMessage.tsx"),g=a("./app/components/searchBar.tsx"),u=a("./app/components/sentryDocumentTitle.tsx"),b=a("./app/icons/index.tsx"),Z=a("./app/locale.tsx"),y=a("./app/styles/organization.tsx"),x=a("./app/styles/space.tsx"),v=a("./app/utils/analytics.tsx"),w=a("./app/utils/queryString.tsx"),f=a("./app/utils/withApi.tsx"),k=a("./app/utils/withOrganization.tsx"),D=a("./app/views/asyncView.tsx"),z=a("../node_modules/react/index.js"),C=a("./images/dashboard/widget-area.svg"),_=a("./images/dashboard/widget-bar.svg"),q=a("./images/dashboard/widget-big-number.svg"),S=a("./images/dashboard/widget-line-1.svg"),j=a("./images/dashboard/widget-table.svg"),N=a("./images/dashboard/widget-world-map.svg"),B=a("./app/actionCreators/dashboards.tsx"),A=a("./app/actionCreators/indicator.tsx"),M=a("./app/components/confirm.tsx"),I=a("./app/components/emptyStateWarning.tsx"),O=a("./app/components/menuItem.tsx"),P=a("./app/components/pagination.tsx"),E=a("./app/components/timeSince.tsx"),F=a("./app/views/dashboardsV2/types.tsx"),V=a("./app/views/dashboardsV2/contextMenu.tsx"),X=a("./app/views/dashboardsV2/utils.tsx"),L=a("./app/components/activity/item/avatar.tsx"),K=a("./app/components/card.tsx"),H=a("./app/components/links/link.tsx"),R=a("./app/styles/overflowEllipsis.tsx"),T=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function J({title:e,detail:t,createdBy:a,renderWidgets:s,dateStatus:r,to:n,onEventClick:i,renderContextMenu:o}){return(0,T.tZ)(H.Z,{"data-test-id":"card-".concat(e),onClick:function(){null==i||i()},to:n,children:(0,T.BX)(G,{interactive:!0,children:[(0,T.BX)(U,{children:[(0,T.BX)(Q,{children:[(0,T.tZ)(Y,{children:e}),(0,T.tZ)($,{children:t})]}),(0,T.tZ)(W,{children:a?(0,T.tZ)(L.Z,{type:"user",user:a,size:34}):(0,T.tZ)(L.Z,{type:"system",size:34})})]}),(0,T.tZ)(ee,{children:s()}),(0,T.BX)(te,{children:[(0,T.tZ)(ae,{children:r?(0,T.BX)(se,{children:[(0,Z.t)("Created")," ",r]}):(0,T.tZ)(se,{})}),o&&o()]})]})})}J.displayName="DashboardCard";const W=(0,r.Z)("span",{target:"emkzkq79"})("border:3px solid ",(e=>e.theme.border),";border-radius:50%;height:min-content;"),Q=(0,r.Z)("div",{target:"emkzkq78"})("flex-grow:1;overflow:hidden;margin-right:",(0,x.Z)(1),";"),G=(0,r.Z)(K.Z,{target:"emkzkq77"})({name:"1h9y2eg",styles:"justify-content:space-between;height:100%;&:focus,&:hover{top:-1px;}"}),U=(0,r.Z)("div",{target:"emkzkq76"})("display:flex;padding:",(0,x.Z)(1.5)," ",(0,x.Z)(2),";"),Y=(0,r.Z)("div",{target:"emkzkq75"})("color:",(e=>e.theme.textColor),";",R.Z,";"),$=(0,r.Z)("div",{target:"emkzkq74"})("font-family:",(e=>e.theme.text.familyMono),";font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray300),";",R.Z,";line-height:1.5;"),ee=(0,r.Z)("div",{target:"emkzkq73"})("background:",(e=>e.theme.gray100),";padding:",(0,x.Z)(1.5)," ",(0,x.Z)(2),";max-height:150px;min-height:150px;overflow:hidden;"),te=(0,r.Z)("div",{target:"emkzkq72"})("display:flex;justify-content:space-between;align-items:center;padding:",(0,x.Z)(1)," ",(0,x.Z)(2),";"),ae=(0,r.Z)("div",{target:"emkzkq71"})("font-size:",(e=>e.theme.fontSizeSmall),";display:grid;grid-column-gap:",(0,x.Z)(1),";color:",(e=>e.theme.textColor),";",R.Z,";"),se=(0,r.Z)("span",{target:"emkzkq70"})("color:",(e=>e.theme.purple300),";padding-left:",(0,x.Z)(1),";"),re=J;function ne({api:e,organization:t,location:a,dashboards:s,pageLinks:r,onDashboardsChange:i}){function o(e){switch(e){case F.FO.BAR:return _;case F.FO.AREA:case F.FO.TOP_N:return C;case F.FO.BIG_NUMBER:return q;case F.FO.TABLE:return j;case F.FO.WORLD_MAP:return N;case F.FO.LINE:default:return S}}return(0,T.BX)(z.Fragment,{children:[null!=s&&s.length?(0,T.tZ)(ie,{children:null==s?void 0:s.map(((r,n)=>(0,T.tZ)(re,{title:"default-overview"===r.id?"Default Dashboard":r.title,to:{pathname:"/organizations/".concat(t.slug,"/dashboard/").concat(r.id,"/"),query:{...a.query}},detail:(0,Z.tn)("%s widget","%s widgets",r.widgetDisplay.length),dateStatus:r.dateCreated?(0,T.tZ)(E.Z,{date:r.dateCreated}):void 0,createdBy:r.createdBy,renderWidgets:()=>(0,T.tZ)(oe,{children:r.widgetDisplay.map(((e,t)=>e===F.FO.BIG_NUMBER?(0,T.tZ)(de,{children:(0,T.tZ)(pe,{src:o(e)})},"".concat(t,"-").concat(e)):(0,T.tZ)(le,{children:(0,T.tZ)(pe,{src:o(e)})},"".concat(t,"-").concat(e))))}),renderContextMenu:()=>(0,T.BX)(V.Z,{children:[(0,T.tZ)(O.Z,{"data-test-id":"dashboard-delete",disabled:s.length<=1,onClick:a=>{a.preventDefault(),(0,M._)({message:(0,Z.t)("Are you sure you want to delete this dashboard?"),priority:"danger",onConfirm:()=>function(a){(0,B.iM)(e,t.slug,a.id).then((()=>{(0,v.ec)({eventKey:"dashboards_manage.delete",eventName:"Dashboards Manager: Dashboard Deleted",organization_id:parseInt(t.id,10),dashboard_id:parseInt(a.id,10)}),i(),(0,A.S9)((0,Z.t)("Dashboard deleted"))})).catch((()=>{(0,A.Iw)((0,Z.t)("Error deleting Dashboard"))}))}(r)})},children:(0,Z.t)("Delete")}),(0,T.tZ)(O.Z,{"data-test-id":"dashboard-duplicate",onClick:a=>{a.preventDefault(),function(a){(0,B.AK)(e,t.slug,a.id).then((s=>{const r=(0,X.qk)(s);r.widgets.map((e=>e.id=void 0)),(0,B.JR)(e,t.slug,r,!0).then((()=>{(0,v.ec)({eventKey:"dashboards_manage.duplicate",eventName:"Dashboards Manager: Dashboard Duplicated",organization_id:parseInt(t.id,10),dashboard_id:parseInt(a.id,10)}),i(),(0,A.S9)((0,Z.t)("Dashboard duplicated"))}))})).catch((()=>(0,A.Iw)((0,Z.t)("Error duplicating Dashboard"))))}(r)},children:(0,Z.t)("Duplicate")})]})},"".concat(n,"-").concat(r.id))))}):(0,T.tZ)(I.Z,{children:(0,T.tZ)("p",{children:(0,Z.t)("Sorry, no Dashboards match your filters.")})}),(0,T.tZ)(ce,{pageLinks:r,onCursor:(e,a,s,r)=>{var i,o,d;const l={...s,cursor:e};Number(null!==(i=null==e||null===(o=e.split)||void 0===o||null===(d=o.call(e,":"))||void 0===d?void 0:d[1])&&void 0!==i?i:0)<=0&&-1===r&&delete l.cursor,(0,v.ec)({eventKey:"dashboards_manage.paginate",eventName:"Dashboards Manager: Paginate",organization_id:parseInt(t.id,10)}),n.browserHistory.push({pathname:a,query:l})}})]})}ne.displayName="DashboardList";const ie=(0,r.Z)("div",{target:"e8t3ebt5"})("display:grid;grid-template-columns:minmax(100px, 1fr);grid-template-rows:repeat(3, max-content);grid-gap:",(0,x.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(2, minmax(100px, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){grid-template-columns:repeat(3, minmax(100px, 1fr));}"),oe=(0,r.Z)("div",{target:"e8t3ebt4"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;grid-gap:",(0,x.Z)(.25),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[4]),"){grid-template-columns:repeat(8, minmax(0, 1fr));}"),de=(0,r.Z)("div",{target:"e8t3ebt3"})("display:flex;align-items:flex-start;width:100%;height:100%;grid-area:span 1/span 2;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-area:span 1/span 1;}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-area:span 1/span 2;}"),le=(0,r.Z)("div",{target:"e8t3ebt2"})({name:"1ni4knu",styles:"display:flex;align-items:flex-start;width:100%;height:100%;grid-area:span 2/span 2"}),pe=(0,r.Z)("img",{target:"e8t3ebt1"})({name:"w1atjl",styles:"width:100%;height:100%"}),ce=(0,r.Z)(P.Z,{target:"e8t3ebt0"})("margin-bottom:",(0,x.Z)(3),";"),he=(0,f.Z)(ne),me=[{label:(0,Z.t)("My Dashboards"),value:"mydashboards"},{label:(0,Z.t)("Dashboard Name (A-Z)"),value:"title"},{label:(0,Z.t)("Date Created (Newest)"),value:"-dateCreated"},{label:(0,Z.t)("Date Created (Oldest)"),value:"dateCreated"},{label:(0,Z.t)("Most Popular"),value:"mostPopular"},{label:(0,Z.t)("Recently Viewed"),value:"recentlyViewed"}];class ge extends D.Z{constructor(...e){super(...e),(0,s.Z)(this,"handleSortChange",(e=>{const{location:t}=this.props;(0,v.ec)({eventKey:"dashboards_manage.change_sort",eventName:"Dashboards Manager: Sort By Changed",organization_id:parseInt(this.props.organization.id,10),sort:e}),n.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,sort:e}})}))}getEndpoints(){const{organization:e,location:t}=this.props;return[["dashboards","/organizations/".concat(e.slug,"/dashboards/"),{query:{...o()(t.query,["cursor","query"]),sort:this.getActiveSort().value,per_page:"9"}}]]}getActiveSort(){const{location:e}=this.props,t=(0,w.ro)(e.query.sort,"mydashboards");return me.find((e=>e.value===t))||me[0]}onDashboardsChange(){this.reloadData()}handleSearch(e){const{location:t,router:a}=this.props;(0,v.ec)({eventKey:"dashboards_manage.search",eventName:"Dashboards Manager: Search",organization_id:parseInt(this.props.organization.id,10)}),a.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:e}})}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}renderActions(){const e=this.getActiveSort();return(0,T.BX)(Ze,{children:[(0,T.tZ)(g.Z,{defaultQuery:"",query:this.getQuery(),placeholder:(0,Z.t)("Search Dashboards"),onSearch:e=>this.handleSearch(e)}),(0,T.tZ)(c.ZP,{buttonProps:{prefix:(0,Z.t)("Sort By")},label:e.label,children:me.map((({label:t,value:a})=>(0,T.tZ)(c.hP,{onSelect:this.handleSortChange,eventKey:a,isActive:a===e.value,children:t},a)))})]})}renderNoAccess(){return(0,T.tZ)(y.JH,{children:(0,T.tZ)(l.Z,{type:"warning",children:(0,Z.t)("You don't have access to this feature")})})}renderDashboards(){const{dashboards:e,dashboardsPageLinks:t}=this.state,{organization:a,location:s,api:r}=this.props;return(0,T.tZ)(he,{api:r,dashboards:e,organization:a,pageLinks:t,location:s,onDashboardsChange:()=>this.onDashboardsChange()})}getTitle(){return(0,Z.t)("Dashboards")}onCreate(){const{organization:e,location:t}=this.props;(0,v.ec)({eventKey:"dashboards_manage.create.start",eventName:"Dashboards Manager: Dashboard Create Started",organization_id:parseInt(e.id,10)}),n.browserHistory.push({pathname:"/organizations/".concat(e.slug,"/dashboards/new/"),query:t.query})}renderLoading(){return(0,T.tZ)(y.JH,{children:(0,T.tZ)(h.Z,{})})}renderBody(){const{organization:e}=this.props;return(0,T.tZ)(d.Z,{organization:e,features:["dashboards-edit"],renderDisabled:this.renderNoAccess,children:(0,T.tZ)(u.Z,{title:(0,Z.t)("Dashboards"),orgSlug:e.slug,children:(0,T.tZ)(ue,{children:(0,T.tZ)(m.Z,{organization:e,children:(0,T.BX)(y.JH,{children:[(0,T.BX)(be,{children:[(0,Z.t)("Dashboards"),(0,T.tZ)(p.ZP,{"data-test-id":"dashboard-create",onClick:e=>{e.preventDefault(),this.onCreate()},priority:"primary",icon:(0,T.tZ)(b.N_,{size:"xs",isCircled:!0}),children:(0,Z.t)("Create Dashboard")})]}),this.renderActions(),this.renderDashboards()]})})})})})}}const ue=(0,r.Z)(y.JH,{target:"e1bpet4v2"})({name:"1hcx8jb",styles:"padding:0"}),be=(0,r.Z)("div",{target:"e1bpet4v1"})("display:flex;align-items:flex-end;font-size:",(e=>e.theme.headerFontSize),";color:",(e=>e.theme.textColor),";justify-content:space-between;margin-bottom:",(0,x.Z)(2),";"),Ze=(0,r.Z)("div",{target:"e1bpet4v0"})("display:grid;grid-template-columns:auto max-content;grid-gap:",(0,x.Z)(2),";margin-bottom:",(0,x.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:auto;}"),ye=(0,f.Z)((0,k.Z)(ge))}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_manage_index_tsx.ed0a881d1bac44e2788597dd66683d63.js.map