"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationIntegrations_integrationListDirectory_tsx"],{"./app/components/sentryAppIcon.tsx":(t,e,n)=>{n.d(e,{Z:()=>a}),n("../node_modules/react/index.js");var s=n("./app/components/avatar/sentryAppAvatar.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=({sentryApp:t,size:e})=>(0,i.tZ)(s.Z,{sentryApp:t,size:e,isColor:!0});o.displayName="SentryAppIcon";const a=o},"./app/utils/createFuzzySearch.tsx":(t,e,n)=>{n.d(e,{I:()=>i}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=n("./app/constants/index.tsx");async function i(t,e){if(!e.keys)throw new Error("You need to define `options.keys`");const{default:i}=await n.e("node_modules_fuse_js_dist_fuse_js").then(n.t.bind(n,"../node_modules/fuse.js/dist/fuse.js",23));return new i(t,{...s.UT,...e})}},"./app/views/organizationIntegrations/integrationListDirectory.tsx":(t,e,n)=>{n.r(e),n.d(e,{IntegrationListDirectory:()=>at,default:()=>dt});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/web.url.js"),n("../node_modules/react/index.js")),a=n("../node_modules/react-router/es/index.js"),r=n("../node_modules/lodash/debounce.js"),l=n.n(r),p=n("../node_modules/lodash/flatten.js"),c=n.n(p),d=n("../node_modules/lodash/groupBy.js"),g=n.n(d),u=n("../node_modules/lodash/startCase.js"),h=n.n(u),m=n("../node_modules/lodash/uniq.js"),y=n.n(m),Z=n("../node_modules/query-string/index.js"),x=n("./app/components/asyncComponent.tsx"),f=n("./app/components/forms/selectControl.tsx"),v=n("./app/components/hookOrDefault.tsx"),b=n("./app/components/links/externalLink.tsx"),w=n("./app/components/panels/index.tsx"),j=n("./app/components/searchBar.tsx"),I=n("./app/components/sentryAppIcon.tsx"),_=n("./app/components/sentryDocumentTitle.tsx"),z=n("./app/locale.tsx"),k=n("./app/styles/space.tsx"),A=n("./app/utils/createFuzzySearch.tsx"),S=n("./app/utils/integrationUtil.tsx"),C=n("./app/utils/withOrganization.tsx"),P=n("./app/views/settings/components/settingsPageHeader.tsx"),D=n("./app/views/settings/organization/permissionAlert.tsx"),N=n("./app/views/organizationIntegrations/constants.tsx"),L=n("./app/components/alert.tsx"),B=n("./app/components/button.tsx"),T=n("./app/components/links/link.tsx"),F=n("./app/icons/index.tsx"),O=n("./app/plugins/components/pluginIcon.tsx");const X=(0,i.Z)("div",{target:"e11o7gjf0"})("padding:0px ",(0,k.Z)(3)," 0px 68px;");var U=n("./app/views/organizationIntegrations/integrationStatus.tsx"),q=n("./app/views/organizationIntegrations/pluginDeprecationAlert.tsx"),R=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const V={plugin:"plugins",firstParty:"integrations",sentryApp:"sentry-apps",documentIntegration:"document-integrations"},E=t=>{const{organization:e,type:n,slug:s,displayName:i,status:o,publishStatus:a,configurations:r,categories:l,alertText:p,resolveText:c,plugin:d,customAlert:g,customIcon:u}=t,m="internal"===a?"/settings/".concat(e.slug,"/developer-settings/").concat(s,"/"):"/settings/".concat(e.slug,"/").concat(V[n],"/").concat(s,"/");return(0,R.BX)(H,{noPadding:!0,"data-test-id":s,children:[(0,R.BX)(W,{children:[null!=u?u:(0,R.tZ)(O.ZP,{size:36,pluginId:s}),(0,R.BX)(M,{children:[(0,R.tZ)(Y,{to:m,children:i}),(0,R.BX)(J,{children:[o?(0,R.tZ)(U.Z,{status:o}):(0,R.tZ)($,{to:m,children:(0,z.t)("Learn More")}),"sentryApp"===n?"published"!==a&&(0,R.tZ)(tt,{status:a}):r>0?(0,R.tZ)(K,{to:"".concat(m,"?tab=configurations"),children:"".concat(r," Configuration").concat(r>1?"s":"")}):null]})]}),(0,R.tZ)(Q,{children:null==l?void 0:l.map((t=>(0,R.tZ)(et,{category:h()(t),priority:t===a},t)))})]}),p&&(0,R.tZ)(X,{children:(0,R.BX)(L.Z,{type:"warning",icon:(0,R.tZ)(F.FC,{size:"sm"}),children:[(0,R.tZ)("span",{children:p}),(0,R.tZ)(nt,{href:"".concat(m,"?tab=configurations&referrer=directory_resolve_now"),size:"xsmall",onClick:()=>(0,S.Db)("integrations.resolve_now_clicked",{integration_type:(0,S.ts)(n),integration:s,organization:e}),children:c||(0,z.t)("Resolve Now")})]})}),g,(null==d?void 0:d.deprecationDate)&&(0,R.tZ)(G,{children:(0,R.tZ)(q.Z,{organization:e,plugin:d})})]})};E.displayName="IntegrationRow";const G=(0,i.Z)("div",{target:"ejka4t011"})("padding:0px ",(0,k.Z)(3)," 0px 68px;"),H=(0,i.Z)(w.Lv,{target:"ejka4t010"})({name:"qdeacm",styles:"flex-direction:column"}),W=(0,i.Z)("div",{target:"ejka4t09"})("display:flex;align-items:center;padding:",(0,k.Z)(2),";"),Q=(0,i.Z)(W,{target:"ejka4t08"})("padding:0 ",(0,k.Z)(2),";"),M=(0,i.Z)("div",{target:"ejka4t07"})({name:"1uy7vsb",styles:"flex:1;padding:0 16px"}),Y=(0,i.Z)(T.Z,{target:"ejka4t06"})({name:"1efi8gv",styles:"font-weight:bold"}),J=(0,i.Z)("div",{target:"ejka4t05"})({name:"4xwio5",styles:"display:flex;align-items:center;margin-top:6px;font-size:0.8em"}),K=(0,i.Z)(T.Z,{target:"ejka4t04"})("color:",(t=>t.theme.gray300),";&:before{content:'|';color:",(t=>t.theme.gray200),";margin-right:",(0,k.Z)(.75),";font-weight:normal;}"),$=(0,i.Z)(T.Z,{target:"ejka4t03"})("color:",(t=>t.theme.gray300),";"),tt=(0,i.Z)((({status:t,...e})=>(0,R.tZ)("div",{...e,children:(0,z.t)("".concat(t))})),{target:"ejka4t02"})("color:",(t=>"published"===t.status?t.theme.success:t.theme.gray300),";font-weight:light;margin-right:",(0,k.Z)(.75),";text-transform:capitalize;&:before{content:'|';color:",(t=>t.theme.gray200),";margin-right:",(0,k.Z)(.75),";font-weight:normal;}"),et=(0,i.Z)((({priority:t,category:e,...n})=>(0,R.tZ)("div",{...n,children:e})),{target:"ejka4t01"})("display:flex;flex-direction:row;padding:1px 10px;background:",(t=>t.priority?t.theme.purple200:t.theme.gray100),";border-radius:20px;font-size:",(0,k.Z)(1.5),";margin-right:",(0,k.Z)(1),";line-height:",(0,k.Z)(3),";text-align:center;color:",(t=>t.priority?t.theme.white:t.theme.gray500),";"),nt=(0,i.Z)(B.ZP,{target:"ejka4t00"})("color:",(t=>t.theme.subText),";float:right;"),st=E,it=(0,v.Z)({hookName:"component:first-party-integration-alert",defaultComponent:()=>null}),ot={threshold:.3,location:0,distance:100,includeScore:!0,keys:["slug","key","name","id"]};class at extends x.Z{constructor(...t){super(...t),(0,s.Z)(this,"shouldReload",!0),(0,s.Z)(this,"reloadOnVisible",!0),(0,s.Z)(this,"shouldReloadOnVisible",!0),(0,s.Z)(this,"getAppInstall",(t=>{var e;return null===(e=this.state.appInstalls)||void 0===e?void 0:e.find((e=>e.app.slug===t.slug))})),(0,s.Z)(this,"getPopularityWeight",(t=>{var e,n,s,i;return null!==(e=null!==(n=null===(s=this.state.publishedApps)||void 0===s||null===(i=s.find((e=>e===t)))||void 0===i?void 0:i.popularity)&&void 0!==n?n:N.ek[t.slug])&&void 0!==e?e:1})),(0,s.Z)(this,"sortByName",((t,e)=>t.slug.localeCompare(e.slug))),(0,s.Z)(this,"sortByPopularity",((t,e)=>{const n=this.getPopularityWeight(t);return this.getPopularityWeight(e)-n})),(0,s.Z)(this,"sortByInstalled",((t,e)=>this.getInstallValue(e)-this.getInstallValue(t))),(0,s.Z)(this,"debouncedTrackIntegrationSearch",l()(((t,e)=>{(0,S.Db)("integrations.directory_item_searched",{view:"integrations_directory",search_term:t,num_results:e,organization:this.props.organization})}),1e3)),(0,s.Z)(this,"getFilterParameters",(()=>{const{category:t,search:e}=Z.parse(this.props.location.search),n=Array.isArray(t)?t[0]:t||"";return{searchInput:Array.isArray(e)?e[0]:e||"",selectedCategory:n}})),(0,s.Z)(this,"updateQueryString",(()=>{const{searchInput:t,selectedCategory:e}=this.state,n=Z.stringify({...Z.parse(this.props.location.search),search:t||void 0,category:e||void 0});a.browserHistory.replace({pathname:this.props.location.pathname,search:n?"?".concat(n):void 0})})),(0,s.Z)(this,"updateDisplayedList",(()=>{const{fuzzy:t,list:e,searchInput:n,selectedCategory:s}=this.state;let i=e;if(n&&t){const e=t.search(n);i=this.sortIntegrations(e.map((t=>t.item)))}return s&&(i=i.filter((t=>(0,S.G2)(t).includes(s)))),this.setState({displayedList:i}),i})),(0,s.Z)(this,"handleSearchChange",(async t=>{this.setState({searchInput:t},(()=>{this.updateQueryString();const e=this.updateDisplayedList();t&&this.debouncedTrackIntegrationSearch(t,e.length)}))})),(0,s.Z)(this,"onCategorySelect",(({value:t})=>{this.setState({selectedCategory:t},(()=>{this.updateQueryString(),this.updateDisplayedList(),t&&(0,S.Db)("integrations.directory_category_selected",{view:"integrations_directory",category:t,organization:this.props.organization})}))})),(0,s.Z)(this,"renderProvider",(t=>{var e,n;const{organization:s}=this.props,i=null!==(e=null===(n=this.state.integrations)||void 0===n?void 0:n.filter((e=>e.provider.key===t.key)))&&void 0!==e?e:[];return(0,R.tZ)(st,{"data-test-id":"integration-row",organization:s,type:"firstParty",slug:t.slug,displayName:t.name,status:i.length?"Installed":"Not Installed",publishStatus:"published",configurations:i.length,categories:(0,S.G2)(t),alertText:(0,S.Sv)(i),resolveText:(0,z.t)("Update Now"),customAlert:(0,R.tZ)(it,{integrations:i,wrapWithContainer:!0})},"row-".concat(t.key))})),(0,s.Z)(this,"renderPlugin",(t=>{const{organization:e}=this.props,n=t.isHidden,s="".concat(t.name," ").concat(n?"(Legacy)":"");return n&&!t.projectList.length?null:(0,R.tZ)(st,{"data-test-id":"integration-row",organization:e,type:"plugin",slug:t.slug,displayName:s,status:t.projectList.length?"Installed":"Not Installed",publishStatus:"published",configurations:t.projectList.length,categories:(0,S.G2)(t),plugin:t},"row-plugin-".concat(t.id))})),(0,s.Z)(this,"renderSentryApp",(t=>{const{organization:e}=this.props,n=(0,S.Az)(this.getAppInstall(t)),s=(0,S.G2)(t);return(0,R.tZ)(st,{"data-test-id":"integration-row",organization:e,type:"sentryApp",slug:t.slug,displayName:t.name,status:n,publishStatus:t.status,configurations:0,categories:s,customIcon:(0,R.tZ)(I.Z,{sentryApp:t,size:36})},"sentry-app-row-".concat(t.slug))})),(0,s.Z)(this,"renderDocumentIntegration",(t=>{const{organization:e}=this.props;return(0,R.tZ)(st,{organization:e,type:"documentIntegration",slug:t.slug,displayName:t.name,publishStatus:"published",configurations:0,categories:(0,S.G2)(t)},"doc-int-".concat(t.slug))})),(0,s.Z)(this,"renderIntegration",(t=>(0,S.OI)(t)?this.renderSentryApp(t):(0,S.vg)(t)?this.renderPlugin(t):(0,S.jn)(t)?this.renderDocumentIntegration(t):this.renderProvider(t)))}getDefaultState(){return{...super.getDefaultState(),list:[],displayedList:[],selectedCategory:""}}onLoadAllEndpointsSuccess(){const{publishedApps:t,orgOwnedApps:e,extraApp:n,plugins:s}=this.state,i=t||[];null!==e&&n&&e.push(n);const o=null==e?void 0:e.filter((t=>!i.find((e=>e.slug===t.slug)))),a=[].concat(i).concat(null!=o?o:[]).concat(this.providers).concat(null!=s?s:[]).concat(Object.values(N.Uc)),r=this.sortIntegrations(a),{searchInput:l,selectedCategory:p}=this.getFilterParameters();this.setState({list:r,searchInput:l,selectedCategory:p},(()=>{this.updateDisplayedList(),this.trackPageViewed()}))}trackPageViewed(){const{integrations:t,publishedApps:e,plugins:n}=this.state,s=new Set;null==t||t.forEach((t=>{s.add(t.provider.key)})),null==e||e.filter(this.getAppInstall).forEach((t=>{s.add(t.slug)})),null==n||n.forEach((t=>{t.projectList.length&&s.add(t.slug)})),(0,S.Db)("integrations.index_viewed",{integrations_installed:s.size,view:"integrations_directory",organization:this.props.organization},{startSession:!0})}getEndpoints(){const{orgId:t}=this.props.params,e=[["config","/organizations/".concat(t,"/config/integrations/")],["integrations","/organizations/".concat(t,"/integrations/"),{query:{includeConfig:0}}],["orgOwnedApps","/organizations/".concat(t,"/sentry-apps/")],["publishedApps","/sentry-apps/",{query:{status:"published"}}],["appInstalls","/organizations/".concat(t,"/sentry-app-installations/")],["plugins","/organizations/".concat(t,"/plugins/configs/")]],n=new URLSearchParams(this.props.location.search).get("extra_app");return n&&e.push(["extraApp","/sentry-apps/".concat(n,"/")]),e}get unmigratableReposByOrg(){return g()(this.state.unmigratableRepos,(t=>t.name.split("/")[0]))}get providers(){var t,e;return null!==(t=null===(e=this.state.config)||void 0===e?void 0:e.providers)&&void 0!==t?t:[]}getInstallValue(t){const{integrations:e}=this.state;if((0,S.vg)(t))return t.projectList.length>0?2:0;if((0,S.OI)(t)){const e=this.getAppInstall(t);return e?"pending"===e.status?1:2:0}return(0,S.jn)(t)?0:null!=e&&e.find((e=>e.provider.key===t.key))?2:0}sortIntegrations(t){return t.sort(((t,e)=>{const n=this.sortByInstalled(t,e);if(0!==n)return n;const s=this.sortByPopularity(t,e);return 0!==s?s:this.sortByName(t,e)}))}async componentDidUpdate(t,e){this.state.list.length!==e.list.length&&await this.createSearch()}async createSearch(){const{list:t}=this.state;this.setState({fuzzy:await(0,A.I)(t||[],ot)})}renderBody(){const{orgId:t}=this.props.params,{displayedList:e,list:n,searchInput:s,selectedCategory:i}=this.state,a=(0,z.t)("Integrations"),r=y()(c()(n.map(S.G2))).sort();return(0,R.BX)(o.Fragment,{children:[(0,R.tZ)(_.Z,{title:a,orgSlug:t}),!this.props.hideHeader&&(0,R.tZ)(P.Z,{title:a,action:(0,R.BX)(rt,{children:[(0,R.tZ)(f.Z,{name:"select-categories",onChange:this.onCategorySelect,value:i,options:[{value:"",label:(0,z.t)("All Categories")},...r.map((t=>({value:t,label:h()(t)})))]}),(0,R.tZ)(j.Z,{query:s||"",onChange:this.handleSearchChange,placeholder:(0,z.t)("Filter Integrations..."),width:"25em"})]})}),(0,R.tZ)(D.Z,{access:["org:integrations"]}),(0,R.tZ)(w.s_,{children:(0,R.tZ)(w.N,{children:e.length?e.map(this.renderIntegration):(0,R.BX)(lt,{children:[(0,R.tZ)(pt,{children:(0,z._N)('No Integrations found for "[searchTerm]".',{searchTerm:s})}),(0,R.tZ)(ct,{children:(0,z.t)("Not seeing what you're looking for?")}),(0,R.tZ)(pt,{children:(0,z._N)("[link:Build it on the Sentry Integration Platform.]",{link:(0,R.tZ)(b.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/"})})})]})})})]})}}const rt=(0,i.Z)("div",{target:"e623bgk3"})("display:grid;grid-template-columns:240px max-content;grid-gap:",(0,k.Z)(2),";"),lt=(0,i.Z)("div",{target:"e623bgk2"})({name:"1nm5mqn",styles:"height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center"}),pt=(0,i.Z)("div",{target:"e623bgk1"})("font-size:16px;line-height:28px;color:",(t=>t.theme.gray300),";padding-bottom:",(0,k.Z)(2),";"),ct=(0,i.Z)(pt,{target:"e623bgk0"})({name:"1efi8gv",styles:"font-weight:bold"}),dt=(0,C.Z)(at)},"./app/views/organizationIntegrations/pluginDeprecationAlert.tsx":(t,e,n)=>{n.d(e,{Z:()=>u});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/react/index.js"),o=n("./app/components/alert.tsx"),a=n("./app/components/button.tsx"),r=n("./app/icons/index.tsx"),l=n("./app/locale.tsx"),p=n("./app/utils/integrationUtil.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends i.Component{render(){const{organization:t,plugin:e}=this.props;if(!e.deprecationDate)return(0,c.tZ)(i.Fragment,{});const n=e.altIsSentryApp?"sentry-apps":"integrations",s="/settings/".concat(t.slug,"/").concat(n,"/").concat(e.firstPartyAlternative,"/"),a="?".concat(e.altIsSentryApp?"":"tab=configurations&","referrer=directory_upgrade_now");return(0,c.tZ)("div",{children:(0,c.BX)(o.Z,{type:"warning",icon:(0,c.tZ)(r.FC,{size:"sm"}),children:[(0,c.tZ)("span",{children:"This integration is being deprecated on ".concat(e.deprecationDate,". Please upgrade to avoid any disruption.")}),(0,c.tZ)(g,{href:"".concat(s).concat(a),size:"xsmall",onClick:()=>(0,p.Db)("integrations.resolve_now_clicked",{integration_type:"plugin",integration:e.slug,organization:t}),children:(0,l.t)("Upgrade Now")})]})})}}d.displayName="PluginDeprecationAlert";const g=(0,s.Z)(a.ZP,{target:"e1otf8d90"})("color:",(t=>t.theme.subText),";float:right;"),u=d},"./app/views/settings/organization/permissionAlert.tsx":(t,e,n)=>{n.d(e,{Z:()=>p}),n("../node_modules/react/index.js");var s=n("./app/components/acl/access.tsx"),i=n("./app/components/alert.tsx"),o=n("./app/icons/index.tsx"),a=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:t=["org:write"],...e})=>(0,r.tZ)(s.Z,{access:t,children:({hasAccess:t})=>!t&&(0,r.tZ)(i.Z,{type:"warning",icon:(0,r.tZ)(o.FC,{size:"sm"}),...e,children:(0,a.t)("These settings can only be edited by users with the organization owner or manager role.")})});l.displayName="PermissionAlert";const p=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_integrationListDirectory_tsx.6835c0be5c76d112d586258455a6c886.js.map