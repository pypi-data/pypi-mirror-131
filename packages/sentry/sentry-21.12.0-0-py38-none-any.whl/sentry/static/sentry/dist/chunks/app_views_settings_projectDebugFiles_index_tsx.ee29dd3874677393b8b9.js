(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectDebugFiles_index_tsx"],{"./app/components/acl/role.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o("../node_modules/react/index.js"),i=o("./app/stores/configStore.tsx"),n=o("./app/utils/isActiveSuperuser.tsx"),r=o("./app/utils/isRenderFunc.tsx"),a=o("./app/utils/withOrganization.tsx");class l extends s.Component{hasRole(){var e;const t=i.Z.get("user"),{organization:o,role:s}=this.props,{availableRoles:r}=o,a=null!==(e=o.role)&&void 0!==e?e:"";if(!t)return!1;if((0,n.M)())return!0;if(!Array.isArray(r))return!1;const l=r.map((e=>e.id));if(!l.includes(s)||!l.includes(a))return!1;const c=l.indexOf(s);return l.indexOf(a)>=c}render(){const{children:e}=this.props,t=this.hasRole();return(0,r.l)(e)?e({hasRole:t}):t&&e?e:null}}l.displayName="Role";const c=(0,a.Z)(l)},"./app/components/confirmDelete.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var s=o("../node_modules/react/index.js"),i=o("./app/components/alert.tsx"),n=o("./app/components/confirm.tsx"),r=o("./app/locale.tsx"),a=o("./app/views/settings/components/forms/controls/input.tsx"),l=o("./app/views/settings/components/forms/field/index.tsx"),c=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=({message:e,confirmInput:t,...o})=>(0,c.tZ)(n.Z,{...o,bypass:!1,disableConfirmButton:!0,renderMessage:({disableConfirmButton:o})=>(0,c.BX)(s.Fragment,{children:[(0,c.tZ)(i.Z,{type:"error",children:e}),(0,c.tZ)(l.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,r.t)("Please enter %s to confirm the deletion",(0,c.tZ)("code",{children:t})),children:(0,c.tZ)(a.Z,{type:"text",placeholder:t,onChange:e=>o(e.target.value!==t)})})]})});d.displayName="ConfirmDelete";const p=d},"./app/components/fileSize.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=o("./app/utils.tsx"),n=o("./app/utils/getDynamicText.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const{className:t,bytes:o}=e;return(0,r.tZ)(l,{className:t,children:(0,n.Z)({value:(0,i.F)(o),fixed:"xx KB"})})}a.displayName="FileSize";const l=(0,s.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),c=a},"./app/components/notAvailable.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(o("../node_modules/react/index.js"),o("./app/components/tooltip.tsx")),n=o("./app/utils.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({tooltip:e,className:t}){return(0,r.tZ)(l,{className:t,children:(0,r.tZ)(i.Z,{title:e,disabled:!(0,n.ri)(e),children:"—"})})}a.displayName="NotAvailable";const l=(0,s.Z)("div",{target:"e1ickyb10"})("color:",(e=>e.theme.gray200),";"),c=a},"./app/components/projects/appStoreConnectContext.tsx":(e,t,o)=>{"use strict";o.d(t,{z:()=>l,Z:()=>c}),o("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=o("../node_modules/react/index.js"),i=o("./app/utils/appStoreValidationErrorMessage.tsx"),n=o("./app/utils/useApi.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,s.createContext)(void 0),l=({children:e,project:t,organization:o})=>{const l=(0,n.Z)(),[c,d]=(0,s.useState)(),[p,u]=(0,s.useState)(void 0),m=o.slug,h=(null!=c&&c.symbolSources?JSON.parse(c.symbolSources):[]).reduce(((e,{type:t,id:o,...s})=>("appstoreconnect"===t.toLowerCase()&&(e[o]={type:t,...s}),e)),{});function g(e,t){if("valid"!==(null==t?void 0:t.status))return(0,i.e)(t,e)}return(0,s.useEffect)((()=>{!async function(){if(t&&!c)if(t.symbolSources)d(t);else try{const e=await l.requestPromise("/projects/".concat(m,"/").concat(t.slug,"/"));d(e)}catch{}}()}),[t]),(0,s.useEffect)((()=>{!async function(){if(c&&Object.keys(h).length)try{const e=await l.requestPromise("/projects/".concat(m,"/").concat(c.slug,"/appstoreconnect/status/"));u(e)}catch{}}()}),[c]),(0,r.tZ)(a.Provider,{value:p&&t?Object.keys(p).reduce(((e,s)=>{const i=p[s];return{...e,[s]:{...i,updateAlertMessage:g({name:h[s].name,link:"/settings/".concat(o.slug,"/projects/").concat(t.slug,"/debug-symbols/?customRepository=").concat(s)},i.credentials)}}}),{}):void 0,children:e})};l.displayName="Provider";const c=a},"./app/types/debugFiles.tsx":(e,t,o)=>{"use strict";let s,i,n;o.d(t,{BQ:()=>s,Wi:()=>i,Et:()=>n}),function(e){e.EXE="exe",e.DBG="dbg",e.LIB="lib"}(s||(s={})),function(e){e.SYMTAB="symtab",e.DEBUG="debug",e.UNWIND="unwind",e.SOURCES="sources"}(i||(i={})),function(e){e.HTTP="http",e.S3="s3",e.GCS="gcs",e.APP_STORE_CONNECT="appStoreConnect"}(n||(n={}))},"./app/utils/appStoreValidationErrorMessage.tsx":(e,t,o)=>{"use strict";o.d(t,{O:()=>a,e:()=>l});var s=o("../node_modules/@sentry/minimal/esm/index.js"),i=o("./app/components/links/link.tsx"),n=o("./app/locale.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,n.t)("An unexpected error occurred while configuring the App Store Connect integration");function l(e,t){switch(e.code){case"app-connect-authentication-error":return t?(0,n._N)("App Store Connect credentials are invalid or missing. [linkToCustomRepository]",{linkToCustomRepository:(0,r.tZ)(i.Z,{to:t.link,children:(0,n._N)("Make sure the credentials of the '[customRepositoryName]' repository are correct and exist.",{customRepositoryName:t.name})})}):(0,n.t)("The supplied App Store Connect credentials are invalid or missing.");case"app-connect-forbidden-error":return(0,n.t)("The supplied API key does not have sufficient permissions.");case"app-connect-multiple-sources-error":return(0,n.t)("Only one App Store Connect application is allowed in this project.");default:return s.Tb(new Error("Unknown app store connect error.")),a}}},"./app/utils/routeTitle.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});const s=function(e,t,o=!0,s){const i="".concat(e," - ").concat(t),n=s?"".concat(i," - ").concat(s):i;return o?"".concat(n," - Sentry"):n}},"./app/views/asyncView.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>r}),o("../node_modules/react/index.js");var s=o("./app/components/asyncComponent.tsx"),i=o("./app/components/sentryDocumentTitle.tsx"),n=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends s.Z{getTitle(){return""}render(){return(0,n.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>c}),o("../node_modules/react/index.js");var s=o("./app/components/acl/access.tsx"),i=o("./app/components/alert.tsx"),n=o("./app/icons/index.tsx"),r=o("./app/locale.tsx"),a=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:e=["project:write"],...t})=>(0,a.tZ)(s.Z,{access:e,children:({hasAccess:e})=>!e&&(0,a.tZ)(i.Z,{type:"warning",icon:(0,a.tZ)(n.FC,{size:"xs"}),...t,children:(0,r.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})});l.displayName="PermissionAlert";const c=l},"./app/views/settings/projectDebugFiles/index.tsx":(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>st});var s=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("../node_modules/react/index.js")),r=o("./app/actionCreators/indicator.tsx"),a=o("./app/actions/projectActions.tsx"),l=o("./app/components/checkbox.tsx"),c=o("./app/components/pagination.tsx"),d=o("./app/components/panels/index.tsx"),p=o("./app/components/searchBar.tsx"),u=o("./app/locale.tsx"),m=o("./app/styles/space.tsx"),h=o("./app/utils/routeTitle.tsx"),g=o("./app/views/asyncView.tsx"),y=o("./app/views/settings/components/settingsPageHeader.tsx"),Z=o("./app/views/settings/components/text/textBlock.tsx"),b=o("./app/views/settings/project/permissionAlert.tsx"),f=o("./app/components/acl/access.tsx"),x=o("./app/components/acl/role.tsx"),v=o("./app/components/button.tsx"),S=o("./app/components/buttonBar.tsx"),w=o("./app/components/confirm.tsx"),j=o("./app/components/fileSize.tsx"),C=o("./app/components/tag.tsx"),E=o("./app/components/timeSince.tsx"),_=o("./app/components/tooltip.tsx"),T=o("./app/icons/index.tsx"),D=o("./app/styles/overflowEllipsis.tsx"),N=o("./app/views/settings/projectDebugFiles/utils.tsx"),k=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const B=({debugFile:e,showDetails:t,downloadUrl:o,downloadRole:s,onDelete:i})=>{const{id:r,data:a,debugId:l,uuid:c,size:d,dateCreated:p,objectName:m,cpuName:h,symbolType:g,codeId:y}=e,Z=(0,N.J)(e),{features:b}=a||{};return(0,k.BX)(n.Fragment,{children:[(0,k.BX)(P,{children:[(0,k.tZ)("div",{children:(0,k.tZ)(F,{children:l||c})}),(0,k.BX)(M,{children:[(0,k.tZ)(I,{bytes:d}),(0,k.BX)(X,{children:[(0,k.tZ)(T.jo,{size:"xs"}),(0,k.tZ)(E.Z,{date:p})]})]})]}),(0,k.BX)(P,{children:[(0,k.tZ)(q,{children:"proguard"===g&&"proguard-mapping"===m?"―":m}),(0,k.BX)(U,{children:[(0,k.tZ)(z,{children:"proguard"===g&&"any"===h?(0,u.t)("proguard mapping"):"".concat(h," (").concat(g).concat(Z?" ".concat(Z):"",")")}),b&&(0,k.tZ)(A,{children:b.map((e=>(0,k.tZ)(R,{tooltipText:(0,N.V)(e),children:e},e)))}),t&&(0,k.tZ)("div",{children:y&&(0,k.BX)(L,{children:[(0,u.t)("Code ID"),": ",y]})})]})]}),(0,k.tZ)(O,{children:(0,k.BX)(S.ZP,{gap:.5,children:[(0,k.tZ)(x.Z,{role:s,children:({hasRole:e})=>(0,k.tZ)(_.Z,{disabled:e,title:(0,u.t)("You do not have permission to download debug files."),children:(0,k.tZ)(v.ZP,{size:"xsmall",icon:(0,k.tZ)(T.Dj,{size:"xs"}),href:o,disabled:!e,children:(0,u.t)("Download")})})}),(0,k.tZ)(f.Z,{access:["project:write"],children:({hasAccess:e})=>(0,k.tZ)(_.Z,{disabled:e,title:(0,u.t)("You do not have permission to delete debug files."),children:(0,k.tZ)(w.Z,{confirmText:(0,u.t)("Delete"),message:(0,u.t)("Are you sure you wish to delete this file?"),onConfirm:()=>i(r),disabled:!e,children:(0,k.tZ)(v.ZP,{priority:"danger",icon:(0,k.tZ)(T.Fz,{size:"xs"}),size:"xsmall",disabled:!e,"data-test-id":"delete-dif"})})})})]})})]})};B.displayName="DebugFileRow";const z=(0,i.Z)("span",{target:"e1imnv3r11"})("display:inline-flex;margin:0 ",(0,m.Z)(1)," ",(0,m.Z)(1)," 0;"),A=(0,i.Z)("div",{target:"e1imnv3r10"})("display:inline-flex;flex-wrap:wrap;margin:-",(0,m.Z)(.5),";"),R=(0,i.Z)(C.Z,{target:"e1imnv3r9"})("padding:",(0,m.Z)(.5),";"),P=(0,i.Z)("div",{target:"e1imnv3r8"})({name:"6kz1wu",styles:"display:flex;flex-direction:column;align-items:flex-start"}),O=(0,i.Z)("div",{target:"e1imnv3r7"})("display:flex;justify-content:flex-end;align-items:flex-start;margin-top:",(0,m.Z)(1),";"),F=(0,i.Z)("code",{target:"e1imnv3r6"})("font-size:",(e=>e.theme.fontSizeSmall),";"),M=(0,i.Z)("div",{target:"e1imnv3r5"})("width:100%;display:flex;font-size:",(e=>e.theme.fontSizeSmall),";margin-top:",(0,m.Z)(1),";color:",(e=>e.theme.subText),";align-items:center;"),I=(0,i.Z)(j.Z,{target:"e1imnv3r4"})("flex:1;padding-left:",(0,m.Z)(.5),";"),X=(0,i.Z)("div",{target:"e1imnv3r3"})("display:grid;grid-gap:",(0,m.Z)(.5),";grid-template-columns:min-content 1fr;flex:2;align-items:center;padding-left:",(0,m.Z)(.5),";"),q=(0,i.Z)("div",{target:"e1imnv3r2"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,m.Z)(1),";"),U=(0,i.Z)("div",{target:"e1imnv3r1"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";@media (max-width: ",(e=>e.theme.breakpoints[2]),"){line-height:1.7;}"),L=(0,i.Z)("div",{target:"e1imnv3r0"})(D.Z," margin-top:",(0,m.Z)(1),";"),V=B;var Y=o("./app/views/settings/components/forms/selectField.tsx");function G({api:e,organization:t,builtinSymbolSourceOptions:o,builtinSymbolSources:s,projSlug:i}){const n=s.filter((e=>o.find((({sentry_key:t})=>t===e))));async function l(o){const{successMessage:s,errorMessage:l}=0===(c=(null!=o?o:[]).length)?{errorMessage:(0,u.t)("This field requires at least one built-in repository")}:c>n.length?{successMessage:(0,u.t)("Successfully added built-in repository"),errorMessage:(0,u.t)("An error occurred while adding new built-in repository")}:{successMessage:(0,u.t)("Successfully removed built-in repository"),errorMessage:(0,u.t)("An error occurred while removing built-in repository")};var c;try{const n=await e.requestPromise("/projects/".concat(t.slug,"/").concat(i,"/"),{method:"PUT",data:{builtinSymbolSources:o}});a.Z.updateSuccess(n),(0,r.S9)(s)}catch{(0,r.Iw)(l)}}return(0,k.BX)(d.s_,{children:[(0,k.tZ)(d.V9,{children:(0,u.t)("Built-in Repositories")}),(0,k.tZ)(d.N,{children:(0,k.tZ)(f.Z,{access:["project:write"],children:({hasAccess:e})=>(0,k.tZ)(Q,{disabled:!e,name:"builtinSymbolSources",label:(0,u.t)("Built-in Repositories"),help:(0,u.t)("Configures which built-in repositories Sentry should use to resolve debug files."),placeholder:(0,u.t)("Select built-in repository"),value:n,onChange:l,options:o.filter((e=>!e.hidden)).map((e=>({value:e.sentry_key,label:e.name}))),getValue:e=>null===e?[]:e,flexibleControlStateSize:!0,multiple:!0})})})]})}G.displayName="BuiltInRepositories";const W=G,Q=(0,i.Z)(Y.Z,{target:"e1uiz9p80"})((e=>e.disabled&&"cursor: not-allowed"),";");var H=o("./app/actionCreators/modal.tsx"),K=o("./app/components/dropdownAutoComplete/index.tsx"),J=o("./app/components/dropdownButton.tsx"),$=o("./app/components/emptyStateWarning.tsx"),ee=o("./app/components/hookOrDefault.tsx"),te=o("./app/components/menuItem.tsx"),oe=o("./app/components/projects/appStoreConnectContext.tsx"),se=o("./app/types/debugFiles.tsx"),ie=o("./app/utils.tsx"),ne=o("./app/components/actions/button.tsx"),re=o("./app/components/actions/menuItemActionLink.tsx"),ae=o("./app/components/confirmDelete.tsx"),le=o("./app/components/dropdownLink.tsx"),ce=o("./app/icons/iconEllipsis.tsx");function de({repositoryName:e,repositoryType:t,isDetailsExpanded:o,isDetailsDisabled:s,onToggleDetails:i,onEdit:r,onDelete:a,showDetails:l}){function c(o){return(0,k.tZ)(ae.Z,{confirmText:(0,u.t)("Delete Repository"),message:t===se.Et.APP_STORE_CONNECT?(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(Z.Z,{children:(0,k.tZ)("strong",{children:(0,u.t)("Removing App Store Connect symbol source does not remove current dSYMs.")})}),(0,k.tZ)(Z.Z,{children:(0,u.t)('The App Store Connect symbol source periodically imports dSYMs into the "Uploaded debug information files". Removing this symbol source does not delete those files and they will remain available for symbolication until deleted directly.')})]}):(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(Z.Z,{children:(0,k.tZ)("strong",{children:(0,u.t)("Removing this repository applies instantly to new events.")})}),(0,k.tZ)(Z.Z,{children:(0,u.t)("Debug files from this repository will not be used to symbolicate future events. This may create new issues and alert members in your organization.")})]}),confirmInput:e,priority:"danger",onConfirm:a,children:o})}return(0,k.BX)(he,{gap:1,children:[l&&(0,k.tZ)(me,{isOpen:o,size:"small",onClick:s?void 0:i,hideBottomBorder:!1,disabled:s,children:(0,u.t)("Details")}),(0,k.tZ)(f.Z,{access:["project:write"],children:({hasAccess:e})=>(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(ge,{title:(0,u.t)("You do not have permission to edit custom repository configurations."),disabled:e,children:(0,k.tZ)(ye,{disabled:!e||s,onClick:r,size:"small",children:(0,u.t)("Configure")})}),!e||s?(0,k.tZ)(ge,{title:(0,u.t)("You do not have permission to delete custom repository configurations."),disabled:e,children:(0,k.tZ)(ye,{size:"small",disabled:!0,children:(0,u.t)("Delete")})}):c((0,k.tZ)(ye,{size:"small",children:(0,u.t)("Delete")})),(0,k.tZ)(Ze,{children:(0,k.BX)(le.Z,{caret:!1,customTitle:(0,k.tZ)(ue,{label:(0,u.t)("Actions"),disabled:!e||s,title:e?void 0:(0,u.t)("You do not have permission to edit and delete custom repository configurations."),icon:(0,k.tZ)(ce.Y,{})}),anchorRight:!0,children:[(0,k.tZ)(re.Z,{title:(0,u.t)("Configure"),onClick:r,children:(0,u.t)("Configure")}),c((0,k.tZ)(re.Z,{title:(0,u.t)("Delete"),children:(0,u.t)("Delete")}))]})})]})})]})}de.displayName="Actions";const pe=de,ue=(0,i.Z)(ne.Z,{target:"e13e2cy5"})({name:"s0vnfv",styles:"height:32px"}),me=(0,i.Z)(J.Z,{target:"e13e2cy4"})("border-bottom-right-radius:",(e=>e.theme.borderRadius),";border-bottom-left-radius:",(e=>e.theme.borderRadius),";"),he=(0,i.Z)(S.ZP,{target:"e13e2cy3"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-row:1/3;}@media (max-width: ",(e=>e.theme.breakpoints[0]),"){grid-auto-flow:row;grid-gap:",(0,m.Z)(1),";margin-top:",(0,m.Z)(.5),";}"),ge=(0,i.Z)(_.Z,{target:"e13e2cy2"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}"),ye=(0,i.Z)(v.ZP,{target:"e13e2cy1"})("width:100%;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}"),Ze=(0,i.Z)("div",{target:"e13e2cy0"})("@media (max-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}");var be=o("./app/components/dateTime.tsx"),fe=o("./app/components/notAvailable.tsx");function xe({details:e}){const{latestBuildVersion:t,latestBuildNumber:o,lastCheckedBuilds:s}=null!=e?e:{};return(0,k.BX)(Se,{children:[(0,u.t)("Last detected version"),(0,k.tZ)(we,{children:t?(0,u._N)("v[version]",{version:t}):(0,k.tZ)(fe.Z,{tooltip:(0,u.t)("Not available")})}),(0,u.t)("Last detected build"),(0,k.tZ)(we,{children:null!=o?o:(0,k.tZ)(fe.Z,{tooltip:(0,u.t)("Not available")})}),(0,u.t)("Detected last build on"),(0,k.tZ)(we,{children:s?(0,k.tZ)(be.Z,{date:s}):(0,k.tZ)(fe.Z,{tooltip:(0,u.t)("Not available")})})]})}xe.displayName="Details";const ve=xe,Se=(0,i.Z)("div",{target:"e16lztiv1"})("display:grid;grid-gap:",(0,m.Z)(1),";margin-top:",(0,m.Z)(.5),";align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";font-weight:700;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){margin-top:",(0,m.Z)(1),";grid-template-columns:max-content 1fr;grid-gap:",(0,m.Z)(1),";grid-row:3/3;grid-column:1/-1;}"),we=(0,i.Z)("div",{target:"e16lztiv0"})("font-weight:400;white-space:pre-wrap;word-break:break-all;padding:",(0,m.Z)(1)," ",(0,m.Z)(1.5),";font-family:",(e=>e.theme.text.familyMono),";background-color:",(e=>e.theme.backgroundSecondary),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){:not(:last-child){margin-bottom:",(0,m.Z)(1),";}}");var je=o("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),Ce=o("./app/components/placeholder.tsx"),Ee=o("./app/icons/iconDownload.tsx"),_e=o("./app/icons/iconRefresh.tsx"),Te=o("./app/icons/iconWarning.tsx");const De=function({details:e,onEditRepository:t}){const o=(0,je.u)();if(!e)return(0,k.tZ)(Ce.Z,{height:"14px"});const{pendingDownloads:s,credentials:i,lastCheckedBuilds:n}=e;return"invalid"===i.status?(0,k.BX)(Ne,{color:o.red300,onClick:t,children:[(0,k.tZ)(ke,{title:(0,u.t)("Re-check your App Store Credentials"),containerDisplayMode:"inline-flex",children:(0,k.tZ)(Te.F,{size:"sm"})}),(0,u.t)("Credentials are invalid")]}):s?(0,k.BX)(Ne,{color:o.gray400,children:[(0,k.tZ)(Be,{children:(0,k.tZ)(Ee.D,{size:"sm"})}),(0,u.tn)("%s build pending","%s builds pending",s)]}):n?(0,k.BX)(Ne,{color:o.gray400,children:[(0,k.tZ)(Be,{children:(0,k.tZ)(_e.t,{size:"sm"})}),(0,k.tZ)(E.Z,{date:n})]}):null},Ne=(0,i.Z)("div",{target:"e1d42htv2"})("display:grid;grid-template-columns:repeat(2, max-content);align-items:center;grid-gap:",(0,m.Z)(.75),";color:",(e=>e.color),";font-size:",(e=>e.theme.fontSizeMedium),";height:14px;",(e=>e.onClick&&"cursor: pointer"),";"),ke=(0,i.Z)(_.Z,{target:"e1d42htv1"})({name:"m44gc5",styles:"margin-top:-5px;height:14px"}),Be=(0,i.Z)("div",{target:"e1d42htv0"})({name:"m44gc5",styles:"margin-top:-5px;height:14px"});var ze=o("../node_modules/lodash/forEach.js"),Ae=o.n(ze),Re=o("../node_modules/lodash/set.js"),Pe=o.n(Re);const Oe={[se.Et.APP_STORE_CONNECT]:"App Store Connect",[se.Et.HTTP]:"SymbolServer (HTTP)",[se.Et.S3]:"Amazon S3",[se.Et.GCS]:"Google Cloud Storage"},Fe=[{value:se.Et.S3,label:Oe[se.Et.S3],searchKey:(0,u.t)("aws amazon s3 bucket")},{value:se.Et.GCS,label:Oe[se.Et.GCS],searchKey:(0,u.t)("gcs google cloud storage bucket")},{value:se.Et.HTTP,label:Oe[se.Et.HTTP],searchKey:(0,u.t)("http symbol server ssqp symstore symsrv")}];function Me(e){const t={};return Ae()(e,((e,o)=>{Pe()(t,o.split("."),e)})),t}function Ie({repository:e,onDelete:t,onEdit:o}){const[s,i]=(0,n.useState)(!1),{id:r,name:a,type:l}=e;return(0,k.BX)(qe,{children:[(0,k.tZ)(Ue,{children:a}),(0,k.BX)(Le,{children:[Oe[l],e.type===se.Et.APP_STORE_CONNECT&&(0,k.tZ)(De,{details:e.details,onEditRepository:()=>o(r)})]}),(0,k.tZ)(pe,{repositoryName:a,repositoryType:l,onDelete:()=>t(r),onEdit:()=>o(r),showDetails:e.type===se.Et.APP_STORE_CONNECT,isDetailsDisabled:e.type===se.Et.APP_STORE_CONNECT&&void 0===e.details,isDetailsExpanded:s,onToggleDetails:()=>i(!s)}),e.type===se.Et.APP_STORE_CONNECT&&s&&(0,k.tZ)(ve,{details:e.details})]})}Ie.displayName="Repository";const Xe=Ie,qe=(0,i.Z)(d.Lv,{target:"e12m310s2"})("display:grid;grid-template-columns:1fr;row-gap:",(0,m.Z)(1),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:1fr max-content;grid-template-rows:repeat(2, max-content);}"),Ue=(0,i.Z)("div",{target:"e12m310s1"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-row:1/2;}"),Le=(0,i.Z)("div",{target:"e12m310s0"})("color:",(e=>e.theme.gray400),";font-size:",(e=>e.theme.fontSizeMedium),";display:grid;grid-gap:",(0,m.Z)(1.5),";align-items:center;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:max-content minmax(200px, max-content);grid-row:2/3;grid-gap:",(0,m.Z)(1),";}"),Ve=(0,ee.Z)({hookName:"component:disabled-app-store-connect-item",defaultComponent:({children:e})=>(0,k.tZ)(n.Fragment,{children:e})});function Ye({api:e,organization:t,customRepositories:o,projSlug:s,router:i,location:l}){var c;const p=(0,n.useContext)(oe.Z);(0,n.useEffect)((()=>{!function(){const{customRepository:e}=l.query;if(!e)return;const t=o.findIndex((t=>t.id===e)),s=o[t];s&&(0,H.openDebugFileSourceModal)({sourceConfig:s,sourceType:s.type,appStoreConnectStatusData:null==p?void 0:p[s.id],onSave:e=>y({updatedItem:e,index:t}),onClose:Z})}()}),[l.query,p]);const m=t.slug,h=!(null===(c=t.features)||void 0===c||!c.includes("app-store-connect-multiple")),g=!!o.find((e=>e.type===se.Et.APP_STORE_CONNECT));function y({updatedItems:t,updatedItem:i,index:n,refresh:l}){let c=null!=t?t:[];i&&(0,ie.ri)(n)&&(c=[...o],c.splice(n,1,i));const{successMessage:d,errorMessage:p}=(h=c.length)>(g=o.length)?{successMessage:(0,u.t)("Successfully added custom repository"),errorMessage:(0,u.t)("An error occurred while adding a new custom repository")}:h<g?{successMessage:(0,u.t)("Successfully removed custom repository"),errorMessage:(0,u.t)("An error occurred while removing the custom repository")}:{successMessage:(0,u.t)("Successfully updated custom repository"),errorMessage:(0,u.t)("An error occurred while updating the custom repository")};var h,g;const y=JSON.stringify(c.map(Me)),Z=e.requestPromise("/projects/".concat(m,"/").concat(s,"/"),{method:"PUT",data:{symbolSources:y}});return Z.catch((()=>{(0,r.Iw)(p)})),Z.then((e=>{a.Z.updateSuccess(e),(0,r.S9)(d),l&&window.location.reload()})),Z}function Z(){i.push({...l,query:{...l.query,customRepository:void 0}})}function b(e){(0,H.openDebugFileSourceModal)({sourceType:e,onSave:e=>y({updatedItems:[...o,e]})})}function x(e){const t=[...o],s=t.findIndex((t=>t.id===e));t.splice(s,1),y({updatedItems:t,refresh:o[s].type===se.Et.APP_STORE_CONNECT})}function v(e){i.push({...l,query:{...l.query,customRepository:e}})}return p||Fe.find((e=>e.value===se.Et.APP_STORE_CONNECT))||Fe.push({value:se.Et.APP_STORE_CONNECT,label:Oe[se.Et.APP_STORE_CONNECT],searchKey:(0,u.t)("apple store connect itunes ios")}),(0,k.BX)(d.s_,{children:[(0,k.BX)(d.V9,{hasButtons:!0,children:[(0,u.t)("Custom Repositories"),(0,k.tZ)(K.Z,{alignMenu:"right",onSelect:e=>{b(e.value)},items:Fe.map((e=>{const t=e.value===se.Et.APP_STORE_CONNECT&&g&&!h;return{...e,value:e.value,disabled:t,label:(0,k.tZ)(Ve,{disabled:t,onTrialStarted:()=>{b(e.value)},children:(0,k.tZ)(We,{disabled:t,children:e.label})})}})),children:({isOpen:e})=>(0,k.tZ)(f.Z,{access:["project:write"],children:({hasAccess:t})=>(0,k.tZ)(J.Z,{isOpen:e,title:t?void 0:(0,u.t)("You do not have permission to add custom repositories."),disabled:!t,size:"small",children:(0,u.t)("Add Repository")})})})]}),(0,k.tZ)(d.N,{children:o.length?o.map(((e,t)=>(0,k.tZ)(Xe,{repository:e.type===se.Et.APP_STORE_CONNECT?{...e,details:null==p?void 0:p[e.id]}:e,onDelete:x,onEdit:v},t))):(0,k.tZ)($.Z,{children:(0,k.tZ)("p",{children:(0,u.t)("No custom repositories configured")})})})]})}Ye.displayName="CustomRepositories";const Ge=Ye,We=(0,i.Z)(te.Z,{target:"eyit68d0"})("color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;text-transform:none;span{padding:0;}");function Qe({api:e,organization:t,customRepositories:o,builtinSymbolSources:s,builtinSymbolSourceOptions:i,projSlug:r,location:a,router:l}){return(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(W,{api:e,organization:t,builtinSymbolSources:s,builtinSymbolSourceOptions:i,projSlug:r}),(0,k.tZ)(Ge,{api:e,location:a,router:l,organization:t,customRepositories:o,projSlug:r})]})}Qe.displayName="ExternalSources";const He=Qe;class Ke extends g.Z{constructor(...e){super(...e),(0,s.Z)(this,"handleDelete",(e=>{const{orgId:t,projectId:o}=this.props.params;this.setState({loading:!0}),this.api.request("/projects/".concat(t,"/").concat(o,"/files/dsyms/?id=").concat(e),{method:"DELETE",complete:()=>this.fetchData()})})),(0,s.Z)(this,"handleSearch",(e=>{const{location:t,router:o}=this.props;o.push({...t,query:{...t.query,cursor:void 0,query:e}})}))}getTitle(){const{projectId:e}=this.props.params;return(0,h.Z)((0,u.t)("Debug Files"),e,!1)}getDefaultState(){return{...super.getDefaultState(),project:this.props.project,showDetails:!1}}getEndpoints(){const{organization:e,params:t,location:o}=this.props,{builtinSymbolSources:s}=this.state||{},{orgId:i,projectId:n}=t,{query:r}=o.query,a=[["debugFiles","/projects/".concat(i,"/").concat(n,"/files/dsyms/"),{query:{query:r,file_formats:["breakpad","macho","elf","pe","pdb","sourcebundle","wasm","bcsymbolmap","uuidmap"]}}]];return!s&&e.features.includes("symbol-sources")&&a.push(["builtinSymbolSources","/builtin-symbol-sources/",{}]),a}async fetchProject(){const{params:e}=this.props,{orgId:t,projectId:o}=e;try{const e=await this.api.requestPromise("/projects/".concat(t,"/").concat(o,"/"));a.Z.updateSuccess(e)}catch{(0,r.Iw)((0,u.t)("An error occurred while fetching project data"))}}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getEmptyMessage(){return this.getQuery()?(0,u.t)("There are no debug symbols that match your search."):(0,u.t)("There are no debug symbols for this project.")}renderLoading(){return this.renderBody()}renderDebugFiles(){const{debugFiles:e,showDetails:t}=this.state,{organization:o,params:s}=this.props,{orgId:i,projectId:n}=s;return null!=e&&e.length?e.map((e=>{const s="".concat(this.api.baseUrl,"/projects/").concat(i,"/").concat(n,"/files/dsyms/?id=").concat(e.id);return(0,k.tZ)(V,{debugFile:e,showDetails:t,downloadUrl:s,downloadRole:o.debugFilesRole,onDelete:this.handleDelete},e.id)})):null}renderBody(){var e;const{organization:t,project:o,router:s,location:i}=this.props,{loading:r,showDetails:a,builtinSymbolSources:d,debugFiles:m,debugFilesPageLinks:h}=this.state,{features:g}=t;return(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(y.Z,{title:(0,u.t)("Debug Information Files")}),(0,k.tZ)(Z.Z,{children:(0,u.t)("\n            Debug information files are used to convert addresses and minified\n            function names from native crash reports into function names and\n            locations.\n          ")}),g.includes("symbol-sources")&&(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(b.Z,{}),(0,k.tZ)(He,{api:this.api,location:i,router:s,projSlug:o.slug,organization:t,customRepositories:o.symbolSources?JSON.parse(o.symbolSources):[],builtinSymbolSources:null!==(e=o.builtinSymbolSources)&&void 0!==e?e:[],builtinSymbolSourceOptions:null!=d?d:[]})]}),(0,k.BX)(et,{children:[(0,k.tZ)(Z.Z,{noMargin:!0,children:(0,u.t)("Uploaded debug information files")}),(0,k.BX)(tt,{children:[(0,k.BX)(ot,{children:[(0,k.tZ)(l.Z,{checked:a,onChange:e=>{this.setState({showDetails:e.target.checked})}}),(0,u.t)("show details")]}),(0,k.tZ)(p.Z,{placeholder:(0,u.t)("Search DIFs"),onSearch:this.handleSearch,query:this.getQuery()})]})]}),(0,k.tZ)(Je,{headers:[(0,u.t)("Debug ID"),(0,u.t)("Information"),(0,k.tZ)($e,{children:(0,u.t)("Actions")},"actions")],emptyMessage:this.getEmptyMessage(),isEmpty:0===(null==m?void 0:m.length),isLoading:r,children:this.renderDebugFiles()}),(0,k.tZ)(c.Z,{pageLinks:h})]})}}const Je=(0,i.Z)(d.KB,{target:"e1l178ju4"})({name:"l40ow2",styles:"grid-template-columns:37% 1fr auto"}),$e=(0,i.Z)("div",{target:"e1l178ju3"})({name:"2qga7i",styles:"text-align:right"}),et=(0,i.Z)("div",{target:"e1l178ju2"})("display:grid;grid-template-columns:auto 1fr;grid-gap:",(0,m.Z)(4),";align-items:center;margin-top:",(0,m.Z)(4),";margin-bottom:",(0,m.Z)(1),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){display:block;}"),tt=(0,i.Z)("div",{target:"e1l178ju1"})("display:grid;grid-template-columns:min-content minmax(200px, 400px);align-items:center;justify-content:flex-end;grid-gap:",(0,m.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:min-content 1fr;}"),ot=(0,i.Z)("label",{target:"e1l178ju0"})("font-weight:normal;display:flex;margin-bottom:0;white-space:nowrap;input{margin-top:0;margin-right:",(0,m.Z)(1),";}"),st=Ke},"./app/views/settings/projectDebugFiles/utils.tsx":(e,t,o)=>{"use strict";o.d(t,{J:()=>n,V:()=>r});var s=o("./app/locale.tsx"),i=o("./app/types/debugFiles.tsx");function n(e){var t;switch(null===(t=e.data)||void 0===t?void 0:t.type){case i.BQ.EXE:return(0,s.t)("executable");case i.BQ.DBG:return(0,s.t)("debug companion");case i.BQ.LIB:return(0,s.t)("dynamic library");default:return null}}function r(e){switch(e){case i.Wi.SYMTAB:return(0,s.t)("Symbol tables are used as a fallback when full debug information is not available");case i.Wi.DEBUG:return(0,s.t)("Debug information provides function names and resolves inlined frames during symbolication");case i.Wi.UNWIND:return(0,s.t)("Stack unwinding information improves the quality of stack traces extracted from minidumps");case i.Wi.SOURCES:return(0,s.t)("Source code information allows Sentry to display source code context for stack frames");default:return null}}},"../node_modules/lodash/_castFunction.js":(e,t,o)=>{var s=o("../node_modules/lodash/identity.js");e.exports=function(e){return"function"==typeof e?e:s}},"../node_modules/lodash/forEach.js":(e,t,o)=>{var s=o("../node_modules/lodash/_arrayEach.js"),i=o("../node_modules/lodash/_baseEach.js"),n=o("../node_modules/lodash/_castFunction.js"),r=o("../node_modules/lodash/isArray.js");e.exports=function(e,t){return(r(e)?s:i)(e,n(t))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectDebugFiles_index_tsx.b45bc3404af7cf8c7b2b7556b570782f.js.map