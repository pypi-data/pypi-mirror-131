(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[953],{9953:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>tt});var o=t(3673);const i={class:"q-pa-none"},n={class:"row"},a={class:"col q-ma-sm"},s={key:0},r={class:"row"},u={class:"col-6 text-center"},d=(0,o.Uk)(" Workers "),c={class:"col-6 text-center"},p=(0,o.Uk)(" Plugins ");function m(e,l,t,m,g,w){const h=(0,o.up)("PluginsInstalledTable"),f=(0,o.up)("q-separator"),v=(0,o.up)("q-btn"),b=(0,o.up)("q-card"),_=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(_,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)("div",i,[(0,o.Wm)("div",n,[(0,o.Wm)("div",a,[(0,o.Wm)(h)])]),e.$q.platform.is.mobile?((0,o.wg)(),(0,o.j4)("div",s,[(0,o.Wm)(f,{class:"q-mb-lg"}),(0,o.Wm)("div",r,[(0,o.Wm)("div",u,[(0,o.Wm)(b,{flat:"",bordered:"",onClick:l[1]||(l[1]=l=>e.$router.push("/ui/settings-workers")),class:"bg-grey-1 q-ma-xs"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{icon:"navigate_before",flat:""},{default:(0,o.w5)((()=>[d])),_:1})])),_:1})]),(0,o.Wm)("div",c,[(0,o.Wm)(b,{flat:"",bordered:"",onClick:l[2]||(l[2]=l=>e.$router.push("/ui/settings-link")),class:"bg-grey-1 q-ma-xs"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{"icon-right":"navigate_next",flat:""},{default:(0,o.w5)((()=>[p])),_:1})])),_:1})])])])):(0,o.kq)("",!0)])])),_:1})}t(246);var g=t(2323);const w={class:"row"},h={class:"row"},f={class:"row q-gutter-xs q-mt-xs"},v={class:"col-auto"},b={class:"col-auto"},_={class:"row q-gutter-xs q-mt-xs"},W={class:"col-auto"},y={class:"row q-gutter-xs q-mt-xs"},q={class:"col-auto"},k={class:"full-width row flex-center text-accent q-gutter-sm"};function x(e,l,t,i,n,a){const s=(0,o.up)("q-skeleton"),r=(0,o.up)("q-avatar"),u=(0,o.up)("q-btn"),d=(0,o.up)("q-td"),c=(0,o.up)("q-badge"),p=(0,o.up)("q-icon"),m=(0,o.up)("q-input"),x=(0,o.up)("q-item-label"),$=(0,o.up)("q-item-section"),P=(0,o.up)("q-item"),I=(0,o.up)("q-separator"),Z=(0,o.up)("q-list"),Q=(0,o.up)("q-btn-dropdown"),S=(0,o.up)("q-table"),H=(0,o.up)("PluginInfo"),C=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(o.HY,null,[(0,o.Wm)(S,{title:"Plugins",rows:i.rows,columns:i.columns,"row-key":"id",pagination:i.pagination,"onUpdate:pagination":l[2]||(l[2]=e=>i.pagination=e),loading:i.loading,filter:i.filter,onRequest:i.onRequest,"binary-state-sort":"","selected-rows-label":i.getSelectedString,selection:"multiple",selected:i.selected,"onUpdate:selected":l[3]||(l[3]=e=>i.selected=e)},{"body-cell-icon":(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)("div",null,[(0,o.Wm)("span",null,[(0,o.Wm)(u,{onClick:l=>i.openPluginInfo(e.row.id)},{default:(0,o.w5)((()=>[e.row.icon?((0,o.wg)(),(0,o.j4)(r,{key:1,rounded:"",size:"35px"},{default:(0,o.w5)((()=>[(0,o.Wm)("img",{src:e.row.icon,class:"plugin-list-icon"},null,8,["src"])])),_:2},1024)):((0,o.wg)(),(0,o.j4)(s,{key:0,width:"35px",height:"35px"}))])),_:2},1032,["onClick"])])])])),_:2},1032,["props"])])),"body-cell-description":(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)("span",{innerHTML:e.row.description},null,8,["innerHTML"])])),_:2},1032,["props"])])),"body-cell-status":(0,o.w5)((l=>[(0,o.Wm)(d,{props:l},{default:(0,o.w5)((()=>[(0,o.Wm)("div",w,[l.row.status.enabled?((0,o.wg)(),(0,o.j4)(c,{key:0,color:"positive",class:"shadow-1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("status.enabled")),1)])),_:1})):((0,o.wg)(),(0,o.j4)(c,{key:1,color:"negative",class:"shadow-1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("status.disabled")),1)])),_:1}))]),(0,o.Wm)("div",h,[l.row.status.update_available?((0,o.wg)(),(0,o.j4)(c,{key:0,color:"warning",class:"shadow-1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("components.plugins.updateAvailable")),1)])),_:1})):((0,o.wg)(),(0,o.j4)(c,{key:1,color:"secondary",class:"shadow-1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("components.plugins.upToDate")),1)])),_:1}))])])),_:2},1032,["props"])])),"top-left":(0,o.w5)((()=>[(0,o.Wm)("div",f,[(0,o.Wm)("div",v,[(0,o.Wm)(u,{onClick:i.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.addNew")},null,8,["onClick","label"])]),(0,o.Wm)("div",b,[(0,o.Wm)(u,{onClick:i.openPluginFlow,class:"",color:"secondary","icon-right":"low_priority",label:e.$t("components.plugins.configurePluginFow")},null,8,["onClick","label"])])]),(0,o.Wm)("div",_,[(0,o.Wm)("div",W,[(0,o.Wm)(m,{filled:"",class:"shadow-1",dense:"",debounce:"300",color:"primary",modelValue:i.filter,"onUpdate:modelValue":l[1]||(l[1]=e=>i.filter=e),placeholder:e.$t("navigation.search")},{append:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),"top-right":(0,o.w5)((()=>[(0,o.Wm)("div",y,[(0,o.Wm)("div",q,[(0,o.Wm)(Q,{class:"q-ml-sm",color:"secondary",label:e.$t("navigation.options")},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(P,{clickable:"",onClick:i.enableSelected},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"radio_button_checked"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("components.plugins.enablePlugins")),1)])),_:1})])),_:1})])),_:1},8,["onClick"]),[[C]]),(0,o.wy)((0,o.Wm)(P,{clickable:"",onClick:i.disableSelected},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"radio_button_unchecked"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("components.plugins.disablePlugins")),1)])),_:1})])),_:1})])),_:1},8,["onClick"]),[[C]]),(0,o.wy)((0,o.Wm)(P,{clickable:"",onClick:i.updateSelected},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"update"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("components.plugins.updatePlugins")),1)])),_:1})])),_:1})])),_:1},8,["onClick"]),[[C]]),(0,o.Wm)(I),(0,o.wy)((0,o.Wm)(P,{clickable:"",onClick:i.uninstallSelected},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"delete_outline"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("components.plugins.removePlugins")),1)])),_:1})])),_:1})])),_:1},8,["onClick"]),[[C]])])),_:1})])),_:1},8,["label"])])])])),"no-data":(0,o.w5)((()=>[(0,o.Wm)("div",k,[(0,o.Wm)(p,{size:"2em",name:"sentiment_dissatisfied"}),(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("components.plugins.listEmpty")),1)])),_:1}),(0,o.Wm)(p,{size:"2em",name:"priority_high"})])])),_:1},8,["rows","columns","pagination","loading","filter","onRequest","selected-rows-label","selected"]),(0,o.Wm)(H,{showPluginInfo:i.showPluginInfo,onHide:i.closePluginInfo},null,8,["showPluginInfo","onHide"])],64)}t(7280),t(71);var $=t(1959),P=t(7689),I=t(8825),Z=t(52),Q=t.n(Z);const S={class:"row items-center no-wrap"},H={class:"col"},C={class:"text-h6 text-secondary"},R={class:"col-auto"},z={class:"row"},U={key:0,class:"col col-md-auto col-12 q-pa-xs"},j={class:"col col-md-grow col-12 q-pa-xs"},V=(0,o.Wm)("b",null,"Name:",-1),T=(0,o.Wm)("b",null,"Author:",-1),D=(0,o.Wm)("b",null,"Version:",-1),F=(0,o.Wm)("b",null,"Changelog:",-1),L={class:"row"},A={class:"col col-12 q-pa-xs"},B={class:"plugin-info-description"},M=(0,o.Wm)("div",{class:"row q-mt-sm"},[(0,o.Wm)("b",null,"Description:")],-1),N={class:"row q-mt-md"},J={class:"row"},O={class:"col col-12 q-pa-xs"},E={class:"row items-center no-wrap"},G={class:"col"},Y={class:"text-h6 text-secondary"},K={class:"bg-grey-2 q-pa-sm rounded-borders"};function X(e,l,t,i,n,a){const s=(0,o.up)("q-icon"),r=(0,o.up)("q-tooltip"),u=(0,o.up)("q-btn"),d=(0,o.up)("q-card-section"),c=(0,o.up)("q-tab"),p=(0,o.up)("q-tabs"),m=(0,o.up)("q-separator"),w=(0,o.up)("q-skeleton"),h=(0,o.up)("q-img"),f=(0,o.up)("q-avatar"),v=(0,o.up)("q-item-section"),b=(0,o.up)("q-item"),_=(0,o.up)("q-list"),W=(0,o.up)("q-scroll-area"),y=(0,o.up)("q-card"),q=(0,o.up)("q-tab-panel"),k=(0,o.up)("q-input"),x=(0,o.up)("q-checkbox"),$=(0,o.up)("q-select"),P=(0,o.up)("q-slider"),I=(0,o.up)("q-tab-panels"),Z=(0,o.up)("q-dialog"),Q=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(Z,{modelValue:n.pluginInfoShowDialog,"onUpdate:modelValue":l[3]||(l[3]=e=>n.pluginInfoShowDialog=e),"full-height":"",maximized:e.$q.platform.is.mobile,"transition-show":e.$q.platform.is.mobile?"slide-left":"scale","transition-hide":e.$q.platform.is.mobile?"slide-right":"scale",position:e.$q.platform.is.mobile?"right":"standard",onBeforeHide:a.beforeDialogHide,onHide:a.onDialogHide},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{style:{width:"1200px","max-width":"95vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",S,[(0,o.Wm)("div",H,[(0,o.Wm)("div",C,[(0,o.Wm)(s,{name:"extension"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("headers.pluginInfo")),1)])]),(0,o.Wm)("div",R,[e.$q.platform.is.mobile?(0,o.wy)(((0,o.wg)(),(0,o.j4)(u,{key:1,color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512)),[[Q]]):(0,o.wy)(((0,o.wg)(),(0,o.j4)(u,{key:0,color:"grey-7",dense:"",round:"",flat:"",icon:"close_fullscreen"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512)),[[Q]])])])])),_:1}),n.settings.length>0?((0,o.wg)(),(0,o.j4)(p,{key:0,modelValue:n.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>n.tab=e),align:"left",class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{label:e.$t("navigation.info"),name:"info"},null,8,["label"]),(0,o.Wm)(c,{label:e.$t("navigation.settings"),name:"settings"},null,8,["label"])])),_:1},8,["modelValue"])):(0,o.kq)("",!0),(0,o.Wm)(m),(0,o.Wm)(I,{modelValue:n.tab,"onUpdate:modelValue":l[2]||(l[2]=e=>n.tab=e),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{name:"info"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",z,[e.$q.platform.is.mobile?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)("div",U,[n.icon?((0,o.wg)(),(0,o.j4)(f,{key:1,rounded:"",size:"350px","font-size":"82px","text-color":"white",class:"shadow-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{src:n.icon,class:"",style:{"max-width":"300px"}},null,8,["src"])])),_:1})):((0,o.wg)(),(0,o.j4)(w,{key:0,width:"350px",height:"350px",class:"shadow-1"}))])),(0,o.Wm)("div",j,[n.name?((0,o.wg)(),(0,o.j4)(y,{key:1,style:e.$q.platform.is.mobile&&0===n.changelog.length?"height: 128px;":""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{style:{"max-height":"128px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[V])),_:1}),(0,o.Wm)(v,{side:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(n.name),1)])),_:1})])),_:1}),(0,o.Wm)(b,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[T])),_:1}),(0,o.Wm)(v,{side:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(n.author),1)])),_:1})])),_:1}),(0,o.Wm)(b,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[D])),_:1}),(0,o.Wm)(v,{side:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(n.version),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(m),e.$q.platform.is.mobile&&n.changelog.length>0||!e.$q.platform.is.mobile?((0,o.wg)(),(0,o.j4)(d,{key:0,style:{"max-height":"222px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[F])),_:1})])),_:1})])),_:1}),(0,o.Wm)(W,{style:{height:"150px","max-width":"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)("span",{class:"plugin-changelog",innerHTML:n.changelog},null,8,["innerHTML"])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["style"])):((0,o.wg)(),(0,o.j4)(w,{key:0,width:"100%","max-height":"350px",class:"shadow-1"}))])]),(0,o.Wm)("div",L,[(0,o.Wm)("div",A,[(0,o.Wm)("div",B,[(0,o.Wm)(y,{style:{width:"100%"}},{default:(0,o.w5)((()=>[n.description?((0,o.wg)(),(0,o.j4)(d,{key:1,class:"q-pa-md"},{default:(0,o.w5)((()=>[M,(0,o.Wm)("div",N,[(0,o.Wm)("span",{class:"plugin-description",innerHTML:n.description},null,8,["innerHTML"])])])),_:1})):((0,o.wg)(),(0,o.j4)(w,{key:0,width:"100%",height:"550px",class:"shadow-1"}))])),_:1})])])])])),_:1}),(0,o.Wm)(q,{name:"settings"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",J,[(0,o.Wm)("div",O,[(0,o.Wm)("div",null,[(0,o.Wm)(y,{style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:""},{default:(0,o.w5)((()=>[(0,o.Wm)("div",E,[(0,o.Wm)("div",G,[(0,o.Wm)("div",Y,[(0,o.Wm)(s,{name:"settings"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("headers.pluginSettings")),1)])])])])),_:1}),(0,o.Wm)(m),(0,o.Wm)(d,{class:"q-pt-none"},{default:(0,o.w5)((()=>[n.settings.length>0?((0,o.wg)(),(0,o.j4)(_,{key:0,separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(n.settings,(e=>((0,o.wg)(),(0,o.j4)(b,(0,o.dG)({class:e.display,key:e.key_id},e),{default:(0,o.w5)((()=>["text"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{filled:"",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,label:e.label,placeholder:e.label},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])])),_:2},1024)):(0,o.kq)("",!0),"textarea"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{filled:"",type:"textarea",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,label:e.label},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)):(0,o.kq)("",!0),"checkbox"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:2,onClick:l=>e.value=!e.value},{default:(0,o.w5)((()=>[(0,o.Wm)("div",K,[(0,o.Wm)(x,{"onUpdate:modelValue":[a.savePluginSettings,l=>e.value=l],modelValue:e.value,label:e.label},null,8,["onUpdate:modelValue","modelValue","label"])])])),_:2},1032,["onClick"])):(0,o.kq)("",!0),"select"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:3},{default:(0,o.w5)((()=>[(0,o.Wm)($,{"onUpdate:modelValue":[a.savePluginSettings,l=>e.value=l],filled:"",modelValue:e.value,"emit-value":"","map-options":"",options:e.select_options,"option-value":e=>Object(e)===e&&"value"in e?e.value:null,"option-label":e=>Object(e)===e&&"label"in e?e.label:"- Null -",label:e.label},null,8,["onUpdate:modelValue","modelValue","options","option-value","option-label","label"])])),_:2},1024)):(0,o.kq)("",!0),"slider"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:4,class:e.display,avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{color:"primary",name:"chevron_right"})])),_:2},1032,["class"])):(0,o.kq)("",!0),"slider"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:5,class:e.display},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,min:e.slider_options.min,max:e.slider_options.max,step:e.slider_options.step,label:"","label-value":e.label+": "+e.value+e.slider_options.suffix,"label-always":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue","min","max","step","label-value"])])),_:2},1032,["class"])):(0,o.kq)("",!0),"slider"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:6,class:e.display,avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{color:"primary",name:"chevron_left"})])),_:2},1032,["class"])):(0,o.kq)("",!0),"browse_directory"===e.input_type?((0,o.wg)(),(0,o.j4)(v,{key:7},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{readonly:"",filled:"",color:"primary",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,label:e.label,placeholder:e.label,onClick:l=>a.updateWithDirectoryBrowser(e)},{append:(0,o.w5)((()=>[(0,o.Wm)(s,{onClick:l=>a.updateWithDirectoryBrowser(e),class:"cursor-pointer",name:"folder_open"},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","label","placeholder","onClick"])])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1040,["class"])))),128))])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])])])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","maximized","transition-show","transition-hide","position","onBeforeHide","onHide"])}var ee=t(9354),le=t(1536);const te={name:"PluginInfo",components:{},data(){return{pluginInfoShowDialog:(0,$.iH)(!1),tab:(0,$.iH)("info"),id:(0,$.iH)(null),pluginId:(0,$.iH)(""),icon:(0,$.iH)(null),name:(0,$.iH)(null),description:(0,$.iH)(null),tags:(0,$.iH)(null),author:(0,$.iH)(null),version:(0,$.iH)(null),changelog:(0,$.iH)(null),status:(0,$.iH)(null),settings:(0,$.iH)([]),originalSettings:(0,$.iH)([])}},watch:{showPluginInfo(e){e.length>0?(this.fetchPluginInfo(),this.pluginInfoShowDialog=!0):(this.pluginInfoShowDialog=!1,this.resetData())}},methods:{resetData(){this.tab="info",this.id=null,this.pluginId="",this.icon=null,this.name=null,this.description=null,this.tags=null,this.author=null,this.version=null,this.changelog=null,this.status=null,this.settings=[],this.currentSettings=[]},fetchPluginInfo(){console.debug("Fetching info for "+this.showPluginInfo);let e={plugin_id:this.showPluginInfo,prefer_local:!0};this.viewingRemoteInfo&&(e.prefer_local=!1),Q()({method:"post",url:(0,P.J4)("v2","plugins/info"),data:e}).then((e=>{this.id=e.data.id,this.pluginId=e.data.plugin_id,this.icon=e.data.icon,this.name=e.data.name,this.tags=e.data.tags,this.author=e.data.author,this.version=e.data.version,this.changelog=e.data.changelog,this.status=e.data.status,this.viewingRemoteInfo||(this.settings=e.data.settings,this.currentSettings=JSON.parse(JSON.stringify(e.data.settings))),this.changelog=(0,ee.iw)(e.data.changelog),this.description=(0,ee.iw)(e.data.description)}))},settingsHaveBeenModified(){let e={};for(let l=0;l<this.settings.length;l++)e[this.settings[l].key_id]=this.settings[l].value;for(let l=0;l<this.currentSettings.length;l++)if(e[this.currentSettings[l].key_id]!==this.currentSettings[l].value)return!0;return!1},beforeDialogHide(){"undefined"!==typeof this.currentSettings&&this.currentSettings.length>0&&this.settingsHaveBeenModified()&&this.savePluginSettings()},onDialogHide(){this.$emit("hide")},savePluginSettings:function(){console.debug("Fetching info for "+this.pluginId);let e={plugin_id:this.pluginId,settings:this.settings};Q()({method:"post",url:(0,P.J4)("v2","plugins/settings/update"),data:e}).then((e=>{this.fetchPluginInfo(),this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.SavedPluginSettings"),icon:"check_circle",timeout:200,actions:[{icon:"close",color:"white"}]})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSavePluginSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},updateWithDirectoryBrowser:function(e){this.$q.dialog({component:le.Z,componentProps:{dialogHeader:this.$t("headers.selectDirectory"),initialPath:e.value,listType:"directories"}}).onOk((l=>{"undefined"!==typeof l.selectedPath&&null!==l.selectedPath&&(e.value=l.selectedPath)})).onDismiss((()=>{}))}},props:{showPluginInfo:{type:String,required:!0},viewingRemoteInfo:{type:Boolean,required:!1}},setup(){return{}}};var oe=t(6778),ie=t(151),ne=t(5589),ae=t(4554),se=t(2165),re=t(8870),ue=t(7547),de=t(3269),ce=t(5869),pe=t(5906),me=t(6602),ge=t(4103),we=t(5096),he=t(4027),fe=t(7011),ve=t(3414),be=t(2035),_e=t(7704),We=t(4842),ye=t(5735),qe=t(8516),ke=t(2064),xe=t(677),$e=t(7518),Pe=t.n($e);te.render=X;const Ie=te;Pe()(te,"components",{QDialog:oe.Z,QCard:ie.Z,QCardSection:ne.Z,QIcon:ae.Z,QBtn:se.Z,QTooltip:re.Z,QTabs:ue.Z,QTab:de.Z,QSeparator:ce.Z,QTabPanels:pe.Z,QTabPanel:me.Z,QSkeleton:ge.ZP,QAvatar:we.Z,QImg:he.Z,QList:fe.Z,QItem:ve.Z,QItemSection:be.Z,QScrollArea:_e.Z,QInput:We.Z,QCheckbox:ye.Z,QSelect:qe.Z,QSlider:ke.Z}),Pe()(te,"directives",{ClosePopup:xe.Z});const Ze={class:"row items-center no-wrap"},Qe={class:"col-auto"},Se={class:"col"},He={class:"text-h6 text-secondary"},Ce={class:"q-pt-md q-px-lg",style:{width:"1000px","max-width":"90vw"}},Re={class:"q-pa-md"},ze={class:"row"},Ue={class:"row"},je={class:"text-weight-medium"},Ve={class:"text-weight-medium"};function Te(e,l,t,i,n,a){const s=(0,o.up)("q-tooltip"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-icon"),d=(0,o.up)("q-card-section"),c=(0,o.up)("q-item-label"),p=(0,o.up)("q-item-section"),m=(0,o.up)("q-separator"),w=(0,o.up)("q-skeleton"),h=(0,o.up)("q-img"),f=(0,o.up)("q-avatar"),v=(0,o.up)("q-item"),b=(0,o.up)("draggable"),_=(0,o.up)("q-list"),W=(0,o.up)("q-card"),y=(0,o.up)("q-expansion-item"),q=(0,o.up)("q-dialog"),k=(0,o.Q2)("close-popup"),x=(0,o.Q2)("touch-swipe");return(0,o.wg)(),(0,o.j4)(q,{ref:"pluginFlowDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"slide-right","transition-hide":"slide-left","full-height":"",position:"left",onHide:a.onDialogHide},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(W,{style:{"max-width":"100vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",Ze,[(0,o.Wm)("div",Qe,[(0,o.wy)((0,o.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.back")),1)])),_:1})])),_:1},512),[[k]])]),(0,o.Wm)("div",Se,[(0,o.Wm)("div",He,[(0,o.Wm)(u,{name:"low_priority"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("headers.pluginFlow")),1)])])])])),_:1}),(0,o.Wm)(d,{class:"q-pt-none q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",Ce,[(0,o.Wm)("p",{class:"q-mb-xs",innerHTML:e.$t("components.plugins.configurePluginFlowSection.line1")},null,8,["innerHTML"]),(0,o.Wm)("p",{class:"q-mb-xs",innerHTML:e.$t("components.plugins.configurePluginFlowSection.line2")},null,8,["innerHTML"]),(0,o.Wm)("p",{class:"q-mb-xs",innerHTML:e.$t("components.plugins.configurePluginFlowSection.line3")},null,8,["innerHTML"]),(0,o.Wm)("p",{class:"q-mb-xs",innerHTML:e.$t("components.plugins.configurePluginFlowSection.line4")},null,8,["innerHTML"])])])),_:1}),(0,o.Wm)(d,{class:"q-pt-none q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",Re,[(0,o.Wm)("div",ze,[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.pluginTypes,(l=>((0,o.wg)(),(0,o.j4)(y,(0,o.dG)({key:l.type},l,{group:"pluginTypes",icon:"list_alt",label:e.$t(l.labelCode).length<50?e.$t(l.labelCode):e.$t(l.labelCode).substring(0,48)+"..",caption:e.$t(l.labelCode+"Caption")!==l.labelCode+"Caption"?e.$t(l.labelCode+"Caption"):"","caption-lines":"4",style:{width:"1000px","max-width":"90vw"},class:"text-h8 text-primary"}),{default:(0,o.w5)((()=>[(0,o.Wm)(W,{inline:"",style:{width:"1000px","max-width":"90vw"},class:"q-ma-lg-xs q-pa-lg-sm q-pa-sm-none"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",Ue,[(0,o.Wm)(d,{class:"col justify-center full-height full-width text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{bordered:"",class:"rounded-borders",style:{"max-width":"1500px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,(0,o.dG)({class:"plugin-flow-group","item-key":"order",tag:"transition-group","component-data":{tag:"ul",name:"flip-list",type:"transition"},modelValue:e.pluginFlowByType[l.type],"onUpdate:modelValue":t=>e.pluginFlowByType[l.type]=t},a.dragOptions,{onEnd:e=>a.savePluginFlow(l.type)}),{item:(0,o.w5)((({element:l,index:t})=>[(0,o.Wm)(v,{key:t,class:"q-pa-none rounded-borders","active-class":"plugin-flow-item"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{side:"",class:"gt-xs q-px-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{lines:"1",class:"text-left"},{default:(0,o.w5)((()=>[(0,o.Wm)("span",je,(0,g.zw)(t+1),1),(0,o.Wm)(s,{anchor:"center right",self:"center left",class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.position")),1)])),_:1})])),_:2},1024)])),_:2},1024),(0,o.Wm)(m,{inset:"",vertical:"",class:"gt-xs q-mx-sm"}),(0,o.Wm)(p,{avatar:"",class:"q-px-sm q-mx-sm"},{default:(0,o.w5)((()=>[l.icon?((0,o.wg)(),(0,o.j4)(f,{key:1,rounded:"",size:"35px"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{src:l.icon,class:"",style:{"max-width":"30px"}},null,8,["src"])])),_:2},1024)):((0,o.wg)(),(0,o.j4)(w,{key:0,width:"35px",height:"35px"}))])),_:2},1024),(0,o.Wm)(p,{top:"",class:"q-mx-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{lines:"1",class:"text-left"},{default:(0,o.w5)((()=>[(0,o.Wm)("span",Ve,(0,g.zw)(l.name),1)])),_:2},1024),(0,o.Wm)(c,{caption:"",lines:"1",class:"text-left q-ml-sm"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(l.description),1)])),_:2},1024),(0,o.Wm)(s,{anchor:"center middle",self:"center middle",class:"bg-white text-primary lt-sm"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(l.name),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(m,{inset:"",vertical:"",class:"q-mx-sm"}),(0,o.Wm)(p,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"drag_handle",class:"",style:{"max-width":"30px"}})])),_:1})])),_:1})])),_:2},1024)])),_:2},1040,["modelValue","onUpdate:modelValue","onEnd"])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])),_:2},1040,["label","caption"])))),128))])),_:1})])])])),_:1})])),_:1},512),[[x,a.hide,void 0,{touch:!0,left:!0}]])])),_:1},8,["maximized","onHide"])}var De=t(470),Fe=t.n(De);const Le={name:"PluginFlowDialog",components:{draggable:Fe()},props:{},emits:["ok","hide","path"],methods:{show(){this.$refs.pluginFlowDialogRef.show()},hide(){this.$refs.pluginFlowDialogRef.hide()},onDialogHide(){this.$emit("hide")},fetchPluginTypes:function(){Q()({method:"get",url:(0,P.J4)("v2","plugins/flow/types")}).then((e=>{let l=e.data.results,t=[];for(let o=0;o<l.length;o++){let e=l[o].split("_").map(((e,l)=>0===l?e:e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())).join("");t[t.length]={type:l[o],labelCode:"components.plugins.types."+e}}this.pluginTypes=t,this.fetchPluginFlow()}))},fetchPluginFlow:function(){for(let e=0;e<this.pluginTypes.length;e++){let l={plugin_type:this.pluginTypes[e].type};Q()({method:"post",url:(0,P.J4)("v2","plugins/flow"),data:l}).then((l=>{this.pluginFlowByType[this.pluginTypes[e].type]=l.data.results}))}},savePluginFlow:function(e){let l={plugin_type:e,plugin_flow:this.pluginFlowByType[e]};Q()({method:"post",url:(0,P.J4)("v2","plugins/flow/save"),data:l}).then((e=>{})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("components.plugins.errorSavingFlow"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},movePluginInFlow:function(e,l,t,o){let i,n=this.pluginFlowByType[e].slice();if("up"===o){if(0===l)return void console.debug("Cannot move up - already at the top");i=l-1}if("down"===o&&(i=l+1,i===n.length))return void console.debug("Cannot move down - already at the bottom");let a=n[l];n.splice(l,1),n.splice(i,0,a),this.pluginFlowByType[e]=n,this.savePluginFlow(e)}},created(){this.fetchPluginTypes()},data:function(){return{options:{dropzoneSelector:".q-list",draggableSelector:".q-item"},pluginTypes:(0,$.iH)([]),pluginFlowByType:(0,$.iH)({}),files:(0,$.iH)([])}},computed:{dragOptions(){return{animation:100,group:"pluginFlow",disabled:!1,ghostClass:"ghost",direction:"vertical",delay:200,delayOnTouchOnly:!0}}}};var Ae=t(4615),Be=t(2350),Me=t(8020);Le.render=Te;const Ne=Le;Pe()(Le,"components",{QDialog:oe.Z,QCard:ie.Z,QCardSection:ne.Z,QBtn:se.Z,QTooltip:re.Z,QIcon:ae.Z,QList:fe.Z,QExpansionItem:Ae.Z,QItem:ve.Z,QItemSection:be.Z,QItemLabel:Be.Z,QSeparator:ce.Z,QSkeleton:ge.ZP,QAvatar:we.Z,QImg:he.Z}),Pe()(Le,"directives",{TouchSwipe:Me.Z,ClosePopup:xe.Z});const Je={class:"row items-center no-wrap"},Oe={class:"col-auto"},Ee={class:"col"},Ge={class:"text-h6 text-secondary"},Ye={class:"q-pa-md"},Ke={class:"row q-col-gutter-xs q-ma-xs"},Xe={key:0,class:"col-auto"},el={class:"col-auto"},ll={class:"col-auto"},tl={class:"row q-col-gutter-xs q-ma-xs"},ol={class:"col-auto"},il={class:"full-width row flex-center text-accent q-gutter-sm"},nl={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},al={class:"row"},sl={style:{overflow:"hidden","white-space":"nowrap"}},rl={class:"row float-right"},ul=(0,o.Uk)(" Update Available "),dl=(0,o.Uk)(" Installed "),cl={class:"row q-col-gutter-md"},pl={class:"col-auto"},ml={class:"absolute-full flex flex-center bg-negative text-white text-caption"},gl={class:"col"},wl={class:"row q-col-gutter-md"},hl={class:"col-4 self-start"},fl={class:"col self-end"},vl={class:"row q-col-gutter-md"},bl={class:"col-4 self-start"},_l={class:"col self-end"},Wl={class:"row q-col-gutter-md"},yl={class:"col-4 self-start"},ql={class:"col self-end"},kl={class:"row"},xl={class:"col-auto items-end"},$l={class:"row justify-center q-mt-md"};function Pl(e,l,t,i,n,a){const s=(0,o.up)("q-tooltip"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-icon"),d=(0,o.up)("q-card-section"),c=(0,o.up)("PluginInstallerManageRepos"),p=(0,o.up)("q-input"),m=(0,o.up)("q-select"),w=(0,o.up)("q-item-label"),h=(0,o.up)("q-separator"),f=(0,o.up)("q-skeleton"),v=(0,o.up)("q-img"),b=(0,o.up)("q-avatar"),_=(0,o.up)("q-spinner"),W=(0,o.up)("q-inner-loading"),y=(0,o.up)("q-card"),q=(0,o.up)("q-table"),k=(0,o.up)("q-pagination"),x=(0,o.up)("PluginInfo"),$=(0,o.up)("q-dialog"),P=(0,o.Q2)("close-popup"),I=(0,o.Q2)("touch-swipe");return(0,o.wg)(),(0,o.j4)($,{ref:"dialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"slide-right","transition-hide":"slide-left","full-height":"",position:"left",onHide:a.onDialogHide},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(y,{style:[e.$q.platform.is.mobile?"max-width: 100vw;":"max-width: 95vw;",{width:"2000px"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",Je,[(0,o.Wm)("div",Oe,[(0,o.wy)((0,o.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_back"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.back")),1)])),_:1})])),_:1},512),[[P]])]),(0,o.Wm)("div",Ee,[(0,o.Wm)("div",Ge,[(0,o.Wm)(u,{name:"extension"}),(0,o.Uk)(" "+(0,g.zw)(e.$t("headers.pluginInstaller")),1)])])])])),_:1}),(0,o.Wm)(d,{class:"q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",Ye,[(0,o.Wm)(q,{grid:"","card-class":"bg-primary text-white",rows:e.rows,columns:e.columns,"row-key":"name",filter:e.filter,"hide-header":"",pagination:e.pagination,"onUpdate:pagination":l[3]||(l[3]=l=>e.pagination=l),"hide-pagination":""},(0,o.Nv)({"top-left":(0,o.w5)((()=>[(0,o.Wm)("div",Ke,[e.$q.platform.is.mobile?((0,o.wg)(),(0,o.j4)("div",Xe,[(0,o.Wm)(c)])):(0,o.kq)("",!0),(0,o.Wm)("div",el,[(0,o.Wm)(p,{filled:"",class:"shadow-1",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[1]||(l[1]=l=>e.filter=l),placeholder:e.$t("navigation.search")},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"search"})])),_:1},8,["modelValue","placeholder"])]),(0,o.Wm)("div",ll,[(0,o.Wm)(m,{filled:"",class:"shadow-1","onUpdate:modelValue":[a.loadInstallablePlugins,l[2]||(l[2]=l=>e.tagFilter=l)],dense:"",label:e.$t("components.plugins.categoryFilter"),modelValue:e.tagFilter,options:e.tags,style:{"min-width":"300px"}},{append:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"style"})])),_:1},8,["onUpdate:modelValue","label","modelValue","options"])])])])),"no-data":(0,o.w5)((()=>[(0,o.Wm)("div",il,[(0,o.Wm)(u,{size:"2em",name:"sentiment_dissatisfied"}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("components.plugins.listEmpty")),1)])),_:1}),(0,o.Wm)(u,{size:"2em",name:"priority_high"})])])),item:(0,o.w5)((l=>[(0,o.Wm)("div",nl,[(0,o.Wm)(y,{style:{"min-height":"220px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{style:{"min-height":"80px"}},{default:(0,o.w5)((()=>[(0,o.Wm)("div",al,[(0,o.Wm)("span",sl,[(0,o.Wm)("strong",null,(0,g.zw)(l.row.name),1)])]),(0,o.Wm)("div",rl,[l.row.update_available?((0,o.wg)(),(0,o.j4)(r,{key:0,color:"warning",dense:"",round:"",flat:"",icon:"check_circle"},{default:(0,o.w5)((()=>[ul])),_:1})):l.row.installed?((0,o.wg)(),(0,o.j4)(r,{key:1,color:"positive",dense:"",round:"",flat:"",icon:"check_circle"},{default:(0,o.w5)((()=>[dl])),_:1})):(0,o.kq)("",!0)])])),_:2},1024),l.row.update_available?((0,o.wg)(),(0,o.j4)(h,{key:0,color:"warning"})):l.row.installed?((0,o.wg)(),(0,o.j4)(h,{key:1,color:"positive"})):((0,o.wg)(),(0,o.j4)(h,{key:2})),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)("div",cl,[(0,o.Wm)("div",pl,[l.row.icon?((0,o.wg)(),(0,o.j4)(b,{key:1,rounded:"",size:"100px"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{src:l.row.icon,style:{height:"100%","max-width":"100px"}},{error:(0,o.w5)((()=>[(0,o.Wm)("div",ml,(0,g.zw)(e.$t("status.cannotLoadImage")),1)])),_:2},1032,["src"])])),_:2},1024)):((0,o.wg)(),(0,o.j4)(f,{key:0,width:"100px",height:"100px"}))]),(0,o.Wm)("div",gl,[(0,o.Wm)("div",wl,[(0,o.Wm)("div",hl,(0,g.zw)(e.$t("components.plugins.author")),1),(0,o.Wm)("div",fl,(0,g.zw)(l.row.author),1)]),(0,o.Wm)("div",vl,[(0,o.Wm)("div",bl,(0,g.zw)(e.$t("components.plugins.version")),1),(0,o.Wm)("div",_l,(0,g.zw)(l.row.version),1)]),(0,o.Wm)("div",Wl,[(0,o.Wm)("div",yl,(0,g.zw)(e.$t("components.plugins.repo")),1),(0,o.Wm)("div",ql,(0,g.zw)(l.row.repo_name),1)])])])])),_:2},1024),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)("div",kl,[(0,o.Wm)("div",xl,[l.row.update_available?((0,o.wg)(),(0,o.j4)(r,{key:0,onClick:e=>a.installPlugin(l.row.plugin_id,l.row.repo_id),color:"accent",dense:"",round:"",flat:"",icon:"update"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.update")),1)])),_:1})])),_:2},1032,["onClick"])):l.row.installed?((0,o.wg)(),(0,o.j4)(r,{key:1,onClick:e=>a.installPlugin(l.row.plugin_id,l.row.repo_id),color:"accent",dense:"",round:"",flat:"",icon:"download_for_offline"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.reinstall")),1)])),_:1})])),_:2},1032,["onClick"])):((0,o.wg)(),(0,o.j4)(r,{key:2,onClick:e=>a.installPlugin(l.row.plugin_id,l.row.repo_id),color:"accent",dense:"",round:"",flat:"",icon:"download_for_offline"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.install")),1)])),_:1})])),_:2},1032,["onClick"])),(0,o.Wm)(r,{onClick:t=>e.showPluginInfo=l.row.plugin_id,color:"secondary",dense:"",round:"",flat:"",icon:"info"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("tooltips.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"])])])])),_:2},1024),(0,o.Wm)(W,{showing:e.pluginInstalling[l.row.repo_id+l.row.plugin_id]},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{size:"100px",color:"secondary"})])),_:2},1032,["showing"])])),_:2},1024)])])),_:2},[e.$q.platform.is.mobile?void 0:{name:"top-right",fn:(0,o.w5)((()=>[(0,o.Wm)("div",tl,[(0,o.Wm)("div",ol,[(0,o.Wm)(c,{onRepoReloaded:a.reloadPluginsPostRepoReloaded},null,8,["onRepoReloaded"])])])]))}]),1032,["rows","columns","filter","pagination"]),(0,o.Wm)("div",$l,[(0,o.Wm)(k,{modelValue:e.pagination.page,"onUpdate:modelValue":l[4]||(l[4]=l=>e.pagination.page=l),color:"secondary",max:e.pagesNumber,size:"md","direction-links":"","boundary-links":""},null,8,["modelValue","max"])])])])),_:1})])),_:1},8,["style"]),[[I,a.hide,void 0,{touch:!0,left:!0}]]),(0,o.Wm)(x,{showPluginInfo:e.showPluginInfo,viewingRemoteInfo:e.viewingRemoteInfo,onHide:a.closePluginInfo},null,8,["showPluginInfo","viewingRemoteInfo","onHide"])])),_:1},8,["maximized","onHide"])}t(6801),t(7098);const Il={class:"row no-wrap q-pa-md"},Zl={class:"column"},Ql={class:"row no-wrap q-pa-md"},Sl={class:"column"},Hl={class:"text-h6 q-mb-md"},Cl={class:"column items-center"};function Rl(e,l,t,i,n,a){const s=(0,o.up)("q-btn"),r=(0,o.up)("q-input"),u=(0,o.up)("q-btn-dropdown"),d=(0,o.up)("q-item-label"),c=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),m=(0,o.up)("q-list"),w=(0,o.up)("q-separator"),h=(0,o.up)("q-skeleton"),f=(0,o.up)("q-avatar"),v=(0,o.up)("q-btn-group");return(0,o.wg)(),(0,o.j4)(o.HY,null,[e.$q.platform.is.mobile?((0,o.wg)(),(0,o.j4)(s,{key:0,onClick:l[1]||(l[1]=e=>a.reloadAllReposData()),class:"q-mb-xs",color:"secondary",label:e.$t("components.plugins.refreshRepositories")},null,8,["label"])):(0,o.kq)("",!0),(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[e.$q.platform.is.mobile?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(s,{key:0,onClick:l[2]||(l[2]=e=>a.reloadAllReposData()),color:"secondary",label:e.$t("components.plugins.refreshRepositories")},null,8,["label"])),(0,o.Wm)(u,{color:"secondary",label:e.$t("components.plugins.addRepository")},{default:(0,o.w5)((()=>[(0,o.Wm)("div",null,[(0,o.Wm)("div",Il,[(0,o.Wm)("div",Zl,[(0,o.Wm)(r,{style:{"min-width":"400px"},filled:"",type:"textarea",modelValue:n.newRepo,"onUpdate:modelValue":l[3]||(l[3]=e=>n.newRepo=e),label:e.$t("components.plugins.newRepository")},null,8,["modelValue","label"]),(0,o.Wm)(s,{onClick:l[4]||(l[4]=e=>a.saveNewRepo()),color:"secondary",label:e.$t("navigation.save")},null,8,["label"])])])])])),_:1},8,["label"]),(0,o.Wm)(u,{"auto-close":"",color:"secondary",label:e.$t("components.plugins.repoList")},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(n.repoList,(l=>((0,o.wg)(),(0,o.j4)("div",(0,o.dG)({key:l.id},l),[(0,o.Wm)("div",Ql,[(0,o.Wm)("div",Sl,[(0,o.Wm)("div",Hl,(0,g.zw)(e.$t("headers.information"))+":",1),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("components.plugins.repoName")),1)])),_:1}),(0,o.Wm)(d,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(l.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e.$t("components.plugins.repoSource")),1)])),_:1}),(0,o.Wm)(d,{caption:""},{default:(0,o.w5)((()=>[(0,o.Wm)("span",{class:"cursor-pointer clickable",onClick:e=>a.goToRepoSource(l.path)},(0,g.zw)(l.path),9,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)]),(0,o.Wm)(w,{vertical:"",inset:"",class:"q-mx-lg"}),(0,o.Wm)("div",Cl,[l.icon?((0,o.wg)(),(0,o.j4)(f,{key:1,rounded:"",size:"72px"},{default:(0,o.w5)((()=>[(0,o.Wm)("img",{src:l.icon},null,8,["src"])])),_:2},1024)):((0,o.wg)(),(0,o.j4)(h,{key:0,width:"72px",height:"72px"})),(0,o.Wm)(s,{class:"q-ma-xs",color:"negative",label:"Remove",push:"",size:"sm",onClick:e=>a.removeRepo(l.path)},null,8,["onClick"])])])],16)))),128))])),_:1},8,["label"])])),_:1})],64)}var zl=t(3437);const Ul={data(){return{repoList:[],newRepo:""}},methods:{goToRepoSource:function(e){(0,zl.Z)(e,null)},getRepoInfo:function(){Q()({method:"get",url:(0,P.J4)("v2","plugins/repos/list")}).then((e=>{let l=[];for(let t=0;t<e.data.repos.length;t++){let o=e.data.repos[t];l[l.length]={id:o.id,name:o.name,icon:o.icon,path:o.path}}this.repoList=l})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:"Failed to fetch the list of plugin repos.",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},updateRepoList:function(e){let l={repos_list:e};return Q()({method:"post",url:(0,P.J4)("v2","plugins/repos/update"),data:l})},reloadAllReposData:function(){Q()({method:"post",url:(0,P.J4)("v2","plugins/repos/reload")}).then((e=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.reposRefreshSuccess"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),this.getRepoInfo(),this.$emit("repoReloaded")})).catch((()=>{this.$q.notify({color:"warning",position:"top",message:this.$t("notifications.reposRefreshFailure"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},saveNewRepo:function(){if(this.newRepo.length>0){let e=[];for(let l=0;l<this.repoList.length;l++){let t=this.repoList[l].path;if(this.newRepo.trim()===t)return void this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.repoAlreadyExists")+' "'+this.newRepo.trim()+'"',icon:"report_problem",actions:[{icon:"close",color:"white"}]});e[e.length]=t}e[e.length]=this.newRepo.trim(),this.updateRepoList(e).then((e=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.saved"),icon:"cloud_done",actions:[{icon:"close",color:"white"}]}),this.newRepo="",this.reloadAllReposData(),this.$emit("repoReloaded",!0)})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.newRepoAddFailed"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},removeRepo:function(e){let l=[];for(let t=0;t<this.repoList.length;t++){let o=this.repoList[t];e.trim()!==o.path&&(l[l.length]=o.path)}this.updateRepoList(l).then((l=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.repoRemovedSuccess")+' "'+e.trim()+'"',icon:"check_circle",actions:[{icon:"close",color:"white"}]}),this.reloadAllReposData(),this.$emit("repoReloaded")})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.repoRemovedFailed"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},created(){this.getRepoInfo()},emits:["repoReloaded"]};var jl=t(6375),Vl=t(2226);Ul.render=Rl;const Tl=Ul;Pe()(Ul,"components",{QBtn:se.Z,QBtnGroup:jl.Z,QBtnDropdown:Vl.Z,QInput:We.Z,QList:fe.Z,QItem:ve.Z,QItemSection:be.Z,QItemLabel:Be.Z,QSeparator:ce.Z,QSkeleton:ge.ZP,QAvatar:we.Z});const Dl=[{name:"icon",required:!0,label:"",align:"left",field:"icon",sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"author",align:"center",label:"Author",field:"author",sortable:!1},{name:"version",align:"center",label:"Version",field:"version",sortable:!1}],Fl={name:"PluginInstallerDialog",props:{},emits:["ok","hide","path"],components:{PluginInstallerManageRepos:Tl,PluginInfo:Ie},methods:{show(){this.$refs.dialogRef.show()},hide(){this.$refs.dialogRef.hide()},onDialogHide(){this.$emit("hide")},installPlugin:function(e,l){console.debug("Installing plugin by Plugin ID: "+e+"from Repo ID - "+l);let t={plugin_id:e,repo_id:l};this.pluginInstalling[l+e]=!0,Q()({method:"post",url:(0,P.J4)("v2","plugins/install"),data:t}).then((t=>{this.$q.notify({color:"positive",position:"top",message:this.$t("notifications.installed"),icon:"check_circle",actions:[{icon:"close",color:"white"}]});for(let l=0;l<this.rows.length;l++){let t=this.rows[l];t.plugin_id===e&&(t.installed=!0,t.update_available=!1)}this.pluginInstalling[l+e]=!1})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToInstallPlugin"),icon:"report_problem",actions:[{icon:"close",color:"white"}]}),this.pluginInstalling[l+e]=!1}))},loadInstallablePlugins:function(){Q()({method:"get",url:(0,P.J4)("v2","plugins/installable")}).then((e=>{let l=e.data.plugins,t=[],o=[];for(let i=0;i<l.length;i++){let e=l[i],n=e.tags.split(",");for(let l=0;l<n.length;l++){let e=n[l];o.includes(e)||(o[o.length]=e.trim())}("All"===this.tagFilter||e.tags.includes(this.tagFilter))&&(t[t.length]={plugin_id:e.plugin_id,name:e.name,author:e.author,description:e.description,version:e.version,icon:e.icon,tags:e.tags,installed:e.status.installed,update_available:e.status.update_available,package_url:e.package_url,changelog_url:e.changelog_url,repo_name:e.repo_name,repo_id:e.repo_id})}"All"!==this.tagFilter&&(this.pagination.page=1),this.tags=["All"].concat(o.sort()),this.rows=t}))},reloadPluginsPostRepoReloaded:function(){this.pagination.page=1,this.loadInstallablePlugins()},closePluginInfo:function(){this.showPluginInfo=""}},created(){this.loadInstallablePlugins()},data:function(){const e=(0,$.iH)([]),l=(0,$.iH)("All"),t=(0,$.iH)([]),i=(0,$.iH)(""),n=(0,$.iH)({page:1,rowsPerPage:12});return{filter:i,columns:Dl,rows:t,pagination:n,pagesNumber:(0,o.Fl)((()=>Math.ceil(t.value.length/n.value.rowsPerPage))),tags:e,tagFilter:l,viewingRemoteInfo:(0,$.iH)(!0),showPluginInfo:(0,$.iH)(""),pluginInstalling:(0,$.iH)({})}}};var Ll=t(6429),Al=t(6941),Bl=t(9754),Ml=t(7300);Fl.render=Pl;const Nl=Fl;Pe()(Fl,"components",{QDialog:oe.Z,QCard:ie.Z,QCardSection:ne.Z,QBtn:se.Z,QTooltip:re.Z,QIcon:ae.Z,QTable:Ll.Z,QInput:We.Z,QSelect:qe.Z,QItemLabel:Be.Z,QSeparator:ce.Z,QSkeleton:ge.ZP,QAvatar:we.Z,QImg:he.Z,QInnerLoading:Al.Z,QSpinner:Bl.Z,QPagination:Ml.Z}),Pe()(Fl,"directives",{TouchSwipe:Me.Z,ClosePopup:xe.Z});const Jl=[{name:"icon",label:"",required:!0,align:"left",field:"icon",sortable:!1},{name:"name",label:"Plugin",required:!0,align:"left",field:"name",sortable:!0},{name:"description",label:"Description",required:!0,align:"left",field:"description",sortable:!0},{name:"tags",label:"Tags",required:!0,align:"left",field:"tags",sortable:!0},{name:"author",label:"Author",required:!0,align:"left",field:"author",sortable:!0},{name:"version",label:"Version",required:!0,align:"left",field:"version",sortable:!0},{name:"status",label:"Status",required:!0,align:"left",field:"status",sortable:!1}],Ol={components:{PluginInfo:Ie},setup(){const e=(0,I.Z)(),l=(0,$.iH)([]),t=(0,$.iH)(""),i=(0,$.iH)(!1),n=(0,$.iH)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),a=(0,$.iH)([]),s=(0,$.iH)([]);function r(){let e="";return 0!==a.value.length&&(e=`${a.value.length} record${a.value.length>1?"s":""} selected of ${l.value.length}`),e}function u(){if(0!==a.value.length){let l=[];for(let e=0;e<a.value.length;e++){let t=a.value[e];l[l.length]=t.id}let o={id_list:l};Q()({method:"post",url:(0,P.J4)("v2","plugins/enable"),data:o}).then((e=>{g({pagination:n.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be enabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function d(){if(0!==a.value.length){let l=[];for(let e=0;e<a.value.length;e++){let t=a.value[e];l[l.length]=t.id}let o={id_list:l};Q()({method:"post",url:(0,P.J4)("v2","plugins/disable"),data:o}).then((e=>{g({pagination:n.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function c(){if(0!==a.value.length){let l=[];for(let e=0;e<a.value.length;e++){let t=a.value[e];l[l.length]=t.id}let o={id_list:l};Q()({method:"post",url:(0,P.J4)("v2","plugins/update"),data:o}).then((e=>{g({pagination:n.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function p(){if(0!==a.value.length){let l=[];for(let e=0;e<a.value.length;e++){let t=a.value[e];l[l.length]=t.id}let o={id_list:l};Q()({method:"delete",url:(0,P.J4)("v2","plugins/remove"),data:o}).then((e=>{g({pagination:n.value,filter:t.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function m(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,ee.nx)(e)}function g(t){const{page:o,rowsPerPage:a,sortBy:r,descending:u}=t.pagination,d=t.filter;i.value=!0;const c=0===a?n.value.rowsNumber:a,p=(o-1)*a;let g={start:p,length:c,search_value:d,order_by:r,order_direction:u?"desc":"asc"};Q()({method:"post",url:(0,P.J4)("v2","plugins/installed"),data:g}).then((e=>{n.value.rowsNumber=e.data.recordsFiltered,s.value=[];for(let l=0;l<e.data.results.length;l++){let t=e.data.results[l];s.value[l]={id:t.id,plugin_id:t.plugin_id,icon:t.icon,name:t.name,description:m(t.description),tags:t.tags,author:t.author,version:t.version,status:t.status}}l.value.splice(0,l.value.length,...s.value),n.value.page=o,n.value.rowsPerPage=a,n.value.sortBy=r,n.value.descending=u,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const w=(0,$.iH)("");function h(e){w.value="";for(let l=0;l<s.value.length;l++){let t=s.value[l];t.id===e&&(w.value=t.plugin_id)}}function f(){w.value=""}function v(){e.dialog({component:Ne,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{}))}function b(){e.dialog({component:Nl,componentProps:{}}).onOk((e=>{})).onDismiss((()=>{g({pagination:n.value,filter:t.value})}))}return(0,o.bv)((()=>{g({pagination:n.value,filter:void 0})})),{selected:a,filter:t,loading:i,pagination:n,columns:Jl,rows:l,getSelectedString:r,onRequest:g,enableSelected:u,disableSelected:d,updateSelected:c,uninstallSelected:p,openPluginInfo:h,showPluginInfo:w,closePluginInfo:f,openPluginFlow:v,openPluginInstaller:b}}};var El=t(3884),Gl=t(9721);Ol.render=x;const Yl=Ol;Pe()(Ol,"components",{QTable:Ll.Z,QTd:El.Z,QBtn:se.Z,QSkeleton:ge.ZP,QAvatar:we.Z,QBadge:Gl.Z,QInput:We.Z,QIcon:ae.Z,QBtnDropdown:Vl.Z,QList:fe.Z,QItem:ve.Z,QItemSection:be.Z,QItemLabel:Be.Z,QSeparator:ce.Z}),Pe()(Ol,"directives",{ClosePopup:xe.Z});var Kl=t(4190),Xl=t(5948);const et={components:{PluginsInstalledTable:Yl},setup(){const{t:e}=(0,Xl.QT)();let l=null,t=(0,Kl.A)(e);function i(){l=t.init()}function n(){t.close()}(0,o.bv)((()=>{i()})),(0,o.Ah)((()=>{n()}))}};var lt=t(4379);et.render=m;const tt=et;Pe()(et,"components",{QPage:lt.Z,QSeparator:ce.Z,QCard:ie.Z,QBtn:se.Z})}}]);