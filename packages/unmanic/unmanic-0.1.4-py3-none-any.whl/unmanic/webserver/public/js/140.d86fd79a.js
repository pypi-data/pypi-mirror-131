(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[140],{8140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ue});var s=n(3673),l=n(2323),i=n(1561),a=n.n(i);const o={class:"q-pa-none"},d={class:"row"},r={class:"col q-ma-sm"},m={class:"q-pa-md",style:{"max-width":"500px"}},c={class:"q-mb-none"},u={class:"q-gutter-sm"},g={class:"q-mb-none"},p={class:"q-gutter-sm"},h={class:"row"},k={class:"col-3"},b={class:"text-weight-bold"},w={class:"col-grow"},v={class:"q-pl-none"},f={class:"row"},W={class:"col-3"},_={class:"text-weight-bold"},q={class:"col-grow"},y={class:"q-pl-none"},I={class:"text-grey-8 q-gutter-xs"},T={class:"text-h6"},$={key:0},C={class:"row"},Q={class:"col-6 text-center"},S=(0,s.Uk)(" Library ");function R(e,t,n,i,R,Z){const x=(0,s.up)("q-skeleton"),V=(0,s.up)("q-input"),z=(0,s.up)("q-separator"),H=(0,s.up)("q-img"),j=(0,s.up)("q-item-section"),U=(0,s.up)("q-item-label"),D=(0,s.up)("q-btn"),P=(0,s.up)("q-item"),A=(0,s.up)("q-list"),L=(0,s.up)("q-space"),N=(0,s.up)("q-tooltip"),B=(0,s.up)("q-bar"),J=(0,s.up)("q-card-section"),O=(0,s.up)("q-card-actions"),F=(0,s.up)("q-card"),K=(0,s.up)("q-dialog"),Y=(0,s.up)("q-form"),E=(0,s.up)("q-page"),G=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(E,{padding:""},{default:(0,s.w5)((()=>[(0,s.Wm)("div",o,[(0,s.Wm)("div",d,[(0,s.Wm)("div",r,[(0,s.Wm)("div",m,[(0,s.Wm)(Y,{onSubmit:Z.save,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)("h5",c,(0,l.zw)(e.$t("components.settings.link.thisInstallation")),1),(0,s.Wm)("div",u,[null===R.installationName?((0,s.wg)(),(0,s.j4)(x,{key:0,type:"QInput"})):(0,s.kq)("",!0),null!==R.installationName?((0,s.wg)(),(0,s.j4)(V,{key:1,outlined:"",color:"primary",modelValue:R.installationName,"onUpdate:modelValue":t[1]||(t[1]=e=>R.installationName=e),label:e.$t("components.settings.link.nameThisInstall"),placeholder:R.installationName},null,8,["modelValue","label","placeholder"])):(0,s.kq)("",!0)]),(0,s.Wm)(z,{class:"q-my-lg"}),(0,s.Wm)("h5",g,(0,l.zw)(e.$t("components.settings.link.remoteInstallations")),1),(0,s.Wm)("div",p,[null===R.remoteInstallations?((0,s.wg)(),(0,s.j4)(x,{key:0,type:"text"})):(0,s.kq)("",!0),(0,s.Wm)(A,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(R.remoteInstallations,((t,n)=>((0,s.wg)(),(0,s.j4)(P,{key:n,"active-class":"schedule-list-item"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{avatar:""},{default:(0,s.w5)((()=>[t.available?((0,s.wg)(),(0,s.j4)(H,{key:0,src:a()})):((0,s.wg)(),(0,s.j4)(H,{key:1,"img-style":{filter:"grayscale(100%)"},src:a()},null,8,["img-style"]))])),_:2},1024),(0,s.Wm)(z,{inset:"",vertical:"",class:"q-mr-sm"}),(0,s.Wm)(j,{class:"q-px-sm q-mx-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{lines:"1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.address),1)])),_:2},1024),(0,s.Wm)(U,{caption:"",lines:"2"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",h,[(0,s.Wm)("div",k,[(0,s.Wm)("span",b,(0,l.zw)(e.$t("components.settings.link.name"))+":",1)]),(0,s.Wm)("div",w,[(0,s.Wm)("span",v,(0,l.zw)(t.name),1)])])])),_:2},1024),(0,s.Wm)(U,{caption:"",lines:"2"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",f,[(0,s.Wm)("div",W,[(0,s.Wm)("span",_,(0,l.zw)(e.$t("components.settings.link.version"))+":",1)]),(0,s.Wm)("div",q,[(0,s.Wm)("span",y,(0,l.zw)(t.version),1)])])])),_:2},1024)])),_:2},1024),(0,s.Wm)(z,{inset:"",vertical:"",class:"q-mx-sm"}),(0,s.Wm)(j,{center:"",side:""},{default:(0,s.w5)((()=>[(0,s.Wm)("div",I,[(0,s.Wm)(D,{size:"12px",flat:"",dense:"",round:"",icon:"tune",onClick:e=>Z.configureRemoteInstallation(n)},null,8,["onClick"]),(0,s.Wm)(D,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:e=>Z.deleteRemoteInstallation(n)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,s.Wm)(B,{class:"bg-transparent"},{default:(0,s.w5)((()=>[(0,s.Wm)(L),(0,s.Wm)(D,{round:"",flat:"",color:"primary",icon:"add",onClick:t[2]||(t[2]=e=>R.newRemoteInstallation=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.add")),1)])),_:1})])),_:1})])),_:1}),(0,s.Wm)(K,{modelValue:R.newRemoteInstallation,"onUpdate:modelValue":t[4]||(t[4]=e=>R.newRemoteInstallation=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{style:{"min-width":"350px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(J,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",T,(0,l.zw)(e.$t("components.settings.link.addRemoteInstallation")),1)])),_:1}),(0,s.Wm)(J,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{outlined:"",color:"primary",modelValue:R.newRemoteInstallationAddress,"onUpdate:modelValue":t[3]||(t[3]=e=>R.newRemoteInstallationAddress=e),label:e.$t("components.settings.link.address"),placeholder:"192.168.1.2:8888"},null,8,["modelValue","label"])])),_:1}),(0,s.Wm)(O,{align:"right",class:"text-primary"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(D,{flat:"",label:e.$t("navigation.cancel")},null,8,["label"]),[[G]]),(0,s.wy)((0,s.Wm)(D,{onClick:Z.addNewRemoteInstallation,flat:"",label:e.$t("components.settings.link.add")},null,8,["onClick","label"]),[[G]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,s.Wm)("div",null,[(0,s.Wm)(D,{label:e.$t("navigation.submit"),type:"submit",color:"secondary"},null,8,["label"])])])),_:1},8,["onSubmit"])])])]),e.$q.platform.is.mobile?((0,s.wg)(),(0,s.j4)("div",$,[(0,s.Wm)(z,{class:"q-mb-lg"}),(0,s.Wm)("div",C,[(0,s.Wm)("div",Q,[(0,s.Wm)(F,{flat:"",bordered:"",onClick:t[5]||(t[5]=t=>e.$router.push("/ui/settings-plugins")),class:"bg-grey-1 q-ma-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{icon:"navigate_before",flat:""},{default:(0,s.w5)((()=>[S])),_:1})])),_:1})])])])):(0,s.kq)("",!0)])])),_:1})}var Z=n(4190),x=n(1959),V=n(8825),z=n(5948);const H={class:"row items-center no-wrap"},j={class:"col"},U={class:"text-h6 text-blue-10"},D={class:"col-auto"},P={class:"q-pa-md"},A={class:"row"},L={class:"col-4 text-h6"},N={class:"col-4"},B={class:"row"},J={class:"col-4 text-h6"},O={class:"col-4"},F={class:"row"},K={class:"col-4 text-h6"},Y={class:"col-4"},E={class:""},G={class:"q-gutter-sm"},M={class:""},X={class:"q-gutter-sm"},ee={class:"q-gutter-sm"},te={key:0,class:"sub-setting"},ne={class:"q-gutter-sm"},se={class:"q-gutter-sm"},le={key:1,class:"sub-setting"},ie={class:"q-gutter-sm"},ae={class:"q-pl-lg",style:{width:"80%"}};function oe(e,t,n,i,a,o){const d=(0,s.up)("q-tooltip"),r=(0,s.up)("q-btn"),m=(0,s.up)("q-card-section"),c=(0,s.up)("q-separator"),u=(0,s.up)("q-input"),g=(0,s.up)("q-skeleton"),p=(0,s.up)("q-toggle"),h=(0,s.up)("q-slider"),k=(0,s.up)("q-card"),b=(0,s.up)("q-dialog"),w=(0,s.Q2)("close-popup"),v=(0,s.Q2)("touch-swipe");return(0,s.wg)(),(0,s.j4)(b,{ref:"linkConfigureDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"slide-left","transition-hide":"slide-right","full-height":"",position:"right",onBeforeHide:o.saveInstallationLinkConfig,onHide:o.onDialogHide},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(k,{style:{width:"700px","max-width":"90vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"bg-grey-2"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",H,[(0,s.Wm)("div",j,[(0,s.Wm)("div",U,(0,l.zw)(n.dialogHeader),1)]),(0,s.Wm)("div",D,[(0,s.wy)((0,s.Wm)(r,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"bg-white text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512),[[w]])])])])),_:1}),(0,s.Wm)(m,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",P,[(0,s.Wm)(k,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",A,[(0,s.Wm)("div",L,(0,l.zw)(e.$t("components.settings.link.name"))+":",1),(0,s.Wm)("div",N,(0,l.zw)(e.name),1)]),(0,s.Wm)("div",B,[(0,s.Wm)("div",J,(0,l.zw)(e.$t("components.settings.link.address"))+":",1),(0,s.Wm)("div",O,(0,l.zw)(e.address),1)]),(0,s.Wm)("div",F,[(0,s.Wm)("div",K,(0,l.zw)(e.$t("components.settings.link.version"))+":",1),(0,s.Wm)("div",Y,(0,l.zw)(e.version),1)])])),_:1}),(0,s.Wm)(c),(0,s.Wm)(m,{class:"q-pa-none"},{default:(0,s.w5)((()=>[(0,s.Wm)("h5",E,(0,l.zw)(e.$t("components.settings.link.connection")),1),(0,s.Wm)("div",G,[(0,s.Wm)(u,{outlined:"",color:"primary",modelValue:e.address,"onUpdate:modelValue":t[1]||(t[1]=t=>e.address=t),label:e.$t("components.settings.link.address"),placeholder:e.address},null,8,["modelValue","label","placeholder"])]),(0,s.Wm)("h5",M,(0,l.zw)(e.$t("components.settings.link.configuration")),1),(0,s.Wm)("div",X,[null===e.enableReceivingTasks?((0,s.wg)(),(0,s.j4)(g,{key:0,type:"QToggle"})):((0,s.wg)(),(0,s.j4)(p,{key:1,modelValue:e.enableReceivingTasks,"onUpdate:modelValue":t[2]||(t[2]=t=>e.enableReceivingTasks=t),label:e.$t("components.settings.link.allowReceivingTasks")},null,8,["modelValue","label"]))]),(0,s.Wm)("div",ee,[null===e.enableSendingTasks?((0,s.wg)(),(0,s.j4)(g,{key:0,type:"QToggle"})):((0,s.wg)(),(0,s.j4)(p,{key:1,modelValue:e.enableSendingTasks,"onUpdate:modelValue":t[3]||(t[3]=t=>e.enableSendingTasks=t),label:e.$t("components.settings.link.allowSendingTasks"),disable:"???"===e.address},null,8,["modelValue","label","disable"]))]),e.enableSendingTasks?((0,s.wg)(),(0,s.j4)("div",te,[(0,s.Wm)("div",ne,[null===e.enableTaskPreloading?((0,s.wg)(),(0,s.j4)(g,{key:0,type:"QToggle"})):((0,s.wg)(),(0,s.j4)(p,{key:1,modelValue:e.enableTaskPreloading,"onUpdate:modelValue":t[4]||(t[4]=t=>e.enableTaskPreloading=t),label:e.$t("components.settings.link.enableTaskPreloading")},null,8,["modelValue","label"]))])])):(0,s.kq)("",!0),(0,s.Wm)("div",se,[null===e.enableDistributedWorkerCount?((0,s.wg)(),(0,s.j4)(g,{key:0,type:"QToggle"})):((0,s.wg)(),(0,s.j4)(p,{key:1,modelValue:e.enableDistributedWorkerCount,"onUpdate:modelValue":t[5]||(t[5]=t=>e.enableDistributedWorkerCount=t),label:e.$t("components.settings.link.enableDistributedWorkerCount")},null,8,["modelValue","label"]))]),e.enableDistributedWorkerCount?((0,s.wg)(),(0,s.j4)("div",le,[(0,s.Wm)("div",ie,[null===e.distributedWorkerCountTarget?((0,s.wg)(),(0,s.j4)(g,{key:0,type:"QSlider"})):(0,s.kq)("",!0),(0,s.Wm)("div",ae,[null!==e.distributedWorkerCountTarget?((0,s.wg)(),(0,s.j4)(h,{key:0,modelValue:e.distributedWorkerCountTarget,"onUpdate:modelValue":t[6]||(t[6]=t=>e.distributedWorkerCountTarget=t),min:0,max:12,label:"","label-value":e.$t("components.settings.link.workerTarget")+": "+e.distributedWorkerCountTarget,"label-always":"",color:"primary"},null,8,["modelValue","label-value"])):(0,s.kq)("",!0)])])])):(0,s.kq)("",!0)])),_:1})])),_:1})])])),_:1})])),_:1},512),[[v,o.hide,void 0,{touch:!0,right:!0}]])])),_:1},8,["maximized","onBeforeHide","onHide"])}var de=n(52),re=n.n(de),me=n(7689);const ce={name:"LinkConfigureDialog",props:{dialogHeader:{type:String,default:" --- header --- "},uuid:{type:String,default:" - "}},emits:["ok","hide","path"],methods:{show(){this.$refs.linkConfigureDialogRef.show(),this.fetchInstallationLinkConfig(this.uuid)},hide(){this.$refs.linkConfigureDialogRef.hide()},onDialogHide(){this.$emit("ok",{}),this.$emit("hide")},fetchInstallationLinkConfig:function(e){this.currentUuid=e;let t={uuid:this.currentUuid};re()({method:"post",url:(0,me.J4)("v2","settings/link/read"),data:t}).then((e=>{let t=e.data.link_config;this.address=t.address,this.available=t.available,this.name=t.name,this.version=t.version,this.enableReceivingTasks=t.enable_receiving_tasks,this.enableSendingTasks=t.enable_sending_tasks,this.enableTaskPreloading=t.enable_task_preloading,this.enableDistributedWorkerCount=t.enable_distributed_worker_count,this.distributedWorkerCountTarget=e.data.distributed_worker_count_target}))},saveInstallationLinkConfig:function(){let e={link_config:{uuid:this.currentUuid,address:this.address,enable_receiving_tasks:this.enableReceivingTasks,enable_sending_tasks:this.enableSendingTasks,enable_task_preloading:this.enableTaskPreloading,enable_distributed_worker_count:this.enableDistributedWorkerCount},distributed_worker_count_target:this.distributedWorkerCountTarget};re()({method:"post",url:(0,me.J4)("v2","settings/link/write"),data:e}).then((e=>{this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}},watch:{uuid(e){e.length>0&&(this.currentUuid=this.uuid)}},data:function(){return{maximizedToggle:!0,currentUuid:(0,x.iH)(null),address:(0,x.iH)(""),available:(0,x.iH)(!1),name:(0,x.iH)(""),version:(0,x.iH)(""),enableReceivingTasks:(0,x.iH)(null),enableSendingTasks:(0,x.iH)(null),enableTaskPreloading:(0,x.iH)(null),enableDistributedWorkerCount:(0,x.iH)(null),distributedWorkerCountTarget:(0,x.iH)(null)}}};var ue=n(6778),ge=n(151),pe=n(5589),he=n(2165),ke=n(8870),be=n(5869),we=n(4842),ve=n(4103),fe=n(8886),We=n(2064),_e=n(8020),qe=n(677),ye=n(7518),Ie=n.n(ye);ce.render=oe;const Te=ce;Ie()(ce,"components",{QDialog:ue.Z,QCard:ge.Z,QCardSection:pe.Z,QBtn:he.Z,QTooltip:ke.Z,QSeparator:be.Z,QInput:we.Z,QSkeleton:ve.ZP,QToggle:fe.Z,QSlider:We.Z}),Ie()(ce,"directives",{TouchSwipe:_e.Z,ClosePopup:qe.Z});const $e={name:"SettingsLink",setup(){(0,V.Z)();const{t:e}=(0,z.QT)();let t=null,n=(0,Z.A)(e);function l(){t=n.init()}function i(){n.close()}(0,s.bv)((()=>{l()})),(0,s.Ah)((()=>{i()}))},data(){return{installationName:(0,x.iH)(null),remoteInstallations:(0,x.iH)(null),newRemoteInstallation:(0,x.iH)(!1),newRemoteInstallationAddress:(0,x.iH)("")}},methods:{fetchSettings:function(){re()({method:"get",url:(0,me.J4)("v2","settings/read")}).then((e=>{this.installationName=e.data.settings.installation_name;let t=[];for(let n=0;n<e.data.settings.remote_installations.length;n++){let s=e.data.settings.remote_installations[n];t[t.length]={address:s.address,enableReceivingTasks:s.enable_receiving_tasks,enableSendingTasks:s.enable_sending_tasks,name:s.name,version:s.version,uuid:s.uuid,available:s.available}}this.remoteInstallations=t})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToFetchSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},save:function(){let e=[];for(let n=0;n<this.remoteInstallations.length;n++)e[e.length]={address:this.remoteInstallations[n].address,enable_receiving_tasks:this.remoteInstallations[n].enableReceivingTasks,enable_sending_tasks:this.remoteInstallations[n].enableSendingTasks,name:this.remoteInstallations[n].name,version:this.remoteInstallations[n].version,uuid:this.remoteInstallations[n].uuid,available:this.remoteInstallations[n].available};let t={settings:{installation_name:this.installationName,remote_installations:e}};re()({method:"post",url:(0,me.J4)("v2","settings/write"),data:t}).then((e=>{this.fetchSettings(),this.$q.notify({color:"positive",position:"top",icon:"cloud_done",message:this.$t("notifications.saved"),timeout:200})})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.failedToSaveSettings"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},addNewRemoteInstallation:function(){for(let t=0;t<this.remoteInstallations.length;t++)if(this.newRemoteInstallationAddress===this.remoteInstallations[t].address)return void this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.remoteInstallationAlreadyInList"),icon:"report_problem",actions:[{icon:"close",color:"white"}]});let e={address:this.newRemoteInstallationAddress};re()({method:"post",url:(0,me.J4)("v2","settings/link/validate"),data:e}).then((e=>{if("undefined"===typeof e.data.installation.settings.installation_name)this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.incompatibleRemoteInstallation"),icon:"report_problem",actions:[{icon:"close",color:"white"}]});else{let t=e.data.installation.settings.installation_name,n=e.data.installation.version,s=e.data.installation.session.uuid;this.remoteInstallations[this.remoteInstallations.length]={address:this.newRemoteInstallationAddress,enable_receiving_tasks:!1,enable_sending_tasks:!1,name:t,version:n,uuid:s,available:!0},this.save()}})).catch((()=>{this.$q.notify({color:"negative",position:"top",message:this.$t("notifications.invalidRemoteInstallationAddress"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},deleteRemoteInstallation:function(e){let t=[];for(let n=0;n<this.remoteInstallations.length;n++)n!==e&&(t[t.length]=this.remoteInstallations[n]);this.remoteInstallations=t},configureRemoteInstallation:function(e){let t=this.remoteInstallations[e];this.$q.dialog({component:Te,componentProps:{dialogHeader:this.$t("headers.configureRemoteInstallationLink"),uuid:t.uuid}}).onOk((e=>{})).onDismiss((()=>{this.fetchSettings()}))}},created(){this.fetchSettings()},computed:{dragOptions(){return{animation:100,group:"scheduleOrder",disabled:!1,ghostClass:"ghost",direction:"vertical",delay:200,delayOnTouchOnly:!0}}}};var Ce=n(4379),Qe=n(5269),Se=n(7011),Re=n(3414),Ze=n(2035),xe=n(4027),Ve=n(2350),ze=n(846),He=n(2025),je=n(9367);$e.render=R;const Ue=$e;Ie()($e,"components",{QPage:Ce.Z,QForm:Qe.Z,QSkeleton:ve.ZP,QInput:we.Z,QSeparator:be.Z,QList:Se.Z,QItem:Re.Z,QItemSection:Ze.Z,QImg:xe.Z,QItemLabel:Ve.Z,QBtn:he.Z,QBar:ze.Z,QSpace:He.Z,QTooltip:ke.Z,QDialog:ue.Z,QCard:ge.Z,QCardSection:pe.Z,QCardActions:je.Z}),Ie()($e,"directives",{ClosePopup:qe.Z})}}]);