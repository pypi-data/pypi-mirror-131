(self["webpackChunkunmanic_frontend"]=self["webpackChunkunmanic_frontend"]||[]).push([[64],{9354:(e,t,n)=>{"use strict";n.d(t,{nx:()=>r,iw:()=>a});var o=n(2322),i=n.n(o),s=n(9176);const r=function(e){return i().process({text:e,removeMisalignedTags:!1,addInLineBreaks:!0}).html},a=function(e){let t=new s._("full",{html:!0,xhtmlOut:!1,breaks:!1,langPrefix:"language-",typographer:!1,quotes:"“”‘’",highlight:function(){return""}});return t.render(e)}},7689:(e,t,n)=>{"use strict";n.d(t,{J4:()=>c,ZP:()=>l});var o=n(52),i=n.n(o),s=n(4434);let r={};const a=function(){if("undefined"===typeof r.serverUrl){let e=document.createElement("a");e.href=window.location.href,r.serverUrl=e.protocol+"//"+e.host}return r.serverUrl},c=function(e,t){if("undefined"===typeof r.apiUrl){let e=a();r.apiUrl=e+"/unmanic/api"}return r.apiUrl+"/"+e+"/"+t},l={$unmanic:r,getUnmanicVersion(){return new Promise(((e,t)=>{"undefined"===typeof r.version?i()({method:"get",url:c("v2","version/read")}).then((t=>{r.version=t.data.version,e(r.version)})):e(r.version)}))},getUnmanicSession(){return new Promise(((e,t)=>{"undefined"===typeof r.session?i()({method:"get",url:c("v2","session/state")}).then((t=>{r.session={created:t.data.created,email:t.data.email,level:t.data.level,name:t.data.name,picture_uri:t.data.picture_uri,uuid:t.data.uuid},e(r.session)})).catch((()=>{t()})):e(r.session)}))},getUnmanicPrivacyPolicy(){return new Promise(((e,t)=>{r.docs="undefined"===typeof r.docs?{}:r.docs,"undefined"===typeof r.docs.privacypolicy?i()({method:"get",url:c("v2","docs/privacypolicy")}).then((t=>{r.docs.privacypolicy=t.data.content.join(""),e(r.docs.privacypolicy)})).catch((()=>{t()})):e(r.docs.privacypolicy)}))},login(e){i()({method:"get",url:c("v1","session/unmanic-patreon-login-url")}).then((e=>{if(e.data.success){let t=e.data.data.url,n=e.data.uuid,o=window.location.origin+"/unmanic/ui/trigger/?session=reload",i='<form id="loginForm" action="'+t+'" method="post" class="display:none;"><input type="hidden" name="uuid" value="'+n+'" /><input type="hidden" name="current_uri" value="'+o+'" /></form>';document.body.innerHTML+=i,document.getElementById("loginForm").submit()}else console.error("An error occurred while fetching the patreon sponsor page.")})).catch((()=>{s.Z.create({color:"negative",position:"top",message:e("notifications.failedToFetchLoginUrl"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},logout(e){i()({method:"get",url:c("v1","session/unmanic-sign-out-url")}).then((e=>{if(e.data.success){let t=e.data.data.url,n=e.data.uuid,o=window.location.origin+"/unmanic/ui/trigger/?session=reload",i='<form id="loginForm" action="'+t+'" method="post" class="display:none;"><input type="hidden" name="uuid" value="'+n+'" /><input type="hidden" name="current_uri" value="'+o+'" /></form>';document.body.innerHTML+=i,document.getElementById("loginForm").submit()}else console.error("An error occurred while fetching the patreon sponsor page.")})).catch((()=>{s.Z.create({color:"negative",position:"top",message:e("notifications.failedToFetchLogoutUrl"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))},sponsorProject(e){i()({method:"get",url:c("v1","session/unmanic-patreon-page")}).then((t=>{if(t.data.success){let n=window.open(t.data.data.sponsor_page,"_blank");n?n.focus():s.Z.create({color:"negative",position:"top",message:e("notifications.allowPopups"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}else console.error("An error occurred while fetching the patreon sponsor page.")})).catch((()=>{s.Z.create({color:"negative",position:"top",message:e("notifications.failedToFetchLoginUrl"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}}},4190:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(4434),i=n(7689);const s=function(e){let t=null,n=!0,s=null,r=null;const a=function(){function l(n){n?null===t&&(t=o.Z.create({timeout:0,spinner:!0,color:"warning",position:"top",message:e("notifications.backendConnectionWarning"),icon:"report_problem"})):"function"===typeof t&&t()}function d(){if("undefined"===typeof i.ZP.ws||null===i.ZP.ws){let e,t=window.location;e="https:"===t.protocol?"wss:":"ws:",e+="//"+t.host+"/unmanic/websocket",i.ZP.ws=new WebSocket(e)}}function u(){i.ZP.ws=null,i.ZP.websocketEventListeners={},s=setTimeout((()=>{console.debug("Attempting reconnect to Unmanic server..."),a()}),4e3)}function p(e){"undefined"!==typeof i.ZP.frontendMessage&&("function"===typeof i.ZP.frontendMessage[e]&&(i.ZP.frontendMessage[e](),"undefined"!==typeof i.ZP.ws&&null!==i.ZP.ws&&i.ZP.ws.send(JSON.stringify({command:"dismiss_message",params:{message_id:e}}))),"undefined"!==typeof i.ZP.frontendMessage[e]&&delete i.ZP.frontendMessage[e])}function f(e,t,n,s,r,a){let c="notifications.serverMessages."+s,l=e(c);if(l===c&&(l=e("notifications.serverMessages.defaults."+n)),r)l=l+"<br>"+r;else{let t="notifications.serverMessages."+s+"Message",n=e(t);n!==t&&(r=e("notifications.serverMessages."+s+"Message"),l=l+"<br>"+r)}l='<span style="display:block;min-height:50px;white-space:pre;">'+l+"</span>";t in i.ZP.frontendMessage?i.ZP.frontendMessage[t]({message:l,html:!0}):i.ZP.frontendMessage[t]=o.Z.create({group:!1,type:"ongoing",position:"bottom-left",message:l,html:!0})}function m(e,t,n,s,r,a){if(!(t in i.ZP.frontendMessage)){let c="notifications.serverMessages."+s,l=e(c);l===c&&(l=e("notifications.serverMessages.defaults."+n)),r&&(l=l+" - "+r);let d="info",u="announcement";"error"===n?(d="negative",u="error"):"warning"===n?(d="warning",u="warning"):"success"===n&&(d="positive",u="thumb_up"),i.ZP.frontendMessage[t]=o.Z.create({timeout:a,color:d,position:"bottom-right",message:l,icon:u,actions:[{icon:"close",color:"white",handler:()=>{p(t)}}]})}}function g(t){"undefined"===typeof i.ZP.frontendMessage&&(i.ZP.frontendMessage={});let n=[];for(let o=0;o<t.length;o++){let i=t[o].id,s=t[o].type,r=t[o].code,a=t[o].message,c=t[o].timeout;"status"===s?f(e,i,s,r,a,c):m(e,i,s,r,a,c),n[n.length]=i}for(let e in i.ZP.frontendMessage)n.includes(e)||p(e)}return"undefined"!==typeof i.ZP.ws&&null!==i.ZP.ws||(console.debug("Starting connection to websocket server"),d()),c("open","start_frontend_messages",(function(e){clearTimeout(s),l(!1),i.ZP.ws.send(JSON.stringify({command:"start_frontend_messages",params:{}}))})),c("message","handle_frontend_messages",(function(e){if("string"===typeof e.data){let t=JSON.parse(e.data);if(t.success)switch(null===r?r=t.server_id:t.server_id!==r&&(console.debug("Unmanic server has restarted. Reloading page..."),location.reload()),t.type){case"frontend_message":g(t.data);break}else console.error("WebSocket Error: Received contained errors - "+e.data)}else console.error("WebSocket Error: Received data was not JSON - "+e.data)})),c("error","websocket_error",(function(e){console.error("WebSocket Error: "+e),l(!0)})),c("close","websocket_close",(function(e){n&&u()})),i.ZP.ws},c=function(e,t,n){"undefined"!==typeof i.ZP.ws&&null!==i.ZP.ws&&("undefined"===typeof i.ZP.websocketEventListeners&&(i.ZP.websocketEventListeners={}),t in i.ZP.websocketEventListeners||(i.ZP.ws.addEventListener(e,n),i.ZP.websocketEventListeners[t]=!0))},l=function(){"undefined"!==typeof i.ZP.ws&&null!==i.ZP.ws&&(console.debug("Closing connection to websocket server"),n=!1,i.ZP.ws.close(),i.ZP.ws=null,i.ZP.websocketEventListeners={})};return{serverId:r,init:function(){return a()},close:function(){l()},addEventListener:function(e,t,n){c(e,t,n)}}}},1536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var o=n(3673),i=n(2323);const s={class:"row items-center no-wrap"},r={class:"col"},a={class:"text-h6 text-blue-10"},c={class:"col-auto"},l={class:"q-pa-md"};function d(e,t,n,d,u,p){const f=(0,o.up)("q-tooltip"),m=(0,o.up)("q-btn"),g=(0,o.up)("q-card-section"),h=(0,o.up)("q-icon"),w=(0,o.up)("q-input"),v=(0,o.up)("q-separator"),y=(0,o.up)("q-item-section"),Z=(0,o.up)("q-item-label"),P=(0,o.up)("q-item"),b=(0,o.up)("q-list"),_=(0,o.up)("q-card"),k=(0,o.up)("q-dialog"),W=(0,o.Q2)("close-popup"),M=(0,o.Q2)("ripple"),L=(0,o.Q2)("touch-swipe");return(0,o.wg)(),(0,o.j4)(k,{ref:"directoryBrowserDialogRef",maximized:e.$q.platform.is.mobile,"transition-show":"slide-left","transition-hide":"slide-right","full-height":"",position:"right",onHide:p.onDialogHide},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(_,{style:{width:"700px","max-width":"90vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",s,[(0,o.Wm)("div",r,[(0,o.Wm)("div",a,(0,i.zw)(n.dialogHeader),1)]),(0,o.Wm)("div",c,[(0,o.wy)((0,o.Wm)(m,{color:"grey-7",dense:"",round:"",flat:"",icon:"arrow_forward"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"bg-white text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("tooltips.close")),1)])),_:1})])),_:1},512),[[W]])])])])),_:1}),(0,o.Wm)(g,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",l,[(0,o.Wm)(_,{flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{disable:"",readonly:"",borderless:"",modelValue:this.currentPath,"onUpdate:modelValue":t[1]||(t[1]=e=>this.currentPath=e)},{before:(0,o.w5)((()=>[(0,o.Wm)(h,{name:"folder_open"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(v),(0,o.Wm)(g,{class:"q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{bordered:"",padding:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.directories,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(P,{key:t,clickable:"",onClick:t=>p.fetchDirectoryListing(e.full_path)},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{color:"primary",name:"folder_open"})])),_:1}),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[M]]))),128))])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},512),[[L,p.hide,void 0,{touch:!0,right:!0}]])])),_:1},8,["maximized","onHide"])}var u=n(52),p=n.n(u),f=n(7689),m=n(1959);const g={name:"DirectoryBrowserDialog",props:{dialogHeader:{type:String,default:" --- header --- "},initialPath:{type:String,default:" --- initial path --- "},listType:{type:String,default:" --- list type --- "}},emits:["ok","hide","path"],methods:{show(){this.$refs.directoryBrowserDialogRef.show(),this.fetchDirectoryListing(this.initialPath)},hide(){this.$refs.directoryBrowserDialogRef.hide()},onDialogHide(){this.$emit("ok",{selectedPath:this.currentPath}),this.$emit("hide")},fetchDirectoryListing:function(e){this.currentPath=e;let t={current_path:this.currentPath,list_type:this.listType};p()({method:"post",url:(0,f.J4)("v2","filebrowser/list"),data:t}).then((e=>{this.directories=e.data.directories,this.files=e.data.files}))}},watch:{initialPath(e){e.length>0&&(this.currentPath=this.initialPath)}},data:function(){return{maximizedToggle:!0,currentPath:(0,m.iH)(null),directories:(0,m.iH)([]),files:(0,m.iH)([])}}};var h=n(6778),w=n(151),v=n(5589),y=n(2165),Z=n(8870),P=n(4842),b=n(4554),_=n(5869),k=n(7011),W=n(3414),M=n(2035),L=n(2350),q=n(8020),S=n(677),U=n(6489),Q=n(7518),x=n.n(Q);g.render=d;const E=g;x()(g,"components",{QDialog:h.Z,QCard:w.Z,QCardSection:v.Z,QBtn:y.Z,QTooltip:Z.Z,QInput:P.Z,QIcon:b.Z,QSeparator:_.Z,QList:k.Z,QItem:W.Z,QItemSection:M.Z,QItemLabel:L.Z}),x()(g,"directives",{TouchSwipe:q.Z,ClosePopup:S.Z,Ripple:U.Z})},1561:(e,t,n)=>{e.exports=n.p+"img/unmanic-logo-white.a3277864.png"}}]);