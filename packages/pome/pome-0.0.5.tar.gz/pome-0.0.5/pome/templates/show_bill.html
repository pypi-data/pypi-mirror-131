{% extends 'base.html' %}
{% block main_title %}
Bill
{% endblock %}
{% block content %}

<div id="tx-error" class="hidden mb-10 bg-red-500 rounded-sm text-white p-5">

</div>

<div class="-mt-5">

  <div class="flex space-x-5 items-end">
    <div>
      <h2 class="text-lg">Provider: {{bill.provider}}</h2>
      <h2 class="text-lg">Status: {{bill.status}}</h2>
    </div>

  </div>

  <div class="flex mt-3">

    <div>
      <h1 class="text-2xl">Bill</h1>
      <textarea rows="{{textarea_bill_height}}" cols="60" id="tx-bill" data-gramm="false" data-gramm_editor="false"
        data-enable-grammarly="false" disabled>{{all_transactions[bill.transactions.bill]}}</textarea>
      <p>Transaction:
        <a class="normal-link" href="/transactions/recorded/{{all_transactions[bill.transactions.bill].id}}"
          target="_blank">{{all_transactions[bill.transactions.bill].id}}</a>
      </p>
      {% if bill_pending %}
      <div class="flex space-x-5 items-start mt-5">
        <a href="/bills">
          <div class="btn btn-secondary text-lg">Cancel</div>
        </a>
        <div id="btn-bill-record" class="btn btn-primary text-lg" onclick="postBillPaymentPayload(this)">Pay Bill</div>
      </div>
      {%endif%}
    </div>


    <div class="ml-5" id="panel-payment">
      <h1 class="text-2xl">Payment</h1>
      <textarea rows="{{textarea_payment_height}}" cols="60" id="tx-payment" data-gramm="false"
        data-gramm_editor="false" data-enable-grammarly="false" {% if not bill_pending %} disabled {% endif %}>{% if bill_pending %}{{bill.transactions.payment}}{% else %}{{all_transactions[bill.transactions.payment]}}
        {% endif %}</textarea>
      {% if not bill_pending %}
      <p>Transaction:
        <a class="normal-link" href="/transactions/recorded/{{all_transactions[bill.transactions.payment].id}}"
          target="_blank">{{all_transactions[bill.transactions.payment].id}}</a>
      </p>
      {% endif %}

      {% if bill_pending %}
      <script>$('#tx-payment').highlightWithinTextarea({
          highlight: ["??", "__"],

        });</script>
      {% endif %}
    </div>


  </div>

</div>

<script src="{{url_for('static', filename='bill.js')}}"></script> {% endblock %}